(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Zt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vf(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var bm={exports:{}},el={},wm={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _i=Symbol.for("react.element"),bf=Symbol.for("react.portal"),wf=Symbol.for("react.fragment"),kf=Symbol.for("react.strict_mode"),jf=Symbol.for("react.profiler"),_f=Symbol.for("react.provider"),Nf=Symbol.for("react.context"),Sf=Symbol.for("react.forward_ref"),zf=Symbol.for("react.suspense"),Ef=Symbol.for("react.memo"),Cf=Symbol.for("react.lazy"),Ad=Symbol.iterator;function Pf(e){return e===null||typeof e!="object"?null:(e=Ad&&e[Ad]||e["@@iterator"],typeof e=="function"?e:null)}var km={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jm=Object.assign,_m={};function jn(e,t,r){this.props=e,this.context=t,this.refs=_m,this.updater=r||km}jn.prototype.isReactComponent={};jn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};jn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Nm(){}Nm.prototype=jn.prototype;function Sc(e,t,r){this.props=e,this.context=t,this.refs=_m,this.updater=r||km}var zc=Sc.prototype=new Nm;zc.constructor=Sc;jm(zc,jn.prototype);zc.isPureReactComponent=!0;var Dd=Array.isArray,Sm=Object.prototype.hasOwnProperty,Ec={current:null},zm={key:!0,ref:!0,__self:!0,__source:!0};function Em(e,t,r){var n,i={},a=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)Sm.call(t,n)&&!zm.hasOwnProperty(n)&&(i[n]=t[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:_i,type:e,key:a,ref:l,props:i,_owner:Ec.current}}function Tf(e,t){return{$$typeof:_i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Cc(e){return typeof e=="object"&&e!==null&&e.$$typeof===_i}function Af(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Rd=/\/+/g;function Tl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Af(""+e.key):t.toString(36)}function aa(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case _i:case bf:l=!0}}if(l)return l=e,i=i(l),e=n===""?"."+Tl(l,0):n,Dd(i)?(r="",e!=null&&(r=e.replace(Rd,"$&/")+"/"),aa(i,t,r,"",function(d){return d})):i!=null&&(Cc(i)&&(i=Tf(i,r+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Rd,"$&/")+"/")+e)),t.push(i)),1;if(l=0,n=n===""?".":n+":",Dd(e))for(var o=0;o<e.length;o++){a=e[o];var c=n+Tl(a,o);l+=aa(a,t,r,c,i)}else if(c=Pf(e),typeof c=="function")for(e=c.call(e),o=0;!(a=e.next()).done;)a=a.value,c=n+Tl(a,o++),l+=aa(a,t,r,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Oi(e,t,r){if(e==null)return e;var n=[],i=0;return aa(e,n,"","",function(a){return t.call(r,a,i++)}),n}function Df(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Rt={current:null},la={transition:null},Rf={ReactCurrentDispatcher:Rt,ReactCurrentBatchConfig:la,ReactCurrentOwner:Ec};function Cm(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:Oi,forEach:function(e,t,r){Oi(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Oi(e,function(){t++}),t},toArray:function(e){return Oi(e,function(t){return t})||[]},only:function(e){if(!Cc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ee.Component=jn;Ee.Fragment=wf;Ee.Profiler=jf;Ee.PureComponent=Sc;Ee.StrictMode=kf;Ee.Suspense=zf;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rf;Ee.act=Cm;Ee.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=jm({},e.props),i=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=Ec.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)Sm.call(t,c)&&!zm.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:_i,type:e.type,key:i,ref:a,props:n,_owner:l}};Ee.createContext=function(e){return e={$$typeof:Nf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_f,_context:e},e.Consumer=e};Ee.createElement=Em;Ee.createFactory=function(e){var t=Em.bind(null,e);return t.type=e,t};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(e){return{$$typeof:Sf,render:e}};Ee.isValidElement=Cc;Ee.lazy=function(e){return{$$typeof:Cf,_payload:{_status:-1,_result:e},_init:Df}};Ee.memo=function(e,t){return{$$typeof:Ef,type:e,compare:t===void 0?null:t}};Ee.startTransition=function(e){var t=la.transition;la.transition={};try{e()}finally{la.transition=t}};Ee.unstable_act=Cm;Ee.useCallback=function(e,t){return Rt.current.useCallback(e,t)};Ee.useContext=function(e){return Rt.current.useContext(e)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(e){return Rt.current.useDeferredValue(e)};Ee.useEffect=function(e,t){return Rt.current.useEffect(e,t)};Ee.useId=function(){return Rt.current.useId()};Ee.useImperativeHandle=function(e,t,r){return Rt.current.useImperativeHandle(e,t,r)};Ee.useInsertionEffect=function(e,t){return Rt.current.useInsertionEffect(e,t)};Ee.useLayoutEffect=function(e,t){return Rt.current.useLayoutEffect(e,t)};Ee.useMemo=function(e,t){return Rt.current.useMemo(e,t)};Ee.useReducer=function(e,t,r){return Rt.current.useReducer(e,t,r)};Ee.useRef=function(e){return Rt.current.useRef(e)};Ee.useState=function(e){return Rt.current.useState(e)};Ee.useSyncExternalStore=function(e,t,r){return Rt.current.useSyncExternalStore(e,t,r)};Ee.useTransition=function(){return Rt.current.useTransition()};Ee.version="18.3.1";wm.exports=Ee;var x=wm.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $f=x,If=Symbol.for("react.element"),Lf=Symbol.for("react.fragment"),Of=Object.prototype.hasOwnProperty,Mf=$f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Uf={key:!0,ref:!0,__self:!0,__source:!0};function Pm(e,t,r){var n,i={},a=null,l=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)Of.call(t,n)&&!Uf.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:If,type:e,key:a,ref:l,props:i,_owner:Mf.current}}el.Fragment=Lf;el.jsx=Pm;el.jsxs=Pm;bm.exports=el;var s=bm.exports,Tm={exports:{}},Vt={},Am={exports:{}},Dm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,L){var se=O.length;O.push(L);e:for(;0<se;){var de=se-1>>>1,ke=O[de];if(0<i(ke,L))O[de]=L,O[se]=ke,se=de;else break e}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var L=O[0],se=O.pop();if(se!==L){O[0]=se;e:for(var de=0,ke=O.length,Ge=ke>>>1;de<Ge;){var Ie=2*(de+1)-1,Se=O[Ie],He=Ie+1,rt=O[He];if(0>i(Se,se))He<ke&&0>i(rt,Se)?(O[de]=rt,O[He]=se,de=He):(O[de]=Se,O[Ie]=se,de=Ie);else if(He<ke&&0>i(rt,se))O[de]=rt,O[He]=se,de=He;else break e}}return L}function i(O,L){var se=O.sortIndex-L.sortIndex;return se!==0?se:O.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,m=null,f=3,p=!1,b=!1,j=!1,S=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(O){for(var L=r(d);L!==null;){if(L.callback===null)n(d);else if(L.startTime<=O)n(d),L.sortIndex=L.expirationTime,t(c,L);else break;L=r(d)}}function _(O){if(j=!1,g(O),!b)if(r(c)!==null)b=!0,q($);else{var L=r(d);L!==null&&H(_,L.startTime-O)}}function $(O,L){b=!1,j&&(j=!1,y(I),I=-1),p=!0;var se=f;try{for(g(L),m=r(c);m!==null&&(!(m.expirationTime>L)||O&&!E());){var de=m.callback;if(typeof de=="function"){m.callback=null,f=m.priorityLevel;var ke=de(m.expirationTime<=L);L=e.unstable_now(),typeof ke=="function"?m.callback=ke:m===r(c)&&n(c),g(L)}else n(c);m=r(c)}if(m!==null)var Ge=!0;else{var Ie=r(d);Ie!==null&&H(_,Ie.startTime-L),Ge=!1}return Ge}finally{m=null,f=se,p=!1}}var A=!1,M=null,I=-1,G=5,K=-1;function E(){return!(e.unstable_now()-K<G)}function W(){if(M!==null){var O=e.unstable_now();K=O;var L=!0;try{L=M(!0,O)}finally{L?P():(A=!1,M=null)}}else A=!1}var P;if(typeof h=="function")P=function(){h(W)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,k=U.port2;U.port1.onmessage=W,P=function(){k.postMessage(null)}}else P=function(){S(W,0)};function q(O){M=O,A||(A=!0,P())}function H(O,L){I=S(function(){O(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){b||p||(b=!0,q($))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(O){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var se=f;f=L;try{return O()}finally{f=se}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,L){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var se=f;f=O;try{return L()}finally{f=se}},e.unstable_scheduleCallback=function(O,L,se){var de=e.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?de+se:de):se=de,O){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=se+ke,O={id:u++,callback:L,priorityLevel:O,startTime:se,expirationTime:ke,sortIndex:-1},se>de?(O.sortIndex=se,t(d,O),r(c)===null&&O===r(d)&&(j?(y(I),I=-1):j=!0,H(_,se-de))):(O.sortIndex=ke,t(c,O),b||p||(b=!0,q($))),O},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(O){var L=f;return function(){var se=f;f=L;try{return O.apply(this,arguments)}finally{f=se}}}})(Dm);Am.exports=Dm;var Ff=Am.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bf=x,Wt=Ff;function Q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rm=new Set,ii={};function Ts(e,t){hn(e,t),hn(e+"Capture",t)}function hn(e,t){for(ii[e]=t,e=0;e<t.length;e++)Rm.add(t[e])}var Rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),go=Object.prototype.hasOwnProperty,qf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$d={},Id={};function Gf(e){return go.call(Id,e)?!0:go.call($d,e)?!1:qf.test(e)?Id[e]=!0:($d[e]=!0,!1)}function Hf(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Wf(e,t,r,n){if(t===null||typeof t>"u"||Hf(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $t(e,t,r,n,i,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){jt[e]=new $t(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];jt[t]=new $t(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){jt[e]=new $t(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){jt[e]=new $t(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){jt[e]=new $t(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){jt[e]=new $t(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){jt[e]=new $t(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){jt[e]=new $t(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){jt[e]=new $t(e,5,!1,e.toLowerCase(),null,!1,!1)});var Pc=/[\-:]([a-z])/g;function Tc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Pc,Tc);jt[t]=new $t(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Pc,Tc);jt[t]=new $t(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Pc,Tc);jt[t]=new $t(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){jt[e]=new $t(e,1,!1,e.toLowerCase(),null,!1,!1)});jt.xlinkHref=new $t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){jt[e]=new $t(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ac(e,t,r,n){var i=jt.hasOwnProperty(t)?jt[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Wf(t,r,i,n)&&(r=null),n||i===null?Gf(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Or=Bf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mi=Symbol.for("react.element"),Ws=Symbol.for("react.portal"),Vs=Symbol.for("react.fragment"),Dc=Symbol.for("react.strict_mode"),xo=Symbol.for("react.profiler"),$m=Symbol.for("react.provider"),Im=Symbol.for("react.context"),Rc=Symbol.for("react.forward_ref"),yo=Symbol.for("react.suspense"),vo=Symbol.for("react.suspense_list"),$c=Symbol.for("react.memo"),Br=Symbol.for("react.lazy"),Lm=Symbol.for("react.offscreen"),Ld=Symbol.iterator;function Tn(e){return e===null||typeof e!="object"?null:(e=Ld&&e[Ld]||e["@@iterator"],typeof e=="function"?e:null)}var Ke=Object.assign,Al;function Un(e){if(Al===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Al=t&&t[1]||""}return`
`+Al+e}var Dl=!1;function Rl(e,t){if(!e||Dl)return"";Dl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=n.stack.split(`
`),l=i.length-1,o=a.length-1;1<=l&&0<=o&&i[l]!==a[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==a[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==a[o]){var c=`
`+i[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{Dl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Un(e):""}function Vf(e){switch(e.tag){case 5:return Un(e.type);case 16:return Un("Lazy");case 13:return Un("Suspense");case 19:return Un("SuspenseList");case 0:case 2:case 15:return e=Rl(e.type,!1),e;case 11:return e=Rl(e.type.render,!1),e;case 1:return e=Rl(e.type,!0),e;default:return""}}function bo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Vs:return"Fragment";case Ws:return"Portal";case xo:return"Profiler";case Dc:return"StrictMode";case yo:return"Suspense";case vo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Im:return(e.displayName||"Context")+".Consumer";case $m:return(e._context.displayName||"Context")+".Provider";case Rc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $c:return t=e.displayName||null,t!==null?t:bo(e.type)||"Memo";case Br:t=e._payload,e=e._init;try{return bo(e(t))}catch{}}return null}function Kf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bo(t);case 8:return t===Dc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function is(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Om(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Yf(e){var t=Om(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){n=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ui(e){e._valueTracker||(e._valueTracker=Yf(e))}function Mm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Om(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function va(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function wo(e,t){var r=t.checked;return Ke({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Od(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=is(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Um(e,t){t=t.checked,t!=null&&Ac(e,"checked",t,!1)}function ko(e,t){Um(e,t);var r=is(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?jo(e,t.type,r):t.hasOwnProperty("defaultValue")&&jo(e,t.type,is(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Md(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function jo(e,t,r){(t!=="number"||va(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Fn=Array.isArray;function an(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+is(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function _o(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Ke({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ud(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Q(92));if(Fn(r)){if(1<r.length)throw Error(Q(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:is(r)}}function Fm(e,t){var r=is(t.value),n=is(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Fd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Bm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function No(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Bm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Fi,qm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Fi=Fi||document.createElement("div"),Fi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ai(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Hn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qf=["Webkit","ms","Moz","O"];Object.keys(Hn).forEach(function(e){Qf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hn[t]=Hn[e]})});function Gm(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Hn.hasOwnProperty(e)&&Hn[e]?(""+t).trim():t+"px"}function Hm(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Gm(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var Jf=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function So(e,t){if(t){if(Jf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Q(62))}}function zo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eo=null;function Ic(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Co=null,ln=null,on=null;function Bd(e){if(e=zi(e)){if(typeof Co!="function")throw Error(Q(280));var t=e.stateNode;t&&(t=il(t),Co(e.stateNode,e.type,t))}}function Wm(e){ln?on?on.push(e):on=[e]:ln=e}function Vm(){if(ln){var e=ln,t=on;if(on=ln=null,Bd(e),t)for(e=0;e<t.length;e++)Bd(t[e])}}function Km(e,t){return e(t)}function Ym(){}var $l=!1;function Qm(e,t,r){if($l)return e(t,r);$l=!0;try{return Km(e,t,r)}finally{$l=!1,(ln!==null||on!==null)&&(Ym(),Vm())}}function li(e,t){var r=e.stateNode;if(r===null)return null;var n=il(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Q(231,t,typeof r));return r}var Po=!1;if(Rr)try{var An={};Object.defineProperty(An,"passive",{get:function(){Po=!0}}),window.addEventListener("test",An,An),window.removeEventListener("test",An,An)}catch{Po=!1}function Xf(e,t,r,n,i,a,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var Wn=!1,ba=null,wa=!1,To=null,Zf={onError:function(e){Wn=!0,ba=e}};function ep(e,t,r,n,i,a,l,o,c){Wn=!1,ba=null,Xf.apply(Zf,arguments)}function tp(e,t,r,n,i,a,l,o,c){if(ep.apply(this,arguments),Wn){if(Wn){var d=ba;Wn=!1,ba=null}else throw Error(Q(198));wa||(wa=!0,To=d)}}function As(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Jm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qd(e){if(As(e)!==e)throw Error(Q(188))}function rp(e){var t=e.alternate;if(!t){if(t=As(e),t===null)throw Error(Q(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return qd(i),e;if(a===n)return qd(i),t;a=a.sibling}throw Error(Q(188))}if(r.return!==n.return)r=i,n=a;else{for(var l=!1,o=i.child;o;){if(o===r){l=!0,r=i,n=a;break}if(o===n){l=!0,n=i,r=a;break}o=o.sibling}if(!l){for(o=a.child;o;){if(o===r){l=!0,r=a,n=i;break}if(o===n){l=!0,n=a,r=i;break}o=o.sibling}if(!l)throw Error(Q(189))}}if(r.alternate!==n)throw Error(Q(190))}if(r.tag!==3)throw Error(Q(188));return r.stateNode.current===r?e:t}function Xm(e){return e=rp(e),e!==null?Zm(e):null}function Zm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Zm(e);if(t!==null)return t;e=e.sibling}return null}var eh=Wt.unstable_scheduleCallback,Gd=Wt.unstable_cancelCallback,sp=Wt.unstable_shouldYield,np=Wt.unstable_requestPaint,et=Wt.unstable_now,ip=Wt.unstable_getCurrentPriorityLevel,Lc=Wt.unstable_ImmediatePriority,th=Wt.unstable_UserBlockingPriority,ka=Wt.unstable_NormalPriority,ap=Wt.unstable_LowPriority,rh=Wt.unstable_IdlePriority,tl=null,kr=null;function lp(e){if(kr&&typeof kr.onCommitFiberRoot=="function")try{kr.onCommitFiberRoot(tl,e,void 0,(e.current.flags&128)===128)}catch{}}var mr=Math.clz32?Math.clz32:dp,op=Math.log,cp=Math.LN2;function dp(e){return e>>>=0,e===0?32:31-(op(e)/cp|0)|0}var Bi=64,qi=4194304;function Bn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ja(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~i;o!==0?n=Bn(o):(a&=l,a!==0&&(n=Bn(a)))}else l=r&~i,l!==0?n=Bn(l):a!==0&&(n=Bn(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-mr(t),i=1<<r,n|=e[r],t&=~i;return n}function up(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mp(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-mr(a),o=1<<l,c=i[l];c===-1?(!(o&r)||o&n)&&(i[l]=up(o,t)):c<=t&&(e.expiredLanes|=o),a&=~o}}function Ao(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function sh(){var e=Bi;return Bi<<=1,!(Bi&4194240)&&(Bi=64),e}function Il(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ni(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-mr(t),e[t]=r}function hp(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-mr(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}function Oc(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-mr(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var $e=0;function nh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ih,Mc,ah,lh,oh,Do=!1,Gi=[],Jr=null,Xr=null,Zr=null,oi=new Map,ci=new Map,Gr=[],fp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hd(e,t){switch(e){case"focusin":case"focusout":Jr=null;break;case"dragenter":case"dragleave":Xr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":oi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ci.delete(t.pointerId)}}function Dn(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=zi(t),t!==null&&Mc(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function pp(e,t,r,n,i){switch(t){case"focusin":return Jr=Dn(Jr,e,t,r,n,i),!0;case"dragenter":return Xr=Dn(Xr,e,t,r,n,i),!0;case"mouseover":return Zr=Dn(Zr,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return oi.set(a,Dn(oi.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,ci.set(a,Dn(ci.get(a)||null,e,t,r,n,i)),!0}return!1}function ch(e){var t=vs(e.target);if(t!==null){var r=As(t);if(r!==null){if(t=r.tag,t===13){if(t=Jm(r),t!==null){e.blockedOn=t,oh(e.priority,function(){ah(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function oa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Ro(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Eo=n,r.target.dispatchEvent(n),Eo=null}else return t=zi(r),t!==null&&Mc(t),e.blockedOn=r,!1;t.shift()}return!0}function Wd(e,t,r){oa(e)&&r.delete(t)}function gp(){Do=!1,Jr!==null&&oa(Jr)&&(Jr=null),Xr!==null&&oa(Xr)&&(Xr=null),Zr!==null&&oa(Zr)&&(Zr=null),oi.forEach(Wd),ci.forEach(Wd)}function Rn(e,t){e.blockedOn===t&&(e.blockedOn=null,Do||(Do=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,gp)))}function di(e){function t(i){return Rn(i,e)}if(0<Gi.length){Rn(Gi[0],e);for(var r=1;r<Gi.length;r++){var n=Gi[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Jr!==null&&Rn(Jr,e),Xr!==null&&Rn(Xr,e),Zr!==null&&Rn(Zr,e),oi.forEach(t),ci.forEach(t),r=0;r<Gr.length;r++)n=Gr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Gr.length&&(r=Gr[0],r.blockedOn===null);)ch(r),r.blockedOn===null&&Gr.shift()}var cn=Or.ReactCurrentBatchConfig,_a=!0;function xp(e,t,r,n){var i=$e,a=cn.transition;cn.transition=null;try{$e=1,Uc(e,t,r,n)}finally{$e=i,cn.transition=a}}function yp(e,t,r,n){var i=$e,a=cn.transition;cn.transition=null;try{$e=4,Uc(e,t,r,n)}finally{$e=i,cn.transition=a}}function Uc(e,t,r,n){if(_a){var i=Ro(e,t,r,n);if(i===null)Wl(e,t,n,Na,r),Hd(e,n);else if(pp(i,e,t,r,n))n.stopPropagation();else if(Hd(e,n),t&4&&-1<fp.indexOf(e)){for(;i!==null;){var a=zi(i);if(a!==null&&ih(a),a=Ro(e,t,r,n),a===null&&Wl(e,t,n,Na,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else Wl(e,t,n,null,r)}}var Na=null;function Ro(e,t,r,n){if(Na=null,e=Ic(n),e=vs(e),e!==null)if(t=As(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Jm(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Na=e,null}function dh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ip()){case Lc:return 1;case th:return 4;case ka:case ap:return 16;case rh:return 536870912;default:return 16}default:return 16}}var Vr=null,Fc=null,ca=null;function uh(){if(ca)return ca;var e,t=Fc,r=t.length,n,i="value"in Vr?Vr.value:Vr.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var l=r-e;for(n=1;n<=l&&t[r-n]===i[a-n];n++);return ca=i.slice(e,1<n?1-n:void 0)}function da(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hi(){return!0}function Vd(){return!1}function Kt(e){function t(r,n,i,a,l){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Hi:Vd,this.isPropagationStopped=Vd,this}return Ke(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Hi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Hi)},persist:function(){},isPersistent:Hi}),t}var _n={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bc=Kt(_n),Si=Ke({},_n,{view:0,detail:0}),vp=Kt(Si),Ll,Ol,$n,rl=Ke({},Si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$n&&($n&&e.type==="mousemove"?(Ll=e.screenX-$n.screenX,Ol=e.screenY-$n.screenY):Ol=Ll=0,$n=e),Ll)},movementY:function(e){return"movementY"in e?e.movementY:Ol}}),Kd=Kt(rl),bp=Ke({},rl,{dataTransfer:0}),wp=Kt(bp),kp=Ke({},Si,{relatedTarget:0}),Ml=Kt(kp),jp=Ke({},_n,{animationName:0,elapsedTime:0,pseudoElement:0}),_p=Kt(jp),Np=Ke({},_n,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sp=Kt(Np),zp=Ke({},_n,{data:0}),Yd=Kt(zp),Ep={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Pp[e])?!!t[e]:!1}function qc(){return Tp}var Ap=Ke({},Si,{key:function(e){if(e.key){var t=Ep[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=da(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Cp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qc,charCode:function(e){return e.type==="keypress"?da(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?da(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Dp=Kt(Ap),Rp=Ke({},rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qd=Kt(Rp),$p=Ke({},Si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qc}),Ip=Kt($p),Lp=Ke({},_n,{propertyName:0,elapsedTime:0,pseudoElement:0}),Op=Kt(Lp),Mp=Ke({},rl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Up=Kt(Mp),Fp=[9,13,27,32],Gc=Rr&&"CompositionEvent"in window,Vn=null;Rr&&"documentMode"in document&&(Vn=document.documentMode);var Bp=Rr&&"TextEvent"in window&&!Vn,mh=Rr&&(!Gc||Vn&&8<Vn&&11>=Vn),Jd=" ",Xd=!1;function hh(e,t){switch(e){case"keyup":return Fp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ks=!1;function qp(e,t){switch(e){case"compositionend":return fh(t);case"keypress":return t.which!==32?null:(Xd=!0,Jd);case"textInput":return e=t.data,e===Jd&&Xd?null:e;default:return null}}function Gp(e,t){if(Ks)return e==="compositionend"||!Gc&&hh(e,t)?(e=uh(),ca=Fc=Vr=null,Ks=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mh&&t.locale!=="ko"?null:t.data;default:return null}}var Hp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Hp[e.type]:t==="textarea"}function ph(e,t,r,n){Wm(n),t=Sa(t,"onChange"),0<t.length&&(r=new Bc("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Kn=null,ui=null;function Wp(e){Sh(e,0)}function sl(e){var t=Js(e);if(Mm(t))return e}function Vp(e,t){if(e==="change")return t}var gh=!1;if(Rr){var Ul;if(Rr){var Fl="oninput"in document;if(!Fl){var eu=document.createElement("div");eu.setAttribute("oninput","return;"),Fl=typeof eu.oninput=="function"}Ul=Fl}else Ul=!1;gh=Ul&&(!document.documentMode||9<document.documentMode)}function tu(){Kn&&(Kn.detachEvent("onpropertychange",xh),ui=Kn=null)}function xh(e){if(e.propertyName==="value"&&sl(ui)){var t=[];ph(t,ui,e,Ic(e)),Qm(Wp,t)}}function Kp(e,t,r){e==="focusin"?(tu(),Kn=t,ui=r,Kn.attachEvent("onpropertychange",xh)):e==="focusout"&&tu()}function Yp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sl(ui)}function Qp(e,t){if(e==="click")return sl(t)}function Jp(e,t){if(e==="input"||e==="change")return sl(t)}function Xp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fr=typeof Object.is=="function"?Object.is:Xp;function mi(e,t){if(fr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!go.call(t,i)||!fr(e[i],t[i]))return!1}return!0}function ru(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function su(e,t){var r=ru(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ru(r)}}function yh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?yh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vh(){for(var e=window,t=va();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=va(e.document)}return t}function Hc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Zp(e){var t=vh(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&yh(r.ownerDocument.documentElement,r)){if(n!==null&&Hc(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=su(r,a);var l=su(r,n);i&&l&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var eg=Rr&&"documentMode"in document&&11>=document.documentMode,Ys=null,$o=null,Yn=null,Io=!1;function nu(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Io||Ys==null||Ys!==va(n)||(n=Ys,"selectionStart"in n&&Hc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Yn&&mi(Yn,n)||(Yn=n,n=Sa($o,"onSelect"),0<n.length&&(t=new Bc("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ys)))}function Wi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Qs={animationend:Wi("Animation","AnimationEnd"),animationiteration:Wi("Animation","AnimationIteration"),animationstart:Wi("Animation","AnimationStart"),transitionend:Wi("Transition","TransitionEnd")},Bl={},bh={};Rr&&(bh=document.createElement("div").style,"AnimationEvent"in window||(delete Qs.animationend.animation,delete Qs.animationiteration.animation,delete Qs.animationstart.animation),"TransitionEvent"in window||delete Qs.transitionend.transition);function nl(e){if(Bl[e])return Bl[e];if(!Qs[e])return e;var t=Qs[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in bh)return Bl[e]=t[r];return e}var wh=nl("animationend"),kh=nl("animationiteration"),jh=nl("animationstart"),_h=nl("transitionend"),Nh=new Map,iu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ls(e,t){Nh.set(e,t),Ts(t,[e])}for(var ql=0;ql<iu.length;ql++){var Gl=iu[ql],tg=Gl.toLowerCase(),rg=Gl[0].toUpperCase()+Gl.slice(1);ls(tg,"on"+rg)}ls(wh,"onAnimationEnd");ls(kh,"onAnimationIteration");ls(jh,"onAnimationStart");ls("dblclick","onDoubleClick");ls("focusin","onFocus");ls("focusout","onBlur");ls(_h,"onTransitionEnd");hn("onMouseEnter",["mouseout","mouseover"]);hn("onMouseLeave",["mouseout","mouseover"]);hn("onPointerEnter",["pointerout","pointerover"]);hn("onPointerLeave",["pointerout","pointerover"]);Ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sg=new Set("cancel close invalid load scroll toggle".split(" ").concat(qn));function au(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,tp(n,t,void 0,e),e.currentTarget=null}function Sh(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var l=n.length-1;0<=l;l--){var o=n[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==a&&i.isPropagationStopped())break e;au(i,o,d),a=c}else for(l=0;l<n.length;l++){if(o=n[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==a&&i.isPropagationStopped())break e;au(i,o,d),a=c}}}if(wa)throw e=To,wa=!1,To=null,e}function Ue(e,t){var r=t[Fo];r===void 0&&(r=t[Fo]=new Set);var n=e+"__bubble";r.has(n)||(zh(t,e,2,!1),r.add(n))}function Hl(e,t,r){var n=0;t&&(n|=4),zh(r,e,n,t)}var Vi="_reactListening"+Math.random().toString(36).slice(2);function hi(e){if(!e[Vi]){e[Vi]=!0,Rm.forEach(function(r){r!=="selectionchange"&&(sg.has(r)||Hl(r,!1,e),Hl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Vi]||(t[Vi]=!0,Hl("selectionchange",!1,t))}}function zh(e,t,r,n){switch(dh(t)){case 1:var i=xp;break;case 4:i=yp;break;default:i=Uc}r=i.bind(null,t,r,e),i=void 0,!Po||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Wl(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;l=l.return}for(;o!==null;){if(l=vs(o),l===null)return;if(c=l.tag,c===5||c===6){n=a=l;continue e}o=o.parentNode}}n=n.return}Qm(function(){var d=a,u=Ic(r),m=[];e:{var f=Nh.get(e);if(f!==void 0){var p=Bc,b=e;switch(e){case"keypress":if(da(r)===0)break e;case"keydown":case"keyup":p=Dp;break;case"focusin":b="focus",p=Ml;break;case"focusout":b="blur",p=Ml;break;case"beforeblur":case"afterblur":p=Ml;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Kd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=wp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Ip;break;case wh:case kh:case jh:p=_p;break;case _h:p=Op;break;case"scroll":p=vp;break;case"wheel":p=Up;break;case"copy":case"cut":case"paste":p=Sp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Qd}var j=(t&4)!==0,S=!j&&e==="scroll",y=j?f!==null?f+"Capture":null:f;j=[];for(var h=d,g;h!==null;){g=h;var _=g.stateNode;if(g.tag===5&&_!==null&&(g=_,y!==null&&(_=li(h,y),_!=null&&j.push(fi(h,_,g)))),S)break;h=h.return}0<j.length&&(f=new p(f,b,null,r,u),m.push({event:f,listeners:j}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&r!==Eo&&(b=r.relatedTarget||r.fromElement)&&(vs(b)||b[$r]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(b=r.relatedTarget||r.toElement,p=d,b=b?vs(b):null,b!==null&&(S=As(b),b!==S||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=d),p!==b)){if(j=Kd,_="onMouseLeave",y="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(j=Qd,_="onPointerLeave",y="onPointerEnter",h="pointer"),S=p==null?f:Js(p),g=b==null?f:Js(b),f=new j(_,h+"leave",p,r,u),f.target=S,f.relatedTarget=g,_=null,vs(u)===d&&(j=new j(y,h+"enter",b,r,u),j.target=g,j.relatedTarget=S,_=j),S=_,p&&b)t:{for(j=p,y=b,h=0,g=j;g;g=Is(g))h++;for(g=0,_=y;_;_=Is(_))g++;for(;0<h-g;)j=Is(j),h--;for(;0<g-h;)y=Is(y),g--;for(;h--;){if(j===y||y!==null&&j===y.alternate)break t;j=Is(j),y=Is(y)}j=null}else j=null;p!==null&&lu(m,f,p,j,!1),b!==null&&S!==null&&lu(m,S,b,j,!0)}}e:{if(f=d?Js(d):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var $=Vp;else if(Zd(f))if(gh)$=Jp;else{$=Yp;var A=Kp}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&($=Qp);if($&&($=$(e,d))){ph(m,$,r,u);break e}A&&A(e,f,d),e==="focusout"&&(A=f._wrapperState)&&A.controlled&&f.type==="number"&&jo(f,"number",f.value)}switch(A=d?Js(d):window,e){case"focusin":(Zd(A)||A.contentEditable==="true")&&(Ys=A,$o=d,Yn=null);break;case"focusout":Yn=$o=Ys=null;break;case"mousedown":Io=!0;break;case"contextmenu":case"mouseup":case"dragend":Io=!1,nu(m,r,u);break;case"selectionchange":if(eg)break;case"keydown":case"keyup":nu(m,r,u)}var M;if(Gc)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Ks?hh(e,r)&&(I="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(mh&&r.locale!=="ko"&&(Ks||I!=="onCompositionStart"?I==="onCompositionEnd"&&Ks&&(M=uh()):(Vr=u,Fc="value"in Vr?Vr.value:Vr.textContent,Ks=!0)),A=Sa(d,I),0<A.length&&(I=new Yd(I,e,null,r,u),m.push({event:I,listeners:A}),M?I.data=M:(M=fh(r),M!==null&&(I.data=M)))),(M=Bp?qp(e,r):Gp(e,r))&&(d=Sa(d,"onBeforeInput"),0<d.length&&(u=new Yd("onBeforeInput","beforeinput",null,r,u),m.push({event:u,listeners:d}),u.data=M))}Sh(m,t)})}function fi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Sa(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=li(e,r),a!=null&&n.unshift(fi(e,a,i)),a=li(e,t),a!=null&&n.push(fi(e,a,i))),e=e.return}return n}function Is(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function lu(e,t,r,n,i){for(var a=t._reactName,l=[];r!==null&&r!==n;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&d!==null&&(o=d,i?(c=li(r,a),c!=null&&l.unshift(fi(r,c,o))):i||(c=li(r,a),c!=null&&l.push(fi(r,c,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var ng=/\r\n?/g,ig=/\u0000|\uFFFD/g;function ou(e){return(typeof e=="string"?e:""+e).replace(ng,`
`).replace(ig,"")}function Ki(e,t,r){if(t=ou(t),ou(e)!==t&&r)throw Error(Q(425))}function za(){}var Lo=null,Oo=null;function Mo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Uo=typeof setTimeout=="function"?setTimeout:void 0,ag=typeof clearTimeout=="function"?clearTimeout:void 0,cu=typeof Promise=="function"?Promise:void 0,lg=typeof queueMicrotask=="function"?queueMicrotask:typeof cu<"u"?function(e){return cu.resolve(null).then(e).catch(og)}:Uo;function og(e){setTimeout(function(){throw e})}function Vl(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),di(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);di(t)}function es(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function du(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Nn=Math.random().toString(36).slice(2),br="__reactFiber$"+Nn,pi="__reactProps$"+Nn,$r="__reactContainer$"+Nn,Fo="__reactEvents$"+Nn,cg="__reactListeners$"+Nn,dg="__reactHandles$"+Nn;function vs(e){var t=e[br];if(t)return t;for(var r=e.parentNode;r;){if(t=r[$r]||r[br]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=du(e);e!==null;){if(r=e[br])return r;e=du(e)}return t}e=r,r=e.parentNode}return null}function zi(e){return e=e[br]||e[$r],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Js(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Q(33))}function il(e){return e[pi]||null}var Bo=[],Xs=-1;function os(e){return{current:e}}function Fe(e){0>Xs||(e.current=Bo[Xs],Bo[Xs]=null,Xs--)}function Me(e,t){Xs++,Bo[Xs]=e.current,e.current=t}var as={},Pt=os(as),Ut=os(!1),Ns=as;function fn(e,t){var r=e.type.contextTypes;if(!r)return as;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ft(e){return e=e.childContextTypes,e!=null}function Ea(){Fe(Ut),Fe(Pt)}function uu(e,t,r){if(Pt.current!==as)throw Error(Q(168));Me(Pt,t),Me(Ut,r)}function Eh(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(Q(108,Kf(e)||"Unknown",i));return Ke({},r,n)}function Ca(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||as,Ns=Pt.current,Me(Pt,e),Me(Ut,Ut.current),!0}function mu(e,t,r){var n=e.stateNode;if(!n)throw Error(Q(169));r?(e=Eh(e,t,Ns),n.__reactInternalMemoizedMergedChildContext=e,Fe(Ut),Fe(Pt),Me(Pt,e)):Fe(Ut),Me(Ut,r)}var Cr=null,al=!1,Kl=!1;function Ch(e){Cr===null?Cr=[e]:Cr.push(e)}function ug(e){al=!0,Ch(e)}function cs(){if(!Kl&&Cr!==null){Kl=!0;var e=0,t=$e;try{var r=Cr;for($e=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Cr=null,al=!1}catch(i){throw Cr!==null&&(Cr=Cr.slice(e+1)),eh(Lc,cs),i}finally{$e=t,Kl=!1}}return null}var Zs=[],en=0,Pa=null,Ta=0,Yt=[],Qt=0,Ss=null,Pr=1,Tr="";function fs(e,t){Zs[en++]=Ta,Zs[en++]=Pa,Pa=e,Ta=t}function Ph(e,t,r){Yt[Qt++]=Pr,Yt[Qt++]=Tr,Yt[Qt++]=Ss,Ss=e;var n=Pr;e=Tr;var i=32-mr(n)-1;n&=~(1<<i),r+=1;var a=32-mr(t)+i;if(30<a){var l=i-i%5;a=(n&(1<<l)-1).toString(32),n>>=l,i-=l,Pr=1<<32-mr(t)+i|r<<i|n,Tr=a+e}else Pr=1<<a|r<<i|n,Tr=e}function Wc(e){e.return!==null&&(fs(e,1),Ph(e,1,0))}function Vc(e){for(;e===Pa;)Pa=Zs[--en],Zs[en]=null,Ta=Zs[--en],Zs[en]=null;for(;e===Ss;)Ss=Yt[--Qt],Yt[Qt]=null,Tr=Yt[--Qt],Yt[Qt]=null,Pr=Yt[--Qt],Yt[Qt]=null}var Ht=null,Gt=null,qe=!1,cr=null;function Th(e,t){var r=Jt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function hu(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ht=e,Gt=es(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ht=e,Gt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ss!==null?{id:Pr,overflow:Tr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Jt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ht=e,Gt=null,!0):!1;default:return!1}}function qo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Go(e){if(qe){var t=Gt;if(t){var r=t;if(!hu(e,t)){if(qo(e))throw Error(Q(418));t=es(r.nextSibling);var n=Ht;t&&hu(e,t)?Th(n,r):(e.flags=e.flags&-4097|2,qe=!1,Ht=e)}}else{if(qo(e))throw Error(Q(418));e.flags=e.flags&-4097|2,qe=!1,Ht=e}}}function fu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ht=e}function Yi(e){if(e!==Ht)return!1;if(!qe)return fu(e),qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Mo(e.type,e.memoizedProps)),t&&(t=Gt)){if(qo(e))throw Ah(),Error(Q(418));for(;t;)Th(e,t),t=es(t.nextSibling)}if(fu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Gt=es(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Gt=null}}else Gt=Ht?es(e.stateNode.nextSibling):null;return!0}function Ah(){for(var e=Gt;e;)e=es(e.nextSibling)}function pn(){Gt=Ht=null,qe=!1}function Kc(e){cr===null?cr=[e]:cr.push(e)}var mg=Or.ReactCurrentBatchConfig;function In(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Q(309));var n=r.stateNode}if(!n)throw Error(Q(147,e));var i=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var o=i.refs;l===null?delete o[a]:o[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(Q(284));if(!r._owner)throw Error(Q(290,e))}return e}function Qi(e,t){throw e=Object.prototype.toString.call(t),Error(Q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pu(e){var t=e._init;return t(e._payload)}function Dh(e){function t(y,h){if(e){var g=y.deletions;g===null?(y.deletions=[h],y.flags|=16):g.push(h)}}function r(y,h){if(!e)return null;for(;h!==null;)t(y,h),h=h.sibling;return null}function n(y,h){for(y=new Map;h!==null;)h.key!==null?y.set(h.key,h):y.set(h.index,h),h=h.sibling;return y}function i(y,h){return y=ns(y,h),y.index=0,y.sibling=null,y}function a(y,h,g){return y.index=g,e?(g=y.alternate,g!==null?(g=g.index,g<h?(y.flags|=2,h):g):(y.flags|=2,h)):(y.flags|=1048576,h)}function l(y){return e&&y.alternate===null&&(y.flags|=2),y}function o(y,h,g,_){return h===null||h.tag!==6?(h=to(g,y.mode,_),h.return=y,h):(h=i(h,g),h.return=y,h)}function c(y,h,g,_){var $=g.type;return $===Vs?u(y,h,g.props.children,_,g.key):h!==null&&(h.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Br&&pu($)===h.type)?(_=i(h,g.props),_.ref=In(y,h,g),_.return=y,_):(_=xa(g.type,g.key,g.props,null,y.mode,_),_.ref=In(y,h,g),_.return=y,_)}function d(y,h,g,_){return h===null||h.tag!==4||h.stateNode.containerInfo!==g.containerInfo||h.stateNode.implementation!==g.implementation?(h=ro(g,y.mode,_),h.return=y,h):(h=i(h,g.children||[]),h.return=y,h)}function u(y,h,g,_,$){return h===null||h.tag!==7?(h=js(g,y.mode,_,$),h.return=y,h):(h=i(h,g),h.return=y,h)}function m(y,h,g){if(typeof h=="string"&&h!==""||typeof h=="number")return h=to(""+h,y.mode,g),h.return=y,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Mi:return g=xa(h.type,h.key,h.props,null,y.mode,g),g.ref=In(y,null,h),g.return=y,g;case Ws:return h=ro(h,y.mode,g),h.return=y,h;case Br:var _=h._init;return m(y,_(h._payload),g)}if(Fn(h)||Tn(h))return h=js(h,y.mode,g,null),h.return=y,h;Qi(y,h)}return null}function f(y,h,g,_){var $=h!==null?h.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return $!==null?null:o(y,h,""+g,_);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Mi:return g.key===$?c(y,h,g,_):null;case Ws:return g.key===$?d(y,h,g,_):null;case Br:return $=g._init,f(y,h,$(g._payload),_)}if(Fn(g)||Tn(g))return $!==null?null:u(y,h,g,_,null);Qi(y,g)}return null}function p(y,h,g,_,$){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(g)||null,o(h,y,""+_,$);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Mi:return y=y.get(_.key===null?g:_.key)||null,c(h,y,_,$);case Ws:return y=y.get(_.key===null?g:_.key)||null,d(h,y,_,$);case Br:var A=_._init;return p(y,h,g,A(_._payload),$)}if(Fn(_)||Tn(_))return y=y.get(g)||null,u(h,y,_,$,null);Qi(h,_)}return null}function b(y,h,g,_){for(var $=null,A=null,M=h,I=h=0,G=null;M!==null&&I<g.length;I++){M.index>I?(G=M,M=null):G=M.sibling;var K=f(y,M,g[I],_);if(K===null){M===null&&(M=G);break}e&&M&&K.alternate===null&&t(y,M),h=a(K,h,I),A===null?$=K:A.sibling=K,A=K,M=G}if(I===g.length)return r(y,M),qe&&fs(y,I),$;if(M===null){for(;I<g.length;I++)M=m(y,g[I],_),M!==null&&(h=a(M,h,I),A===null?$=M:A.sibling=M,A=M);return qe&&fs(y,I),$}for(M=n(y,M);I<g.length;I++)G=p(M,y,I,g[I],_),G!==null&&(e&&G.alternate!==null&&M.delete(G.key===null?I:G.key),h=a(G,h,I),A===null?$=G:A.sibling=G,A=G);return e&&M.forEach(function(E){return t(y,E)}),qe&&fs(y,I),$}function j(y,h,g,_){var $=Tn(g);if(typeof $!="function")throw Error(Q(150));if(g=$.call(g),g==null)throw Error(Q(151));for(var A=$=null,M=h,I=h=0,G=null,K=g.next();M!==null&&!K.done;I++,K=g.next()){M.index>I?(G=M,M=null):G=M.sibling;var E=f(y,M,K.value,_);if(E===null){M===null&&(M=G);break}e&&M&&E.alternate===null&&t(y,M),h=a(E,h,I),A===null?$=E:A.sibling=E,A=E,M=G}if(K.done)return r(y,M),qe&&fs(y,I),$;if(M===null){for(;!K.done;I++,K=g.next())K=m(y,K.value,_),K!==null&&(h=a(K,h,I),A===null?$=K:A.sibling=K,A=K);return qe&&fs(y,I),$}for(M=n(y,M);!K.done;I++,K=g.next())K=p(M,y,I,K.value,_),K!==null&&(e&&K.alternate!==null&&M.delete(K.key===null?I:K.key),h=a(K,h,I),A===null?$=K:A.sibling=K,A=K);return e&&M.forEach(function(W){return t(y,W)}),qe&&fs(y,I),$}function S(y,h,g,_){if(typeof g=="object"&&g!==null&&g.type===Vs&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Mi:e:{for(var $=g.key,A=h;A!==null;){if(A.key===$){if($=g.type,$===Vs){if(A.tag===7){r(y,A.sibling),h=i(A,g.props.children),h.return=y,y=h;break e}}else if(A.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Br&&pu($)===A.type){r(y,A.sibling),h=i(A,g.props),h.ref=In(y,A,g),h.return=y,y=h;break e}r(y,A);break}else t(y,A);A=A.sibling}g.type===Vs?(h=js(g.props.children,y.mode,_,g.key),h.return=y,y=h):(_=xa(g.type,g.key,g.props,null,y.mode,_),_.ref=In(y,h,g),_.return=y,y=_)}return l(y);case Ws:e:{for(A=g.key;h!==null;){if(h.key===A)if(h.tag===4&&h.stateNode.containerInfo===g.containerInfo&&h.stateNode.implementation===g.implementation){r(y,h.sibling),h=i(h,g.children||[]),h.return=y,y=h;break e}else{r(y,h);break}else t(y,h);h=h.sibling}h=ro(g,y.mode,_),h.return=y,y=h}return l(y);case Br:return A=g._init,S(y,h,A(g._payload),_)}if(Fn(g))return b(y,h,g,_);if(Tn(g))return j(y,h,g,_);Qi(y,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,h!==null&&h.tag===6?(r(y,h.sibling),h=i(h,g),h.return=y,y=h):(r(y,h),h=to(g,y.mode,_),h.return=y,y=h),l(y)):r(y,h)}return S}var gn=Dh(!0),Rh=Dh(!1),Aa=os(null),Da=null,tn=null,Yc=null;function Qc(){Yc=tn=Da=null}function Jc(e){var t=Aa.current;Fe(Aa),e._currentValue=t}function Ho(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function dn(e,t){Da=e,Yc=tn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Mt=!0),e.firstContext=null)}function er(e){var t=e._currentValue;if(Yc!==e)if(e={context:e,memoizedValue:t,next:null},tn===null){if(Da===null)throw Error(Q(308));tn=e,Da.dependencies={lanes:0,firstContext:e}}else tn=tn.next=e;return t}var bs=null;function Xc(e){bs===null?bs=[e]:bs.push(e)}function $h(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,Xc(t)):(r.next=i.next,i.next=r),t.interleaved=r,Ir(e,n)}function Ir(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var qr=!1;function Zc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ih(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ar(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ts(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Te&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Ir(e,r)}return i=n.interleaved,i===null?(t.next=t,Xc(n)):(t.next=i.next,i.next=t),n.interleaved=t,Ir(e,r)}function ua(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Oc(e,r)}}function gu(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=l:a=a.next=l,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ra(e,t,r,n){var i=e.updateQueue;qr=!1;var a=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?a=d:l.next=d,l=c;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(a!==null){var m=i.baseState;l=0,u=d=c=null,o=a;do{var f=o.lane,p=o.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var b=e,j=o;switch(f=t,p=r,j.tag){case 1:if(b=j.payload,typeof b=="function"){m=b.call(p,m,f);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=j.payload,f=typeof b=="function"?b.call(p,m,f):b,f==null)break e;m=Ke({},m,f);break e;case 2:qr=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=p,c=m):u=u.next=p,l|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(c=m),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Es|=l,e.lanes=l,e.memoizedState=m}}function xu(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Q(191,i));i.call(n)}}}var Ei={},jr=os(Ei),gi=os(Ei),xi=os(Ei);function ws(e){if(e===Ei)throw Error(Q(174));return e}function ed(e,t){switch(Me(xi,t),Me(gi,e),Me(jr,Ei),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:No(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=No(t,e)}Fe(jr),Me(jr,t)}function xn(){Fe(jr),Fe(gi),Fe(xi)}function Lh(e){ws(xi.current);var t=ws(jr.current),r=No(t,e.type);t!==r&&(Me(gi,e),Me(jr,r))}function td(e){gi.current===e&&(Fe(jr),Fe(gi))}var We=os(0);function $a(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Yl=[];function rd(){for(var e=0;e<Yl.length;e++)Yl[e]._workInProgressVersionPrimary=null;Yl.length=0}var ma=Or.ReactCurrentDispatcher,Ql=Or.ReactCurrentBatchConfig,zs=0,Ve=null,ct=null,ht=null,Ia=!1,Qn=!1,yi=0,hg=0;function zt(){throw Error(Q(321))}function sd(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!fr(e[r],t[r]))return!1;return!0}function nd(e,t,r,n,i,a){if(zs=a,Ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ma.current=e===null||e.memoizedState===null?xg:yg,e=r(n,i),Qn){a=0;do{if(Qn=!1,yi=0,25<=a)throw Error(Q(301));a+=1,ht=ct=null,t.updateQueue=null,ma.current=vg,e=r(n,i)}while(Qn)}if(ma.current=La,t=ct!==null&&ct.next!==null,zs=0,ht=ct=Ve=null,Ia=!1,t)throw Error(Q(300));return e}function id(){var e=yi!==0;return yi=0,e}function yr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Ve.memoizedState=ht=e:ht=ht.next=e,ht}function tr(){if(ct===null){var e=Ve.alternate;e=e!==null?e.memoizedState:null}else e=ct.next;var t=ht===null?Ve.memoizedState:ht.next;if(t!==null)ht=t,ct=e;else{if(e===null)throw Error(Q(310));ct=e,e={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},ht===null?Ve.memoizedState=ht=e:ht=ht.next=e}return ht}function vi(e,t){return typeof t=="function"?t(e):t}function Jl(e){var t=tr(),r=t.queue;if(r===null)throw Error(Q(311));r.lastRenderedReducer=e;var n=ct,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var l=i.next;i.next=a.next,a.next=l}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var o=l=null,c=null,d=a;do{var u=d.lane;if((zs&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=m,l=n):c=c.next=m,Ve.lanes|=u,Es|=u}d=d.next}while(d!==null&&d!==a);c===null?l=n:c.next=o,fr(n,t.memoizedState)||(Mt=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do a=i.lane,Ve.lanes|=a,Es|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Xl(e){var t=tr(),r=t.queue;if(r===null)throw Error(Q(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var l=i=i.next;do a=e(a,l.action),l=l.next;while(l!==i);fr(a,t.memoizedState)||(Mt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function Oh(){}function Mh(e,t){var r=Ve,n=tr(),i=t(),a=!fr(n.memoizedState,i);if(a&&(n.memoizedState=i,Mt=!0),n=n.queue,ad(Bh.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||ht!==null&&ht.memoizedState.tag&1){if(r.flags|=2048,bi(9,Fh.bind(null,r,n,i,t),void 0,null),ft===null)throw Error(Q(349));zs&30||Uh(r,t,i)}return i}function Uh(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ve.updateQueue,t===null?(t={lastEffect:null,stores:null},Ve.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Fh(e,t,r,n){t.value=r,t.getSnapshot=n,qh(t)&&Gh(e)}function Bh(e,t,r){return r(function(){qh(t)&&Gh(e)})}function qh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!fr(e,r)}catch{return!0}}function Gh(e){var t=Ir(e,1);t!==null&&hr(t,e,1,-1)}function yu(e){var t=yr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:e},t.queue=e,e=e.dispatch=gg.bind(null,Ve,e),[t.memoizedState,e]}function bi(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ve.updateQueue,t===null?(t={lastEffect:null,stores:null},Ve.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Hh(){return tr().memoizedState}function ha(e,t,r,n){var i=yr();Ve.flags|=e,i.memoizedState=bi(1|t,r,void 0,n===void 0?null:n)}function ll(e,t,r,n){var i=tr();n=n===void 0?null:n;var a=void 0;if(ct!==null){var l=ct.memoizedState;if(a=l.destroy,n!==null&&sd(n,l.deps)){i.memoizedState=bi(t,r,a,n);return}}Ve.flags|=e,i.memoizedState=bi(1|t,r,a,n)}function vu(e,t){return ha(8390656,8,e,t)}function ad(e,t){return ll(2048,8,e,t)}function Wh(e,t){return ll(4,2,e,t)}function Vh(e,t){return ll(4,4,e,t)}function Kh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Yh(e,t,r){return r=r!=null?r.concat([e]):null,ll(4,4,Kh.bind(null,t,e),r)}function ld(){}function Qh(e,t){var r=tr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&sd(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Jh(e,t){var r=tr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&sd(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Xh(e,t,r){return zs&21?(fr(r,t)||(r=sh(),Ve.lanes|=r,Es|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Mt=!0),e.memoizedState=r)}function fg(e,t){var r=$e;$e=r!==0&&4>r?r:4,e(!0);var n=Ql.transition;Ql.transition={};try{e(!1),t()}finally{$e=r,Ql.transition=n}}function Zh(){return tr().memoizedState}function pg(e,t,r){var n=ss(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},e0(e))t0(t,r);else if(r=$h(e,t,r,n),r!==null){var i=Dt();hr(r,e,n,i),r0(r,t,n)}}function gg(e,t,r){var n=ss(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(e0(e))t0(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,o=a(l,r);if(i.hasEagerState=!0,i.eagerState=o,fr(o,l)){var c=t.interleaved;c===null?(i.next=i,Xc(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}r=$h(e,t,i,n),r!==null&&(i=Dt(),hr(r,e,n,i),r0(r,t,n))}}function e0(e){var t=e.alternate;return e===Ve||t!==null&&t===Ve}function t0(e,t){Qn=Ia=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function r0(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Oc(e,r)}}var La={readContext:er,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},xg={readContext:er,useCallback:function(e,t){return yr().memoizedState=[e,t===void 0?null:t],e},useContext:er,useEffect:vu,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ha(4194308,4,Kh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ha(4194308,4,e,t)},useInsertionEffect:function(e,t){return ha(4,2,e,t)},useMemo:function(e,t){var r=yr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=yr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=pg.bind(null,Ve,e),[n.memoizedState,e]},useRef:function(e){var t=yr();return e={current:e},t.memoizedState=e},useState:yu,useDebugValue:ld,useDeferredValue:function(e){return yr().memoizedState=e},useTransition:function(){var e=yu(!1),t=e[0];return e=fg.bind(null,e[1]),yr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ve,i=yr();if(qe){if(r===void 0)throw Error(Q(407));r=r()}else{if(r=t(),ft===null)throw Error(Q(349));zs&30||Uh(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,vu(Bh.bind(null,n,a,e),[e]),n.flags|=2048,bi(9,Fh.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=yr(),t=ft.identifierPrefix;if(qe){var r=Tr,n=Pr;r=(n&~(1<<32-mr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=yi++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=hg++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},yg={readContext:er,useCallback:Qh,useContext:er,useEffect:ad,useImperativeHandle:Yh,useInsertionEffect:Wh,useLayoutEffect:Vh,useMemo:Jh,useReducer:Jl,useRef:Hh,useState:function(){return Jl(vi)},useDebugValue:ld,useDeferredValue:function(e){var t=tr();return Xh(t,ct.memoizedState,e)},useTransition:function(){var e=Jl(vi)[0],t=tr().memoizedState;return[e,t]},useMutableSource:Oh,useSyncExternalStore:Mh,useId:Zh,unstable_isNewReconciler:!1},vg={readContext:er,useCallback:Qh,useContext:er,useEffect:ad,useImperativeHandle:Yh,useInsertionEffect:Wh,useLayoutEffect:Vh,useMemo:Jh,useReducer:Xl,useRef:Hh,useState:function(){return Xl(vi)},useDebugValue:ld,useDeferredValue:function(e){var t=tr();return ct===null?t.memoizedState=e:Xh(t,ct.memoizedState,e)},useTransition:function(){var e=Xl(vi)[0],t=tr().memoizedState;return[e,t]},useMutableSource:Oh,useSyncExternalStore:Mh,useId:Zh,unstable_isNewReconciler:!1};function ar(e,t){if(e&&e.defaultProps){t=Ke({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Wo(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ke({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ol={isMounted:function(e){return(e=e._reactInternals)?As(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Dt(),i=ss(e),a=Ar(n,i);a.payload=t,r!=null&&(a.callback=r),t=ts(e,a,i),t!==null&&(hr(t,e,i,n),ua(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Dt(),i=ss(e),a=Ar(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=ts(e,a,i),t!==null&&(hr(t,e,i,n),ua(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Dt(),n=ss(e),i=Ar(r,n);i.tag=2,t!=null&&(i.callback=t),t=ts(e,i,n),t!==null&&(hr(t,e,n,r),ua(t,e,n))}};function bu(e,t,r,n,i,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,l):t.prototype&&t.prototype.isPureReactComponent?!mi(r,n)||!mi(i,a):!0}function s0(e,t,r){var n=!1,i=as,a=t.contextType;return typeof a=="object"&&a!==null?a=er(a):(i=Ft(t)?Ns:Pt.current,n=t.contextTypes,a=(n=n!=null)?fn(e,i):as),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ol,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function wu(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ol.enqueueReplaceState(t,t.state,null)}function Vo(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},Zc(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=er(a):(a=Ft(t)?Ns:Pt.current,i.context=fn(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Wo(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&ol.enqueueReplaceState(i,i.state,null),Ra(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function yn(e,t){try{var r="",n=t;do r+=Vf(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function Zl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ko(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var bg=typeof WeakMap=="function"?WeakMap:Map;function n0(e,t,r){r=Ar(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ma||(Ma=!0,nc=n),Ko(e,t)},r}function i0(e,t,r){r=Ar(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){Ko(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Ko(e,t),typeof n!="function"&&(rs===null?rs=new Set([this]):rs.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function ku(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new bg;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=Rg.bind(null,e,t,r),t.then(e,e))}function ju(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function _u(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ar(-1,1),t.tag=2,ts(r,t,1))),r.lanes|=1),e)}var wg=Or.ReactCurrentOwner,Mt=!1;function At(e,t,r,n){t.child=e===null?Rh(t,null,r,n):gn(t,e.child,r,n)}function Nu(e,t,r,n,i){r=r.render;var a=t.ref;return dn(t,i),n=nd(e,t,r,n,a,i),r=id(),e!==null&&!Mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Lr(e,t,i)):(qe&&r&&Wc(t),t.flags|=1,At(e,t,n,i),t.child)}function Su(e,t,r,n,i){if(e===null){var a=r.type;return typeof a=="function"&&!pd(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,a0(e,t,a,n,i)):(e=xa(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var l=a.memoizedProps;if(r=r.compare,r=r!==null?r:mi,r(l,n)&&e.ref===t.ref)return Lr(e,t,i)}return t.flags|=1,e=ns(a,n),e.ref=t.ref,e.return=t,t.child=e}function a0(e,t,r,n,i){if(e!==null){var a=e.memoizedProps;if(mi(a,n)&&e.ref===t.ref)if(Mt=!1,t.pendingProps=n=a,(e.lanes&i)!==0)e.flags&131072&&(Mt=!0);else return t.lanes=e.lanes,Lr(e,t,i)}return Yo(e,t,r,n,i)}function l0(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(sn,qt),qt|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Me(sn,qt),qt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Me(sn,qt),qt|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,Me(sn,qt),qt|=n;return At(e,t,i,r),t.child}function o0(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Yo(e,t,r,n,i){var a=Ft(r)?Ns:Pt.current;return a=fn(t,a),dn(t,i),r=nd(e,t,r,n,a,i),n=id(),e!==null&&!Mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Lr(e,t,i)):(qe&&n&&Wc(t),t.flags|=1,At(e,t,r,i),t.child)}function zu(e,t,r,n,i){if(Ft(r)){var a=!0;Ca(t)}else a=!1;if(dn(t,i),t.stateNode===null)fa(e,t),s0(t,r,n),Vo(t,r,n,i),n=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=er(d):(d=Ft(r)?Ns:Pt.current,d=fn(t,d));var u=r.getDerivedStateFromProps,m=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||c!==d)&&wu(t,l,n,d),qr=!1;var f=t.memoizedState;l.state=f,Ra(t,n,l,i),c=t.memoizedState,o!==n||f!==c||Ut.current||qr?(typeof u=="function"&&(Wo(t,r,u,n),c=t.memoizedState),(o=qr||bu(t,r,o,n,f,c,d))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),l.props=n,l.state=c,l.context=d,n=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,Ih(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:ar(t.type,o),l.props=d,m=t.pendingProps,f=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=er(c):(c=Ft(r)?Ns:Pt.current,c=fn(t,c));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==m||f!==c)&&wu(t,l,n,c),qr=!1,f=t.memoizedState,l.state=f,Ra(t,n,l,i);var b=t.memoizedState;o!==m||f!==b||Ut.current||qr?(typeof p=="function"&&(Wo(t,r,p,n),b=t.memoizedState),(d=qr||bu(t,r,d,n,f,b,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,b,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,b,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=b),l.props=n,l.state=b,l.context=c,n=d):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Qo(e,t,r,n,a,i)}function Qo(e,t,r,n,i,a){o0(e,t);var l=(t.flags&128)!==0;if(!n&&!l)return i&&mu(t,r,!1),Lr(e,t,a);n=t.stateNode,wg.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&l?(t.child=gn(t,e.child,null,a),t.child=gn(t,null,o,a)):At(e,t,o,a),t.memoizedState=n.state,i&&mu(t,r,!0),t.child}function c0(e){var t=e.stateNode;t.pendingContext?uu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&uu(e,t.context,!1),ed(e,t.containerInfo)}function Eu(e,t,r,n,i){return pn(),Kc(i),t.flags|=256,At(e,t,r,n),t.child}var Jo={dehydrated:null,treeContext:null,retryLane:0};function Xo(e){return{baseLanes:e,cachePool:null,transitions:null}}function d0(e,t,r){var n=t.pendingProps,i=We.current,a=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Me(We,i&1),e===null)return Go(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,e=n.fallback,a?(n=t.mode,a=t.child,l={mode:"hidden",children:l},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=ul(l,n,0,null),e=js(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Xo(r),t.memoizedState=Jo,e):od(t,l));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return kg(e,t,l,n,o,i,r);if(a){a=n.fallback,l=t.mode,i=e.child,o=i.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=ns(i,c),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=ns(o,a):(a=js(a,l,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,l=e.child.memoizedState,l=l===null?Xo(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~r,t.memoizedState=Jo,n}return a=e.child,e=a.sibling,n=ns(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function od(e,t){return t=ul({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ji(e,t,r,n){return n!==null&&Kc(n),gn(t,e.child,null,r),e=od(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kg(e,t,r,n,i,a,l){if(r)return t.flags&256?(t.flags&=-257,n=Zl(Error(Q(422))),Ji(e,t,l,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=ul({mode:"visible",children:n.children},i,0,null),a=js(a,i,l,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&gn(t,e.child,null,l),t.child.memoizedState=Xo(l),t.memoizedState=Jo,a);if(!(t.mode&1))return Ji(e,t,l,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(Q(419)),n=Zl(a,n,void 0),Ji(e,t,l,n)}if(o=(l&e.childLanes)!==0,Mt||o){if(n=ft,n!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|l)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Ir(e,i),hr(n,e,i,-1))}return fd(),n=Zl(Error(Q(421))),Ji(e,t,l,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=$g.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Gt=es(i.nextSibling),Ht=t,qe=!0,cr=null,e!==null&&(Yt[Qt++]=Pr,Yt[Qt++]=Tr,Yt[Qt++]=Ss,Pr=e.id,Tr=e.overflow,Ss=t),t=od(t,n.children),t.flags|=4096,t)}function Cu(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Ho(e.return,t,r)}function eo(e,t,r,n,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function u0(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(At(e,t,n.children,r),n=We.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cu(e,r,t);else if(e.tag===19)Cu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Me(We,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&$a(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),eo(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&$a(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}eo(t,!0,r,null,a);break;case"together":eo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function fa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Lr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Es|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Q(153));if(t.child!==null){for(e=t.child,r=ns(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ns(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function jg(e,t,r){switch(t.tag){case 3:c0(t),pn();break;case 5:Lh(t);break;case 1:Ft(t.type)&&Ca(t);break;case 4:ed(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Me(Aa,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Me(We,We.current&1),t.flags|=128,null):r&t.child.childLanes?d0(e,t,r):(Me(We,We.current&1),e=Lr(e,t,r),e!==null?e.sibling:null);Me(We,We.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return u0(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Me(We,We.current),n)break;return null;case 22:case 23:return t.lanes=0,l0(e,t,r)}return Lr(e,t,r)}var m0,Zo,h0,f0;m0=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Zo=function(){};h0=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,ws(jr.current);var a=null;switch(r){case"input":i=wo(e,i),n=wo(e,n),a=[];break;case"select":i=Ke({},i,{value:void 0}),n=Ke({},n,{value:void 0}),a=[];break;case"textarea":i=_o(e,i),n=_o(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=za)}So(r,n);var l;r=null;for(d in i)if(!n.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var o=i[d];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ii.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var c=n[d];if(o=i!=null?i[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(a||(a=[]),a.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ii.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ue("scroll",e),a||o===c||(a=[])):(a=a||[]).push(d,c))}r&&(a=a||[]).push("style",r);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};f0=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ln(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Et(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function _g(e,t,r){var n=t.pendingProps;switch(Vc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(t),null;case 1:return Ft(t.type)&&Ea(),Et(t),null;case 3:return n=t.stateNode,xn(),Fe(Ut),Fe(Pt),rd(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Yi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,cr!==null&&(lc(cr),cr=null))),Zo(e,t),Et(t),null;case 5:td(t);var i=ws(xi.current);if(r=t.type,e!==null&&t.stateNode!=null)h0(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Q(166));return Et(t),null}if(e=ws(jr.current),Yi(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[br]=t,n[pi]=a,e=(t.mode&1)!==0,r){case"dialog":Ue("cancel",n),Ue("close",n);break;case"iframe":case"object":case"embed":Ue("load",n);break;case"video":case"audio":for(i=0;i<qn.length;i++)Ue(qn[i],n);break;case"source":Ue("error",n);break;case"img":case"image":case"link":Ue("error",n),Ue("load",n);break;case"details":Ue("toggle",n);break;case"input":Od(n,a),Ue("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Ue("invalid",n);break;case"textarea":Ud(n,a),Ue("invalid",n)}So(r,a),i=null;for(var l in a)if(a.hasOwnProperty(l)){var o=a[l];l==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&Ki(n.textContent,o,e),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Ki(n.textContent,o,e),i=["children",""+o]):ii.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Ue("scroll",n)}switch(r){case"input":Ui(n),Md(n,a,!0);break;case"textarea":Ui(n),Fd(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=za)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Bm(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),r==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[br]=t,e[pi]=n,m0(e,t,!1,!1),t.stateNode=e;e:{switch(l=zo(r,n),r){case"dialog":Ue("cancel",e),Ue("close",e),i=n;break;case"iframe":case"object":case"embed":Ue("load",e),i=n;break;case"video":case"audio":for(i=0;i<qn.length;i++)Ue(qn[i],e);i=n;break;case"source":Ue("error",e),i=n;break;case"img":case"image":case"link":Ue("error",e),Ue("load",e),i=n;break;case"details":Ue("toggle",e),i=n;break;case"input":Od(e,n),i=wo(e,n),Ue("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Ke({},n,{value:void 0}),Ue("invalid",e);break;case"textarea":Ud(e,n),i=_o(e,n),Ue("invalid",e);break;default:i=n}So(r,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?Hm(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&qm(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ai(e,c):typeof c=="number"&&ai(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ii.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Ue("scroll",e):c!=null&&Ac(e,a,c,l))}switch(r){case"input":Ui(e),Md(e,n,!1);break;case"textarea":Ui(e),Fd(e);break;case"option":n.value!=null&&e.setAttribute("value",""+is(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?an(e,!!n.multiple,a,!1):n.defaultValue!=null&&an(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=za)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Et(t),null;case 6:if(e&&t.stateNode!=null)f0(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Q(166));if(r=ws(xi.current),ws(jr.current),Yi(t)){if(n=t.stateNode,r=t.memoizedProps,n[br]=t,(a=n.nodeValue!==r)&&(e=Ht,e!==null))switch(e.tag){case 3:Ki(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ki(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[br]=t,t.stateNode=n}return Et(t),null;case 13:if(Fe(We),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(qe&&Gt!==null&&t.mode&1&&!(t.flags&128))Ah(),pn(),t.flags|=98560,a=!1;else if(a=Yi(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(Q(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Q(317));a[br]=t}else pn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Et(t),a=!1}else cr!==null&&(lc(cr),cr=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||We.current&1?dt===0&&(dt=3):fd())),t.updateQueue!==null&&(t.flags|=4),Et(t),null);case 4:return xn(),Zo(e,t),e===null&&hi(t.stateNode.containerInfo),Et(t),null;case 10:return Jc(t.type._context),Et(t),null;case 17:return Ft(t.type)&&Ea(),Et(t),null;case 19:if(Fe(We),a=t.memoizedState,a===null)return Et(t),null;if(n=(t.flags&128)!==0,l=a.rendering,l===null)if(n)Ln(a,!1);else{if(dt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=$a(e),l!==null){for(t.flags|=128,Ln(a,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Me(We,We.current&1|2),t.child}e=e.sibling}a.tail!==null&&et()>vn&&(t.flags|=128,n=!0,Ln(a,!1),t.lanes=4194304)}else{if(!n)if(e=$a(l),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ln(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!qe)return Et(t),null}else 2*et()-a.renderingStartTime>vn&&r!==1073741824&&(t.flags|=128,n=!0,Ln(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(r=a.last,r!==null?r.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=et(),t.sibling=null,r=We.current,Me(We,n?r&1|2:r&1),t):(Et(t),null);case 22:case 23:return hd(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?qt&1073741824&&(Et(t),t.subtreeFlags&6&&(t.flags|=8192)):Et(t),null;case 24:return null;case 25:return null}throw Error(Q(156,t.tag))}function Ng(e,t){switch(Vc(t),t.tag){case 1:return Ft(t.type)&&Ea(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xn(),Fe(Ut),Fe(Pt),rd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return td(t),null;case 13:if(Fe(We),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Q(340));pn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Fe(We),null;case 4:return xn(),null;case 10:return Jc(t.type._context),null;case 22:case 23:return hd(),null;case 24:return null;default:return null}}var Xi=!1,Ct=!1,Sg=typeof WeakSet=="function"?WeakSet:Set,ce=null;function rn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Qe(e,t,n)}else r.current=null}function ec(e,t,r){try{r()}catch(n){Qe(e,t,n)}}var Pu=!1;function zg(e,t){if(Lo=_a,e=vh(),Hc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,d=0,u=0,m=e,f=null;t:for(;;){for(var p;m!==r||i!==0&&m.nodeType!==3||(o=l+i),m!==a||n!==0&&m.nodeType!==3||(c=l+n),m.nodeType===3&&(l+=m.nodeValue.length),(p=m.firstChild)!==null;)f=m,m=p;for(;;){if(m===e)break t;if(f===r&&++d===i&&(o=l),f===a&&++u===n&&(c=l),(p=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=p}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Oo={focusedElem:e,selectionRange:r},_a=!1,ce=t;ce!==null;)if(t=ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ce=e;else for(;ce!==null;){t=ce;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var j=b.memoizedProps,S=b.memoizedState,y=t.stateNode,h=y.getSnapshotBeforeUpdate(t.elementType===t.type?j:ar(t.type,j),S);y.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(_){Qe(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,ce=e;break}ce=t.return}return b=Pu,Pu=!1,b}function Jn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&ec(t,r,a)}i=i.next}while(i!==n)}}function cl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function tc(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function p0(e){var t=e.alternate;t!==null&&(e.alternate=null,p0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[br],delete t[pi],delete t[Fo],delete t[cg],delete t[dg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function g0(e){return e.tag===5||e.tag===3||e.tag===4}function Tu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||g0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rc(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=za));else if(n!==4&&(e=e.child,e!==null))for(rc(e,t,r),e=e.sibling;e!==null;)rc(e,t,r),e=e.sibling}function sc(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(sc(e,t,r),e=e.sibling;e!==null;)sc(e,t,r),e=e.sibling}var vt=null,lr=!1;function Mr(e,t,r){for(r=r.child;r!==null;)x0(e,t,r),r=r.sibling}function x0(e,t,r){if(kr&&typeof kr.onCommitFiberUnmount=="function")try{kr.onCommitFiberUnmount(tl,r)}catch{}switch(r.tag){case 5:Ct||rn(r,t);case 6:var n=vt,i=lr;vt=null,Mr(e,t,r),vt=n,lr=i,vt!==null&&(lr?(e=vt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):vt.removeChild(r.stateNode));break;case 18:vt!==null&&(lr?(e=vt,r=r.stateNode,e.nodeType===8?Vl(e.parentNode,r):e.nodeType===1&&Vl(e,r),di(e)):Vl(vt,r.stateNode));break;case 4:n=vt,i=lr,vt=r.stateNode.containerInfo,lr=!0,Mr(e,t,r),vt=n,lr=i;break;case 0:case 11:case 14:case 15:if(!Ct&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&ec(r,t,l),i=i.next}while(i!==n)}Mr(e,t,r);break;case 1:if(!Ct&&(rn(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Qe(r,t,o)}Mr(e,t,r);break;case 21:Mr(e,t,r);break;case 22:r.mode&1?(Ct=(n=Ct)||r.memoizedState!==null,Mr(e,t,r),Ct=n):Mr(e,t,r);break;default:Mr(e,t,r)}}function Au(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Sg),t.forEach(function(n){var i=Ig.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function nr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:vt=o.stateNode,lr=!1;break e;case 3:vt=o.stateNode.containerInfo,lr=!0;break e;case 4:vt=o.stateNode.containerInfo,lr=!0;break e}o=o.return}if(vt===null)throw Error(Q(160));x0(a,l,i),vt=null,lr=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){Qe(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)y0(t,e),t=t.sibling}function y0(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(nr(t,e),xr(e),n&4){try{Jn(3,e,e.return),cl(3,e)}catch(j){Qe(e,e.return,j)}try{Jn(5,e,e.return)}catch(j){Qe(e,e.return,j)}}break;case 1:nr(t,e),xr(e),n&512&&r!==null&&rn(r,r.return);break;case 5:if(nr(t,e),xr(e),n&512&&r!==null&&rn(r,r.return),e.flags&32){var i=e.stateNode;try{ai(i,"")}catch(j){Qe(e,e.return,j)}}if(n&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,l=r!==null?r.memoizedProps:a,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&Um(i,a),zo(o,l);var d=zo(o,a);for(l=0;l<c.length;l+=2){var u=c[l],m=c[l+1];u==="style"?Hm(i,m):u==="dangerouslySetInnerHTML"?qm(i,m):u==="children"?ai(i,m):Ac(i,u,m,d)}switch(o){case"input":ko(i,a);break;case"textarea":Fm(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?an(i,!!a.multiple,p,!1):f!==!!a.multiple&&(a.defaultValue!=null?an(i,!!a.multiple,a.defaultValue,!0):an(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(j){Qe(e,e.return,j)}}break;case 6:if(nr(t,e),xr(e),n&4){if(e.stateNode===null)throw Error(Q(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(j){Qe(e,e.return,j)}}break;case 3:if(nr(t,e),xr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{di(t.containerInfo)}catch(j){Qe(e,e.return,j)}break;case 4:nr(t,e),xr(e);break;case 13:nr(t,e),xr(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(ud=et())),n&4&&Au(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Ct=(d=Ct)||u,nr(t,e),Ct=d):nr(t,e),xr(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(ce=e,u=e.child;u!==null;){for(m=ce=u;ce!==null;){switch(f=ce,p=f.child,f.tag){case 0:case 11:case 14:case 15:Jn(4,f,f.return);break;case 1:rn(f,f.return);var b=f.stateNode;if(typeof b.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(j){Qe(n,r,j)}}break;case 5:rn(f,f.return);break;case 22:if(f.memoizedState!==null){Ru(m);continue}}p!==null?(p.return=f,ce=p):Ru(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{i=m.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=m.stateNode,c=m.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Gm("display",l))}catch(j){Qe(e,e.return,j)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(j){Qe(e,e.return,j)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:nr(t,e),xr(e),n&4&&Au(e);break;case 21:break;default:nr(t,e),xr(e)}}function xr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(g0(r)){var n=r;break e}r=r.return}throw Error(Q(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(ai(i,""),n.flags&=-33);var a=Tu(e);sc(e,a,i);break;case 3:case 4:var l=n.stateNode.containerInfo,o=Tu(e);rc(e,o,l);break;default:throw Error(Q(161))}}catch(c){Qe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Eg(e,t,r){ce=e,v0(e)}function v0(e,t,r){for(var n=(e.mode&1)!==0;ce!==null;){var i=ce,a=i.child;if(i.tag===22&&n){var l=i.memoizedState!==null||Xi;if(!l){var o=i.alternate,c=o!==null&&o.memoizedState!==null||Ct;o=Xi;var d=Ct;if(Xi=l,(Ct=c)&&!d)for(ce=i;ce!==null;)l=ce,c=l.child,l.tag===22&&l.memoizedState!==null?$u(i):c!==null?(c.return=l,ce=c):$u(i);for(;a!==null;)ce=a,v0(a),a=a.sibling;ce=i,Xi=o,Ct=d}Du(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ce=a):Du(e)}}function Du(e){for(;ce!==null;){var t=ce;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ct||cl(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ct)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:ar(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&xu(t,a,n);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}xu(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&di(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Ct||t.flags&512&&tc(t)}catch(f){Qe(t,t.return,f)}}if(t===e){ce=null;break}if(r=t.sibling,r!==null){r.return=t.return,ce=r;break}ce=t.return}}function Ru(e){for(;ce!==null;){var t=ce;if(t===e){ce=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ce=r;break}ce=t.return}}function $u(e){for(;ce!==null;){var t=ce;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{cl(4,t)}catch(c){Qe(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(c){Qe(t,i,c)}}var a=t.return;try{tc(t)}catch(c){Qe(t,a,c)}break;case 5:var l=t.return;try{tc(t)}catch(c){Qe(t,l,c)}}}catch(c){Qe(t,t.return,c)}if(t===e){ce=null;break}var o=t.sibling;if(o!==null){o.return=t.return,ce=o;break}ce=t.return}}var Cg=Math.ceil,Oa=Or.ReactCurrentDispatcher,cd=Or.ReactCurrentOwner,Xt=Or.ReactCurrentBatchConfig,Te=0,ft=null,it=null,kt=0,qt=0,sn=os(0),dt=0,wi=null,Es=0,dl=0,dd=0,Xn=null,Lt=null,ud=0,vn=1/0,zr=null,Ma=!1,nc=null,rs=null,Zi=!1,Kr=null,Ua=0,Zn=0,ic=null,pa=-1,ga=0;function Dt(){return Te&6?et():pa!==-1?pa:pa=et()}function ss(e){return e.mode&1?Te&2&&kt!==0?kt&-kt:mg.transition!==null?(ga===0&&(ga=sh()),ga):(e=$e,e!==0||(e=window.event,e=e===void 0?16:dh(e.type)),e):1}function hr(e,t,r,n){if(50<Zn)throw Zn=0,ic=null,Error(Q(185));Ni(e,r,n),(!(Te&2)||e!==ft)&&(e===ft&&(!(Te&2)&&(dl|=r),dt===4&&Hr(e,kt)),Bt(e,n),r===1&&Te===0&&!(t.mode&1)&&(vn=et()+500,al&&cs()))}function Bt(e,t){var r=e.callbackNode;mp(e,t);var n=ja(e,e===ft?kt:0);if(n===0)r!==null&&Gd(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Gd(r),t===1)e.tag===0?ug(Iu.bind(null,e)):Ch(Iu.bind(null,e)),lg(function(){!(Te&6)&&cs()}),r=null;else{switch(nh(n)){case 1:r=Lc;break;case 4:r=th;break;case 16:r=ka;break;case 536870912:r=rh;break;default:r=ka}r=z0(r,b0.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function b0(e,t){if(pa=-1,ga=0,Te&6)throw Error(Q(327));var r=e.callbackNode;if(un()&&e.callbackNode!==r)return null;var n=ja(e,e===ft?kt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Fa(e,n);else{t=n;var i=Te;Te|=2;var a=k0();(ft!==e||kt!==t)&&(zr=null,vn=et()+500,ks(e,t));do try{Ag();break}catch(o){w0(e,o)}while(!0);Qc(),Oa.current=a,Te=i,it!==null?t=0:(ft=null,kt=0,t=dt)}if(t!==0){if(t===2&&(i=Ao(e),i!==0&&(n=i,t=ac(e,i))),t===1)throw r=wi,ks(e,0),Hr(e,n),Bt(e,et()),r;if(t===6)Hr(e,n);else{if(i=e.current.alternate,!(n&30)&&!Pg(i)&&(t=Fa(e,n),t===2&&(a=Ao(e),a!==0&&(n=a,t=ac(e,a))),t===1))throw r=wi,ks(e,0),Hr(e,n),Bt(e,et()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(Q(345));case 2:ps(e,Lt,zr);break;case 3:if(Hr(e,n),(n&130023424)===n&&(t=ud+500-et(),10<t)){if(ja(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Dt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Uo(ps.bind(null,e,Lt,zr),t);break}ps(e,Lt,zr);break;case 4:if(Hr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var l=31-mr(n);a=1<<l,l=t[l],l>i&&(i=l),n&=~a}if(n=i,n=et()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Cg(n/1960))-n,10<n){e.timeoutHandle=Uo(ps.bind(null,e,Lt,zr),n);break}ps(e,Lt,zr);break;case 5:ps(e,Lt,zr);break;default:throw Error(Q(329))}}}return Bt(e,et()),e.callbackNode===r?b0.bind(null,e):null}function ac(e,t){var r=Xn;return e.current.memoizedState.isDehydrated&&(ks(e,t).flags|=256),e=Fa(e,t),e!==2&&(t=Lt,Lt=r,t!==null&&lc(t)),e}function lc(e){Lt===null?Lt=e:Lt.push.apply(Lt,e)}function Pg(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!fr(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hr(e,t){for(t&=~dd,t&=~dl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-mr(t),n=1<<r;e[r]=-1,t&=~n}}function Iu(e){if(Te&6)throw Error(Q(327));un();var t=ja(e,0);if(!(t&1))return Bt(e,et()),null;var r=Fa(e,t);if(e.tag!==0&&r===2){var n=Ao(e);n!==0&&(t=n,r=ac(e,n))}if(r===1)throw r=wi,ks(e,0),Hr(e,t),Bt(e,et()),r;if(r===6)throw Error(Q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ps(e,Lt,zr),Bt(e,et()),null}function md(e,t){var r=Te;Te|=1;try{return e(t)}finally{Te=r,Te===0&&(vn=et()+500,al&&cs())}}function Cs(e){Kr!==null&&Kr.tag===0&&!(Te&6)&&un();var t=Te;Te|=1;var r=Xt.transition,n=$e;try{if(Xt.transition=null,$e=1,e)return e()}finally{$e=n,Xt.transition=r,Te=t,!(Te&6)&&cs()}}function hd(){qt=sn.current,Fe(sn)}function ks(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,ag(r)),it!==null)for(r=it.return;r!==null;){var n=r;switch(Vc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ea();break;case 3:xn(),Fe(Ut),Fe(Pt),rd();break;case 5:td(n);break;case 4:xn();break;case 13:Fe(We);break;case 19:Fe(We);break;case 10:Jc(n.type._context);break;case 22:case 23:hd()}r=r.return}if(ft=e,it=e=ns(e.current,null),kt=qt=t,dt=0,wi=null,dd=dl=Es=0,Lt=Xn=null,bs!==null){for(t=0;t<bs.length;t++)if(r=bs[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var l=a.next;a.next=i,n.next=l}r.pending=n}bs=null}return e}function w0(e,t){do{var r=it;try{if(Qc(),ma.current=La,Ia){for(var n=Ve.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ia=!1}if(zs=0,ht=ct=Ve=null,Qn=!1,yi=0,cd.current=null,r===null||r.return===null){dt=1,wi=t,it=null;break}e:{var a=e,l=r.return,o=r,c=t;if(t=kt,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=ju(l);if(p!==null){p.flags&=-257,_u(p,l,o,a,t),p.mode&1&&ku(a,d,t),t=p,c=d;var b=t.updateQueue;if(b===null){var j=new Set;j.add(c),t.updateQueue=j}else b.add(c);break e}else{if(!(t&1)){ku(a,d,t),fd();break e}c=Error(Q(426))}}else if(qe&&o.mode&1){var S=ju(l);if(S!==null){!(S.flags&65536)&&(S.flags|=256),_u(S,l,o,a,t),Kc(yn(c,o));break e}}a=c=yn(c,o),dt!==4&&(dt=2),Xn===null?Xn=[a]:Xn.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var y=n0(a,c,t);gu(a,y);break e;case 1:o=c;var h=a.type,g=a.stateNode;if(!(a.flags&128)&&(typeof h.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(rs===null||!rs.has(g)))){a.flags|=65536,t&=-t,a.lanes|=t;var _=i0(a,o,t);gu(a,_);break e}}a=a.return}while(a!==null)}_0(r)}catch($){t=$,it===r&&r!==null&&(it=r=r.return);continue}break}while(!0)}function k0(){var e=Oa.current;return Oa.current=La,e===null?La:e}function fd(){(dt===0||dt===3||dt===2)&&(dt=4),ft===null||!(Es&268435455)&&!(dl&268435455)||Hr(ft,kt)}function Fa(e,t){var r=Te;Te|=2;var n=k0();(ft!==e||kt!==t)&&(zr=null,ks(e,t));do try{Tg();break}catch(i){w0(e,i)}while(!0);if(Qc(),Te=r,Oa.current=n,it!==null)throw Error(Q(261));return ft=null,kt=0,dt}function Tg(){for(;it!==null;)j0(it)}function Ag(){for(;it!==null&&!sp();)j0(it)}function j0(e){var t=S0(e.alternate,e,qt);e.memoizedProps=e.pendingProps,t===null?_0(e):it=t,cd.current=null}function _0(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Ng(r,t),r!==null){r.flags&=32767,it=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{dt=6,it=null;return}}else if(r=_g(r,t,qt),r!==null){it=r;return}if(t=t.sibling,t!==null){it=t;return}it=t=e}while(t!==null);dt===0&&(dt=5)}function ps(e,t,r){var n=$e,i=Xt.transition;try{Xt.transition=null,$e=1,Dg(e,t,r,n)}finally{Xt.transition=i,$e=n}return null}function Dg(e,t,r,n){do un();while(Kr!==null);if(Te&6)throw Error(Q(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Q(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(hp(e,a),e===ft&&(it=ft=null,kt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Zi||(Zi=!0,z0(ka,function(){return un(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Xt.transition,Xt.transition=null;var l=$e;$e=1;var o=Te;Te|=4,cd.current=null,zg(e,r),y0(r,e),Zp(Oo),_a=!!Lo,Oo=Lo=null,e.current=r,Eg(r),np(),Te=o,$e=l,Xt.transition=a}else e.current=r;if(Zi&&(Zi=!1,Kr=e,Ua=i),a=e.pendingLanes,a===0&&(rs=null),lp(r.stateNode),Bt(e,et()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Ma)throw Ma=!1,e=nc,nc=null,e;return Ua&1&&e.tag!==0&&un(),a=e.pendingLanes,a&1?e===ic?Zn++:(Zn=0,ic=e):Zn=0,cs(),null}function un(){if(Kr!==null){var e=nh(Ua),t=Xt.transition,r=$e;try{if(Xt.transition=null,$e=16>e?16:e,Kr===null)var n=!1;else{if(e=Kr,Kr=null,Ua=0,Te&6)throw Error(Q(331));var i=Te;for(Te|=4,ce=e.current;ce!==null;){var a=ce,l=a.child;if(ce.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(ce=d;ce!==null;){var u=ce;switch(u.tag){case 0:case 11:case 15:Jn(8,u,a)}var m=u.child;if(m!==null)m.return=u,ce=m;else for(;ce!==null;){u=ce;var f=u.sibling,p=u.return;if(p0(u),u===d){ce=null;break}if(f!==null){f.return=p,ce=f;break}ce=p}}}var b=a.alternate;if(b!==null){var j=b.child;if(j!==null){b.child=null;do{var S=j.sibling;j.sibling=null,j=S}while(j!==null)}}ce=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,ce=l;else e:for(;ce!==null;){if(a=ce,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Jn(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,ce=y;break e}ce=a.return}}var h=e.current;for(ce=h;ce!==null;){l=ce;var g=l.child;if(l.subtreeFlags&2064&&g!==null)g.return=l,ce=g;else e:for(l=h;ce!==null;){if(o=ce,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:cl(9,o)}}catch($){Qe(o,o.return,$)}if(o===l){ce=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,ce=_;break e}ce=o.return}}if(Te=i,cs(),kr&&typeof kr.onPostCommitFiberRoot=="function")try{kr.onPostCommitFiberRoot(tl,e)}catch{}n=!0}return n}finally{$e=r,Xt.transition=t}}return!1}function Lu(e,t,r){t=yn(r,t),t=n0(e,t,1),e=ts(e,t,1),t=Dt(),e!==null&&(Ni(e,1,t),Bt(e,t))}function Qe(e,t,r){if(e.tag===3)Lu(e,e,r);else for(;t!==null;){if(t.tag===3){Lu(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(rs===null||!rs.has(n))){e=yn(r,e),e=i0(t,e,1),t=ts(t,e,1),e=Dt(),t!==null&&(Ni(t,1,e),Bt(t,e));break}}t=t.return}}function Rg(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Dt(),e.pingedLanes|=e.suspendedLanes&r,ft===e&&(kt&r)===r&&(dt===4||dt===3&&(kt&130023424)===kt&&500>et()-ud?ks(e,0):dd|=r),Bt(e,t)}function N0(e,t){t===0&&(e.mode&1?(t=qi,qi<<=1,!(qi&130023424)&&(qi=4194304)):t=1);var r=Dt();e=Ir(e,t),e!==null&&(Ni(e,t,r),Bt(e,r))}function $g(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),N0(e,r)}function Ig(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Q(314))}n!==null&&n.delete(t),N0(e,r)}var S0;S0=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ut.current)Mt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Mt=!1,jg(e,t,r);Mt=!!(e.flags&131072)}else Mt=!1,qe&&t.flags&1048576&&Ph(t,Ta,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;fa(e,t),e=t.pendingProps;var i=fn(t,Pt.current);dn(t,r),i=nd(null,t,n,e,i,r);var a=id();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ft(n)?(a=!0,Ca(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Zc(t),i.updater=ol,t.stateNode=i,i._reactInternals=t,Vo(t,n,e,r),t=Qo(null,t,n,!0,a,r)):(t.tag=0,qe&&a&&Wc(t),At(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(fa(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=Og(n),e=ar(n,e),i){case 0:t=Yo(null,t,n,e,r);break e;case 1:t=zu(null,t,n,e,r);break e;case 11:t=Nu(null,t,n,e,r);break e;case 14:t=Su(null,t,n,ar(n.type,e),r);break e}throw Error(Q(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ar(n,i),Yo(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ar(n,i),zu(e,t,n,i,r);case 3:e:{if(c0(t),e===null)throw Error(Q(387));n=t.pendingProps,a=t.memoizedState,i=a.element,Ih(e,t),Ra(t,n,null,r);var l=t.memoizedState;if(n=l.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=yn(Error(Q(423)),t),t=Eu(e,t,n,r,i);break e}else if(n!==i){i=yn(Error(Q(424)),t),t=Eu(e,t,n,r,i);break e}else for(Gt=es(t.stateNode.containerInfo.firstChild),Ht=t,qe=!0,cr=null,r=Rh(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(pn(),n===i){t=Lr(e,t,r);break e}At(e,t,n,r)}t=t.child}return t;case 5:return Lh(t),e===null&&Go(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,l=i.children,Mo(n,i)?l=null:a!==null&&Mo(n,a)&&(t.flags|=32),o0(e,t),At(e,t,l,r),t.child;case 6:return e===null&&Go(t),null;case 13:return d0(e,t,r);case 4:return ed(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=gn(t,null,n,r):At(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ar(n,i),Nu(e,t,n,i,r);case 7:return At(e,t,t.pendingProps,r),t.child;case 8:return At(e,t,t.pendingProps.children,r),t.child;case 12:return At(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,l=i.value,Me(Aa,n._currentValue),n._currentValue=l,a!==null)if(fr(a.value,l)){if(a.children===i.children&&!Ut.current){t=Lr(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){l=a.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=Ar(-1,r&-r),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Ho(a.return,r,t),o.lanes|=r;break}c=c.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(Q(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),Ho(l,r,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}At(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,dn(t,r),i=er(i),n=n(i),t.flags|=1,At(e,t,n,r),t.child;case 14:return n=t.type,i=ar(n,t.pendingProps),i=ar(n.type,i),Su(e,t,n,i,r);case 15:return a0(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ar(n,i),fa(e,t),t.tag=1,Ft(n)?(e=!0,Ca(t)):e=!1,dn(t,r),s0(t,n,i),Vo(t,n,i,r),Qo(null,t,n,!0,e,r);case 19:return u0(e,t,r);case 22:return l0(e,t,r)}throw Error(Q(156,t.tag))};function z0(e,t){return eh(e,t)}function Lg(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(e,t,r,n){return new Lg(e,t,r,n)}function pd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Og(e){if(typeof e=="function")return pd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Rc)return 11;if(e===$c)return 14}return 2}function ns(e,t){var r=e.alternate;return r===null?(r=Jt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function xa(e,t,r,n,i,a){var l=2;if(n=e,typeof e=="function")pd(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Vs:return js(r.children,i,a,t);case Dc:l=8,i|=8;break;case xo:return e=Jt(12,r,t,i|2),e.elementType=xo,e.lanes=a,e;case yo:return e=Jt(13,r,t,i),e.elementType=yo,e.lanes=a,e;case vo:return e=Jt(19,r,t,i),e.elementType=vo,e.lanes=a,e;case Lm:return ul(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $m:l=10;break e;case Im:l=9;break e;case Rc:l=11;break e;case $c:l=14;break e;case Br:l=16,n=null;break e}throw Error(Q(130,e==null?e:typeof e,""))}return t=Jt(l,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function js(e,t,r,n){return e=Jt(7,e,n,t),e.lanes=r,e}function ul(e,t,r,n){return e=Jt(22,e,n,t),e.elementType=Lm,e.lanes=r,e.stateNode={isHidden:!1},e}function to(e,t,r){return e=Jt(6,e,null,t),e.lanes=r,e}function ro(e,t,r){return t=Jt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Mg(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Il(0),this.expirationTimes=Il(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Il(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function gd(e,t,r,n,i,a,l,o,c){return e=new Mg(e,t,r,o,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Jt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zc(a),e}function Ug(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ws,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function E0(e){if(!e)return as;e=e._reactInternals;e:{if(As(e)!==e||e.tag!==1)throw Error(Q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Q(171))}if(e.tag===1){var r=e.type;if(Ft(r))return Eh(e,r,t)}return t}function C0(e,t,r,n,i,a,l,o,c){return e=gd(r,n,!0,e,i,a,l,o,c),e.context=E0(null),r=e.current,n=Dt(),i=ss(r),a=Ar(n,i),a.callback=t??null,ts(r,a,i),e.current.lanes=i,Ni(e,i,n),Bt(e,n),e}function ml(e,t,r,n){var i=t.current,a=Dt(),l=ss(i);return r=E0(r),t.context===null?t.context=r:t.pendingContext=r,t=Ar(a,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ts(i,t,l),e!==null&&(hr(e,i,l,a),ua(e,i,l)),l}function Ba(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ou(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function xd(e,t){Ou(e,t),(e=e.alternate)&&Ou(e,t)}function Fg(){return null}var P0=typeof reportError=="function"?reportError:function(e){console.error(e)};function yd(e){this._internalRoot=e}hl.prototype.render=yd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Q(409));ml(e,t,null,null)};hl.prototype.unmount=yd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Cs(function(){ml(null,e,null,null)}),t[$r]=null}};function hl(e){this._internalRoot=e}hl.prototype.unstable_scheduleHydration=function(e){if(e){var t=lh();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Gr.length&&t!==0&&t<Gr[r].priority;r++);Gr.splice(r,0,e),r===0&&ch(e)}};function vd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Mu(){}function Bg(e,t,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var d=Ba(l);a.call(d)}}var l=C0(t,n,e,0,null,!1,!1,"",Mu);return e._reactRootContainer=l,e[$r]=l.current,hi(e.nodeType===8?e.parentNode:e),Cs(),l}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var d=Ba(c);o.call(d)}}var c=gd(e,0,!1,null,null,!1,!1,"",Mu);return e._reactRootContainer=c,e[$r]=c.current,hi(e.nodeType===8?e.parentNode:e),Cs(function(){ml(t,c,r,n)}),c}function pl(e,t,r,n,i){var a=r._reactRootContainer;if(a){var l=a;if(typeof i=="function"){var o=i;i=function(){var c=Ba(l);o.call(c)}}ml(t,l,e,i)}else l=Bg(r,t,e,i,n);return Ba(l)}ih=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Bn(t.pendingLanes);r!==0&&(Oc(t,r|1),Bt(t,et()),!(Te&6)&&(vn=et()+500,cs()))}break;case 13:Cs(function(){var n=Ir(e,1);if(n!==null){var i=Dt();hr(n,e,1,i)}}),xd(e,1)}};Mc=function(e){if(e.tag===13){var t=Ir(e,134217728);if(t!==null){var r=Dt();hr(t,e,134217728,r)}xd(e,134217728)}};ah=function(e){if(e.tag===13){var t=ss(e),r=Ir(e,t);if(r!==null){var n=Dt();hr(r,e,t,n)}xd(e,t)}};lh=function(){return $e};oh=function(e,t){var r=$e;try{return $e=e,t()}finally{$e=r}};Co=function(e,t,r){switch(t){case"input":if(ko(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=il(n);if(!i)throw Error(Q(90));Mm(n),ko(n,i)}}}break;case"textarea":Fm(e,r);break;case"select":t=r.value,t!=null&&an(e,!!r.multiple,t,!1)}};Km=md;Ym=Cs;var qg={usingClientEntryPoint:!1,Events:[zi,Js,il,Wm,Vm,md]},On={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gg={bundleType:On.bundleType,version:On.version,rendererPackageName:On.rendererPackageName,rendererConfig:On.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Or.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Xm(e),e===null?null:e.stateNode},findFiberByHostInstance:On.findFiberByHostInstance||Fg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ea=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ea.isDisabled&&ea.supportsFiber)try{tl=ea.inject(Gg),kr=ea}catch{}}Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qg;Vt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vd(t))throw Error(Q(200));return Ug(e,t,null,r)};Vt.createRoot=function(e,t){if(!vd(e))throw Error(Q(299));var r=!1,n="",i=P0;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=gd(e,1,!1,null,null,r,!1,n,i),e[$r]=t.current,hi(e.nodeType===8?e.parentNode:e),new yd(t)};Vt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Q(188)):(e=Object.keys(e).join(","),Error(Q(268,e)));return e=Xm(t),e=e===null?null:e.stateNode,e};Vt.flushSync=function(e){return Cs(e)};Vt.hydrate=function(e,t,r){if(!fl(t))throw Error(Q(200));return pl(null,e,t,!0,r)};Vt.hydrateRoot=function(e,t,r){if(!vd(e))throw Error(Q(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",l=P0;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=C0(t,null,e,1,r??null,i,!1,a,l),e[$r]=t.current,hi(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new hl(t)};Vt.render=function(e,t,r){if(!fl(t))throw Error(Q(200));return pl(null,e,t,!1,r)};Vt.unmountComponentAtNode=function(e){if(!fl(e))throw Error(Q(40));return e._reactRootContainer?(Cs(function(){pl(null,null,e,!1,function(){e._reactRootContainer=null,e[$r]=null})}),!0):!1};Vt.unstable_batchedUpdates=md;Vt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!fl(r))throw Error(Q(200));if(e==null||e._reactInternals===void 0)throw Error(Q(38));return pl(e,t,r,!1,n)};Vt.version="18.3.1-next-f1338f8080-20240426";function T0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(T0)}catch(e){console.error(e)}}T0(),Tm.exports=Vt;var Hg=Tm.exports,A0,Uu=Hg;A0=Uu.createRoot,Uu.hydrateRoot;const Wg="modulepreload",Vg=function(e){return"/"+e},Fu={},Sn=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=Vg(c),c in Fu)return;Fu[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Wg,d||(m.as="script"),m.crossOrigin="",m.href=c,o&&m.setAttribute("nonce",o),document.head.appendChild(m),d)return new Promise((f,p)=>{m.addEventListener("load",f),m.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return i.then(l=>{for(const o of l||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})},Kg=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Sn(async()=>{const{default:n}=await Promise.resolve().then(()=>zn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class bd extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Yg extends bd{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Bu extends bd{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class qu extends bd{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var oc;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(oc||(oc={}));var Qg=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};class Jg{constructor(t,{headers:r={},customFetch:n,region:i=oc.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=Kg(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return Qg(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:l}=r;let o={},{region:c}=r;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(o["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=l):typeof l=="string"?(o["Content-Type"]="text/plain",u=l):typeof FormData<"u"&&l instanceof FormData?u=l:(o["Content-Type"]="application/json",u=JSON.stringify(l)));const m=yield this.fetch(d.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:u}).catch(j=>{throw new Yg(j)}),f=m.headers.get("x-relay-error");if(f&&f==="true")throw new Bu(m);if(!m.ok)throw new qu(m);let p=((n=m.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),b;return p==="application/json"?b=yield m.json():p==="application/octet-stream"?b=yield m.blob():p==="text/event-stream"?b=m:p==="multipart/form-data"?b=yield m.formData():b=yield m.text(),{data:b,error:null,response:m}}catch(i){return{data:null,error:i,response:i instanceof qu||i instanceof Bu?i.context:void 0}}})}}var Ot={},wd={},gl={},Ci={},xl={},yl={},Xg=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},bn=Xg();const Zg=bn.fetch,D0=bn.fetch.bind(bn),R0=bn.Headers,ex=bn.Request,tx=bn.Response,zn=Object.freeze(Object.defineProperty({__proto__:null,Headers:R0,Request:ex,Response:tx,default:D0,fetch:Zg},Symbol.toStringTag,{value:"Module"})),rx=vf(zn);var vl={};Object.defineProperty(vl,"__esModule",{value:!0});let sx=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};vl.default=sx;var $0=Zt&&Zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yl,"__esModule",{value:!0});const nx=$0(rx),ix=$0(vl);let ax=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=nx.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var l,o,c,d;let u=null,m=null,f=null,p=a.status,b=a.statusText;if(a.ok){if(this.method!=="HEAD"){const h=await a.text();h===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?m=h:m=JSON.parse(h))}const S=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(c=a.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");S&&y&&y.length>1&&(f=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(u={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,f=null,p=406,b="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const S=await a.text();try{u=JSON.parse(S),Array.isArray(u)&&a.status===404&&(m=[],u=null,p=200,b="OK")}catch{a.status===404&&S===""?(p=204,b="No Content"):u={message:S}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,p=200,b="OK"),u&&this.shouldThrowOnError)throw new ix.default(u)}return{error:u,data:m,count:f,status:p,statusText:b}});return this.shouldThrowOnError||(i=i.catch(a=>{var l,o,c;return{error:{message:`${(l=a==null?void 0:a.name)!==null&&l!==void 0?l:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(o=a==null?void 0:a.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,r)}returns(){return this}overrideTypes(){return this}};yl.default=ax;var lx=Zt&&Zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xl,"__esModule",{value:!0});const ox=lx(yl);let cx=class extends ox.default{select(t){let r=!1;const n=(t??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:i,referencedTable:a=i}={}){const l=a?`${a}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:i=n}={}){const a=typeof i>"u"?"offset":`${i}.offset`,l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(l,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:i=!1,wal:a=!1,format:l="text"}={}){var o;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),d=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${d}"; options=${c};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};xl.default=cx;var dx=Zt&&Zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ci,"__esModule",{value:!0});const ux=dx(xl);let mx=class extends ux.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${l}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Ci.default=mx;var hx=Zt&&Zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gl,"__esModule",{value:!0});const Mn=hx(Ci);let fx=class{constructor(t,{headers:r={},schema:n,fetch:i}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=i}select(t,{head:r=!1,count:n}={}){const i=r?"HEAD":"GET";let a=!1;const l=(t??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",l),n&&this.headers.append("Prefer",`count=${n}`),new Mn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var i;const a="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(l.length>0){const o=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new Mn.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:a=!0}={}){var l;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),i&&this.headers.append("Prefer",`count=${i}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Mn.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(t,{count:r}={}){var n;const i="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Mn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Mn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};gl.default=fx;var I0=Zt&&Zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wd,"__esModule",{value:!0});const px=I0(gl),gx=I0(Ci);let xx=class L0{constructor(t,{headers:r={},schema:n,fetch:i}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=i}from(t){const r=new URL(`${this.url}/${t}`);return new px.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new L0(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:i=!1,count:a}={}){var l;let o;const c=new URL(`${this.url}/rpc/${t}`);let d;n||i?(o=n?"HEAD":"GET",Object.entries(r).filter(([m,f])=>f!==void 0).map(([m,f])=>[m,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([m,f])=>{c.searchParams.append(m,f)})):(o="POST",d=r);const u=new Headers(this.headers);return a&&u.set("Prefer",`count=${a}`),new gx.default({method:o,url:c,headers:u,schema:this.schemaName,body:d,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};wd.default=xx;var En=Zt&&Zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.PostgrestError=Ot.PostgrestBuilder=Ot.PostgrestTransformBuilder=Ot.PostgrestFilterBuilder=Ot.PostgrestQueryBuilder=Ot.PostgrestClient=void 0;const O0=En(wd);Ot.PostgrestClient=O0.default;const M0=En(gl);Ot.PostgrestQueryBuilder=M0.default;const U0=En(Ci);Ot.PostgrestFilterBuilder=U0.default;const F0=En(xl);Ot.PostgrestTransformBuilder=F0.default;const B0=En(yl);Ot.PostgrestBuilder=B0.default;const q0=En(vl);Ot.PostgrestError=q0.default;var yx=Ot.default={PostgrestClient:O0.default,PostgrestQueryBuilder:M0.default,PostgrestFilterBuilder:U0.default,PostgrestTransformBuilder:F0.default,PostgrestBuilder:B0.default,PostgrestError:q0.default};const{PostgrestClient:vx,PostgrestQueryBuilder:tw,PostgrestFilterBuilder:rw,PostgrestTransformBuilder:sw,PostgrestBuilder:nw,PostgrestError:iw}=yx;class bx{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const wx="2.15.5",kx=`realtime-js/${wx}`,jx="1.0.0",cc=1e4,_x=1e3,Nx=100;var ei;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ei||(ei={}));var lt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(lt||(lt={}));var or;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(or||(or={}));var dc;(function(e){e.websocket="websocket"})(dc||(dc={}));var xs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(xs||(xs={}));class Sx{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const i=r.getUint8(1),a=r.getUint8(2);let l=this.HEADER_LENGTH+2;const o=n.decode(t.slice(l,l+i));l=l+i;const c=n.decode(t.slice(l,l+a));l=l+a;const d=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:o,event:c,payload:d}}}class G0{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Oe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Oe||(Oe={}));const Gu=(e,t,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((a,l)=>(a[l]=zx(l,e,t,i),a),{})},zx=(e,t,r,n)=>{const i=t.find(o=>o.name===e),a=i==null?void 0:i.type,l=r[e];return a&&!n.includes(a)?H0(a,l):uc(l)},H0=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Tx(t,r)}switch(e){case Oe.bool:return Ex(t);case Oe.float4:case Oe.float8:case Oe.int2:case Oe.int4:case Oe.int8:case Oe.numeric:case Oe.oid:return Cx(t);case Oe.json:case Oe.jsonb:return Px(t);case Oe.timestamp:return Ax(t);case Oe.abstime:case Oe.date:case Oe.daterange:case Oe.int4range:case Oe.int8range:case Oe.money:case Oe.reltime:case Oe.text:case Oe.time:case Oe.timestamptz:case Oe.timetz:case Oe.tsrange:case Oe.tstzrange:return uc(t);default:return uc(t)}},uc=e=>e,Ex=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Cx=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Px=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Tx=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const l=e.slice(1,r);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(o=>H0(t,o))}return e},Ax=e=>typeof e=="string"?e.replace(" ","T"):e,W0=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class so{constructor(t,r,n={},i=cc){this.channel=t,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Hu;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Hu||(Hu={}));class ti{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ti.syncState(this.state,i,a,l),this.pendingDiffs.forEach(c=>{this.state=ti.syncDiff(this.state,c,a,l)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ti.syncDiff(this.state,i,a,l),o())}),this.onJoin((i,a,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:l})}),this.onLeave((i,a,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,i){const a=this.cloneDeep(t),l=this.transformState(r),o={},c={};return this.map(a,(d,u)=>{l[d]||(c[d]=u)}),this.map(l,(d,u)=>{const m=a[d];if(m){const f=u.map(S=>S.presence_ref),p=m.map(S=>S.presence_ref),b=u.filter(S=>p.indexOf(S.presence_ref)<0),j=m.filter(S=>f.indexOf(S.presence_ref)<0);b.length>0&&(o[d]=b),j.length>0&&(c[d]=j)}else o[d]=u}),this.syncDiff(a,{joins:o,leaves:c},n,i)}static syncDiff(t,r,n,i){const{joins:a,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(o,c)=>{var d;const u=(d=t[o])!==null&&d!==void 0?d:[];if(t[o]=this.cloneDeep(c),u.length>0){const m=t[o].map(p=>p.presence_ref),f=u.filter(p=>m.indexOf(p.presence_ref)<0);t[o].unshift(...f)}n(o,u,c)}),this.map(l,(o,c)=>{let d=t[o];if(!d)return;const u=c.map(m=>m.presence_ref);d=d.filter(m=>u.indexOf(m.presence_ref)<0),t[o]=d,i(o,d,c),d.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const i=t[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Wu;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Wu||(Wu={}));var ri;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ri||(ri={}));var Er;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Er||(Er={}));class kd{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=lt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new so(this,or.join,this.params,this.timeout),this.rejoinTimer=new G0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=lt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=lt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(or.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new ti(this),this.broadcastEndpointURL=W0(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==lt.closed){const{config:{broadcast:l,presence:o,private:c}}=this.params,d=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[ri.PRESENCE]&&this.bindings[ri.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,m={},f={broadcast:l,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Er.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Er.CLOSED)),this.updateJoinPayload(Object.assign({config:f},m)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var b;if(this.socket.setAuth(),p===void 0){t==null||t(Er.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,S=(b=j==null?void 0:j.length)!==null&&b!==void 0?b:0,y=[];for(let h=0;h<S;h++){const g=j[h],{filter:{event:_,schema:$,table:A,filter:M}}=g,I=p&&p[h];if(I&&I.event===_&&I.schema===$&&I.table===A&&I.filter===M)y.push(Object.assign(Object.assign({},g),{id:I.id}));else{this.unsubscribe(),this.state=lt.errored,t==null||t(Er.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(Er.SUBSCRIBED);return}}).receive("error",p=>{this.state=lt.errored,t==null||t(Er.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Er.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===lt.joined&&t===ri.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:l}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,o,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=lt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(or.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new so(this,or.leave,{},t),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=lt.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new so(this,t,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Nx){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var i,a;const l=t.toLocaleLowerCase(),{close:o,error:c,leave:d,join:u}=or;if(n&&[o,c,d,u].indexOf(l)>=0&&n!==this._joinRef())return;let f=this._onMessage(l,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var b,j,S;return((b=p.filter)===null||b===void 0?void 0:b.event)==="*"||((S=(j=p.filter)===null||j===void 0?void 0:j.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===l}).map(p=>p.callback(f,n)):(a=this.bindings[l])===null||a===void 0||a.filter(p=>{var b,j,S,y,h,g;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in p){const _=p.id,$=(b=p.filter)===null||b===void 0?void 0:b.event;return _&&((j=r.ids)===null||j===void 0?void 0:j.includes(_))&&($==="*"||($==null?void 0:$.toLocaleLowerCase())===((S=r.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const _=(h=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||h===void 0?void 0:h.toLocaleLowerCase();return _==="*"||_===((g=r==null?void 0:r.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===l}).map(p=>{if(typeof f=="object"&&"ids"in f){const b=f.data,{schema:j,table:S,commit_timestamp:y,type:h,errors:g}=b;f=Object.assign(Object.assign({},{schema:j,table:S,commit_timestamp:y,eventType:h,new:{},old:{},errors:g}),this._getPayloadRecords(b))}p.callback(f,n)})}_isClosed(){return this.state===lt.closed}_isJoined(){return this.state===lt.joined}_isJoining(){return this.state===lt.joining}_isLeaving(){return this.state===lt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const i=t.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&kd.isEqual(i.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(or.close,{},t)}_onError(t){this._on(or.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=lt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Gu(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Gu(t.columns,t.old_record)),r}}const no=()=>{},ta={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Dx=[1e3,2e3,5e3,1e4],Rx=1e4,$x=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ix{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=cc,this.transport=null,this.heartbeatIntervalMs=ta.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=no,this.ref=0,this.reconnectTimer=null,this.logger=no,this.conn=null,this.sendBuffer=[],this.serializer=new Sx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>Sn(async()=>{const{default:o}=await Promise.resolve().then(()=>zn);return{default:o}},void 0).then(({default:o})=>o(...l)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...l)=>a(...l)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${dc.websocket}`,this.httpEndpoint=W0(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=bx.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:jx}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ei.connecting:return xs.Connecting;case ei.open:return xs.Open;case ei.closing:return xs.Closing;default:return xs.Closed}}isConnected(){return this.connectionState()===xs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new kd(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:i,ref:a}=t,l=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(_x,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ta.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:a,ref:l}=r,o=l?`(${l})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${i} ${o}`.trim(),a),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(i,a,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(or.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${n}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([$x],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:kx};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(or.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new G0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ta.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,i,a,l,o,c,d,u;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:cc,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:ta.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:no,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:m=>Dx[m-1]||Rx,this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(m,f)=>f(JSON.stringify(m)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class jd extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ot(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Lx extends jd{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class mc extends jd{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var Ox=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};const V0=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Sn(async()=>{const{default:n}=await Promise.resolve().then(()=>zn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Mx=()=>Ox(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Sn(()=>Promise.resolve().then(()=>zn),void 0)).Response:Response}),hc=e=>{if(Array.isArray(e))return e.map(r=>hc(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=hc(n)}),t},Ux=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Ds=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};const io=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Fx=(e,t,r)=>Ds(void 0,void 0,void 0,function*(){const n=yield Mx();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(i=>{const a=e.status||500,l=(i==null?void 0:i.statusCode)||a+"";t(new Lx(io(i),a,l))}).catch(i=>{t(new mc(io(i),i))}):t(new mc(io(e),e))}),Bx=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?i:(Ux(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),r))};function Pi(e,t,r,n,i,a){return Ds(this,void 0,void 0,function*(){return new Promise((l,o)=>{e(r,Bx(t,n,i,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>Fx(c,o,n))})})}function qa(e,t,r,n){return Ds(this,void 0,void 0,function*(){return Pi(e,"GET",t,r,n)})}function vr(e,t,r,n,i){return Ds(this,void 0,void 0,function*(){return Pi(e,"POST",t,n,i,r)})}function fc(e,t,r,n,i){return Ds(this,void 0,void 0,function*(){return Pi(e,"PUT",t,n,i,r)})}function qx(e,t,r,n){return Ds(this,void 0,void 0,function*(){return Pi(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function K0(e,t,r,n,i){return Ds(this,void 0,void 0,function*(){return Pi(e,"DELETE",t,n,i,r)})}var Tt=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};const Gx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Hx{constructor(t,r={},n,i){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=V0(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,i){return Tt(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},Vu),i);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",l.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),m=yield(t=="PUT"?fc:vr)(this.fetch,`${this.url}/object/${u}`,a,Object.assign({headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:d,id:m.Id,fullPath:m.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}})}upload(t,r,n){return Tt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,i){return Tt(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),l=this._getFinalPath(a),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:Vu.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const m=yield fc(this.fetch,o.toString(),c,{headers:u});return{data:{path:a,fullPath:m.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(ot(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Tt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const a=yield vr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),l=new URL(this.url+a.url),o=l.searchParams.get("token");if(!o)throw new jd("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}update(t,r,n){return Tt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Tt(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}})}copy(t,r,n){return Tt(this,void 0,void 0,function*(){try{return{data:{path:(yield vr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}})}createSignedUrl(t,r,n){return Tt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield vr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}})}createSignedUrls(t,r,n){return Tt(this,void 0,void 0,function*(){try{const i=yield vr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}})}download(t,r){return Tt(this,void 0,void 0,function*(){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=a?`?${a}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield qa(this.fetch,`${this.url}/${i}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ot(o))return{data:null,error:o};throw o}})}info(t){return Tt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield qa(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:hc(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}exists(t){return Tt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield qx(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n)&&n instanceof mc){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),i=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&i.push(c);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${d}`)}}}remove(t){return Tt(this,void 0,void 0,function*(){try{return{data:yield K0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}})}list(t,r,n){return Tt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Gx),r),{prefix:t||""});return{data:yield vr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}})}listV2(t,r){return Tt(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield vr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Wx="2.12.1",Vx={"X-Client-Info":`storage-js/${Wx}`};var Ls=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};class Kx{constructor(t,r={},n,i){this.shouldThrowOnError=!1;const a=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},Vx),r),this.fetch=V0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ls(this,void 0,void 0,function*(){try{return{data:yield qa(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ot(t))return{data:null,error:t};throw t}})}getBucket(t){return Ls(this,void 0,void 0,function*(){try{return{data:yield qa(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Ls(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Ls(this,void 0,void 0,function*(){try{return{data:yield fc(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Ls(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ls(this,void 0,void 0,function*(){try{return{data:yield K0(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}})}}class Yx extends Kx{constructor(t,r={},n,i){super(t,r,n,i)}from(t){return new Hx(this.url,this.headers,t,this.fetch)}}const Qx="2.57.4";let Gn="";typeof Deno<"u"?Gn="deno":typeof document<"u"?Gn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Gn="react-native":Gn="node";const Jx={"X-Client-Info":`supabase-js-${Gn}/${Qx}`},Xx={headers:Jx},Zx={schema:"public"},ey={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ty={};var ry=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};const sy=e=>{let t;return e?t=e:typeof fetch>"u"?t=D0:t=fetch,(...r)=>t(...r)},ny=()=>typeof Headers>"u"?R0:Headers,iy=(e,t,r)=>{const n=sy(r),i=ny();return(a,l)=>ry(void 0,void 0,void 0,function*(){var o;const c=(o=yield t())!==null&&o!==void 0?o:e;let d=new i(l==null?void 0:l.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},l),{headers:d}))})};var ay=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};function ly(e){return e.endsWith("/")?e:e+"/"}function oy(e,t){var r,n;const{db:i,auth:a,realtime:l,global:o}=e,{db:c,auth:d,realtime:u,global:m}=t,f={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},d),a),realtime:Object.assign(Object.assign({},u),l),storage:{},global:Object.assign(Object.assign(Object.assign({},m),o),{headers:Object.assign(Object.assign({},(r=m==null?void 0:m.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>ay(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function cy(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ly(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Y0="2.71.1",Bs=30*1e3,pc=3,ao=pc*Bs,dy="http://localhost:9999",uy="supabase.auth.token",my={"X-Client-Info":`gotrue-js/${Y0}`},gc="X-Supabase-Api-Version",Q0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},hy=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,fy=10*60*1e3;class _d extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function we(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class py extends _d{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function gy(e){return we(e)&&e.name==="AuthApiError"}class J0 extends _d{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ds extends _d{constructor(t,r,n,i){super(t,n,i),this.name=r,this.status=n}}class Fr extends ds{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xy(e){return we(e)&&e.name==="AuthSessionMissingError"}class ra extends ds{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class sa extends ds{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class na extends ds{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function yy(e){return we(e)&&e.name==="AuthImplicitGrantRedirectError"}class Ku extends ds{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xc extends ds{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function lo(e){return we(e)&&e.name==="AuthRetryableFetchError"}class Yu extends ds{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class yc extends ds{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ga="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Qu=` 	
\r=`.split(""),vy=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Qu.length;t+=1)e[Qu[t].charCodeAt(0)]=-2;for(let t=0;t<Ga.length;t+=1)e[Ga[t].charCodeAt(0)]=t;return e})();function Ju(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Ga[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Ga[n]),t.queuedBits-=6}}function X0(e,t,r){const n=vy[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Xu(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=l=>{ky(l,n,r)};for(let l=0;l<e.length;l+=1)X0(e.charCodeAt(l),i,a);return t.join("")}function by(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function wy(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}by(n,t)}}function ky(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function jy(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)X0(e.charCodeAt(i),r,n);return new Uint8Array(t)}function _y(e){const t=[];return wy(e,r=>t.push(r)),new Uint8Array(t)}function Ny(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>Ju(i,r,n)),Ju(null,r,n),t.join("")}function Sy(e){return Math.round(Date.now()/1e3)+e}function zy(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ir=()=>typeof window<"u"&&typeof document<"u",ms={tested:!1,writable:!1},Z0=()=>{if(!ir())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ms.tested)return ms.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ms.tested=!0,ms.writable=!0}catch{ms.tested=!0,ms.writable=!1}return ms.writable};function Ey(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{t[i]=n}),t}const ef=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Sn(async()=>{const{default:n}=await Promise.resolve().then(()=>zn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Cy=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",qs=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},hs=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ur=async(e,t)=>{await e.removeItem(t)};class bl{constructor(){this.promise=new bl.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}bl.promiseConstructor=Promise;function oo(e){const t=e.split(".");if(t.length!==3)throw new yc("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!hy.test(t[n]))throw new yc("JWT not in base64url format");return{header:JSON.parse(Xu(t[0])),payload:JSON.parse(Xu(t[1])),signature:jy(t[2]),raw:{header:t[0],payload:t[1]}}}async function Py(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Ty(e,t){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await e(a);if(!t(a,null,l)){n(l);return}}catch(l){if(!t(a,l)){i(l);return}}})()})}function Ay(e){return("0"+e.toString(16)).substr(-2)}function Dy(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,Ay).join("")}async function Ry(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function $y(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Ry(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Os(e,t,r=!1){const n=Dy();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await qs(e,`${t}-code-verifier`,i);const a=await $y(n);return[a,n===a?"plain":"s256"]}const Iy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ly(e){const t=e.headers.get(gc);if(!t||!t.match(Iy))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Oy(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function My(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Uy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ms(e){if(!Uy.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function co(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Zu(e){return JSON.parse(JSON.stringify(e))}var Fy=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const gs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),By=[502,503,504];async function em(e){var t;if(!Cy(e))throw new xc(gs(e),0);if(By.includes(e.status))throw new xc(gs(e),e.status);let r;try{r=await e.json()}catch(a){throw new J0(gs(a),a)}let n;const i=Ly(e);if(i&&i.getTime()>=Q0["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Yu(gs(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Fr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new Yu(gs(r),e.status,r.weak_password.reasons);throw new py(gs(r),e.status||500,n)}const qy=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function ze(e,t,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[gc]||(a[gc]=Q0["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const l=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await Gy(e,t,r+o,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Gy(e,t,r,n,i,a){const l=qy(t,n,i,a);let o;try{o=await e(r,Object.assign({},l))}catch(c){throw console.error(c),new xc(gs(c),0)}if(o.ok||await em(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await em(c)}}function Sr(e){var t;let r=null;Ky(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Sy(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function tm(e){const t=Sr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Wr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Hy(e){return{data:e,error:null}}function Wy(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=e,l=Fy(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function Vy(e){return e}function Ky(e){return e.access_token&&e.refresh_token&&e.expires_in}const uo=["global","local","others"];var Yy=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};class Qy{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=ef(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=uo[0]){if(uo.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${uo.join(", ")}`);try{return await ze(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await ze(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Wr})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Yy(t,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await ze(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Wy,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(we(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ze(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Wr})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,i,a,l,o,c;try{const d={nextPage:null,lastPage:0,total:0},u=await ze(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Vy});if(u.error)throw u.error;const m=await u.json(),f=(l=u.headers.get("x-total-count"))!==null&&l!==void 0?l:0,p=(c=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(b=>{const j=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(b.split(";")[1].split("=")[1]);d[`${S}Page`]=j}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(we(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Ms(t);try{return await ze(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Wr})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Ms(t);try{return await ze(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Wr})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Ms(t);try{return await ze(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Wr})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Ms(t.userId);try{const{data:r,error:n}=await ze(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(we(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Ms(t.userId),Ms(t.id);try{return{data:await ze(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}}}function rm(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function Jy(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Us={debug:!!(globalThis&&Z0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class tf extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Xy extends tf{}async function Zy(e,t,r){Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Us.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Xy(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Us.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Jy();const ev={url:dy,storageKey:uy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:my,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function sm(e,t,r){return await r()}const Fs={};class ki{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ki.nextInstanceID,ki.nextInstanceID+=1,this.instanceID>0&&ir()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},ev),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Qy({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=ef(i.fetch),this.lock=i.lock||sm,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:ir()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Zy:this.lock=sm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Z0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=rm(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=rm(this.memoryStorage)),ir()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Fs[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Fs[this.storageKey]=Object.assign(Object.assign({},Fs[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Fs[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Fs[this.storageKey]=Object.assign(Object.assign({},Fs[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Y0}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=Ey(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),ir()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),yy(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return we(r)?{error:r}:{error:new J0("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,i;try{const a=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Sr}),{data:l,error:o}=a;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(we(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,n,i;try{let a;if("email"in t){const{email:u,password:m,options:f}=t;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await Os(this.storage,this.storageKey)),a=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:m,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:b},xform:Sr})}else if("phone"in t){const{phone:u,password:m,options:f}=t;a=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:m,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Sr})}else throw new sa("You must provide either an email or phone number and a password");const{data:l,error:o}=a;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(we(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:l,options:o}=t;r=await ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:tm})}else if("phone"in t){const{phone:a,password:l,options:o}=t;r=await ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:tm})}else throw new sa("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ra}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(we(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,i,a,l,o,c,d,u,m,f,p;let b,j;if("message"in t)b=t.message,j=t.signature;else{const{chain:S,wallet:y,statement:h,options:g}=t;let _;if(ir())if(typeof y=="object")_=y;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))_=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=y}const $=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const A=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:$.host,uri:$.href}),h?{statement:h}:null));let M;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")M=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)M=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)b=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),j=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${$.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...h?["",h,""]:[""],"Version: 1",`URI: ${$.href}`,`Issued At: ${(i=(n=g==null?void 0:g.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=g==null?void 0:g.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((d=g==null?void 0:g.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((m=(u=g==null?void 0:g.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||m===void 0)&&m.length?["Resources",...g.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const A=await _.signMessage(new TextEncoder().encode(b),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=A}}try{const{data:S,error:y}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Ny(j)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Sr});if(y)throw y;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new ra}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:y})}catch(S){if(we(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(t){const r=await hs(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:a,error:l}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Sr});if(await Ur(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new ra}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:l})}catch(a){if(we(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:i,access_token:a,nonce:l}=t,o=await ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Sr}),{data:c,error:d}=o;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ra}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(we(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,i,a,l;try{if("email"in t){const{email:o,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Os(this.storage,this.storageKey));const{error:m}=await ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:o,options:c}=t,{data:d,error:u}=await ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new sa("You must provide either an email or phone number.")}catch(o){if(we(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var r,n;try{let i,a;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:o}=await ze(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Sr});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,d=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(we(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var r,n,i;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await Os(this.storage,this.storageKey)),await ze(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Hy})}catch(a){if(we(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Fr;const{error:i}=await ze(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(we(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:a}=t,{error:l}=await ze(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:i,options:a}=t,{data:l,error:o}=await ze(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new sa("You must provide either an email or phone number and a type")}catch(r){if(we(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await hs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<ao:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await hs(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=co()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!l&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Wr}):await this._useSession(async r=>{var n,i,a;const{data:l,error:o}=r;if(o)throw o;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fr}:await ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Wr})})}catch(r){if(we(r))return xy(r)&&(await this._removeSession(),await Ur(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new Fr;const l=i.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await Os(this.storage,this.storageKey));const{data:d,error:u}=await ze(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:Wr});if(u)throw u;return l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Fr;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:l}=oo(t.access_token);if(l.exp&&(n=l.exp,i=n<=r),i){const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(we(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:o}=r;if(o)throw o;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Fr;const{session:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(we(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!ir())throw new na("No browser detected.");if(t.error||t.error_description||t.error_code)throw new na(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Ku("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new na("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ku("No code detected.");const{data:h,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:h.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:l,expires_in:o,expires_at:c,token_type:d}=t;if(!a||!o||!l||!d)throw new na("No session defined in URL");const u=Math.round(Date.now()/1e3),m=parseInt(o);let f=u+m;c&&(f=parseInt(c));const p=f-u;p*1e3<=Bs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${m}s`);const b=f-m;u-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,f,u):u-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,f,u);const{data:j,error:S}=await this._getUser(a);if(S)throw S;const y={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:m,expires_at:f,refresh_token:l,token_type:d,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(n){if(we(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await hs(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{error:a};const l=(n=i.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:o}=await this.admin.signOut(l,t);if(o&&!(gy(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await Ur(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=zy(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Os(this.storage,this.storageKey,!0));try{return await ze(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(we(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var l,o,c,d,u;const{data:m,error:f}=a;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ze(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return ir()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(we(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:l}=r;if(l)throw l;return await ze(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(we(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Ty(async i=>(i>0&&await Py(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await ze(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Sr})),(i,a)=>{const l=200*Math.pow(2,i);return a&&lo(a)&&Date.now()+l-n<Bs})}catch(n){if(this._debug(r,"error",n),we(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),ir()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await hs(this.storage,this.storageKey);if(i&&this.userStorage){let l=await hs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await qs(this.userStorage,this.storageKey+"-user",l)),i.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:co()}else if(i&&!i.user&&!i.user){const l=await hs(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(i.user=l.user,await Ur(this.storage,this.storageKey+"-user"),await qs(this.storage,this.storageKey,i)):i.user=co()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<ao;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${ao}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),lo(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:o}=await this._getUser(i.access_token);!o&&(l!=null&&l.user)?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Fr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new bl;const{data:a,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!a.session)throw new Fr;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={session:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(i,"error",a),we(a)){const l={session:null,error:a};return lo(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(l),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await qs(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=Zu(i);await qs(this.storage,this.storageKey,a)}else{const i=Zu(r);await qs(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Ur(this.storage,this.storageKey),await Ur(this.storage,this.storageKey+"-code-verifier"),await Ur(this.storage,this.storageKey+"-user"),this.userStorage&&await Ur(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ir()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Bs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/Bs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Bs}ms, refresh threshold is ${pc} ticks`),i<=pc&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof tf)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ir()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,l]=await Os(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(o.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await ze(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(we(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:l}=r;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await ze(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(we(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{data:null,error:a};const{data:l,error:o}=await ze(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(r){if(we(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await ze(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(we(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],i=n.filter(l=>l.factor_type==="totp"&&l.status==="verified"),a=n.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:n,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:i},error:a}=t;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=oo(i.access_token);let o=null;l.aal&&(o=l.aal);let c=o;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=l.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+fy>i)return n;const{data:a,error:l}=await ze(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:b}=await this.getSession();if(b||!p.session)return{data:null,error:b};n=p.session.access_token}const{header:i,payload:a,signature:l,raw:{header:o,payload:c}}=oo(n);r!=null&&r.allowExpired||Oy(a.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:a,header:i,signature:l},error:null}}const u=My(i.alg),m=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,m,l,_y(`${o}.${c}`)))throw new yc("Invalid JWT signature");return{data:{claims:a,header:i,signature:l},error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}}}ki.nextInstanceID=0;const tv=ki;class rv extends tv{constructor(t){super(t)}}var sv=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};class nv{constructor(t,r,n){var i,a,l;this.supabaseUrl=t,this.supabaseKey=r;const o=cy(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,d={db:Zx,realtime:ty,auth:Object.assign(Object.assign({},ey),{storageKey:c}),global:Xx},u=oy(n??{},d);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=u.global.headers)!==null&&a!==void 0?a:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=u.auth)!==null&&l!==void 0?l:{},this.headers,u.global.fetch),this.fetch=iy(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new vx(new URL("rest/v1",o).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new Yx(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Jg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return sv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,storageKey:l,flowType:o,lock:c,debug:d},u,m){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rv({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:l,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,flowType:o,lock:c,debug:d,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Ix(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const iv=(e,t,r)=>new nv(e,t,r);function av(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}av()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const lv="https://soewlqmskqmpycaevhoc.supabase.co",ov="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNvZXdscW1za3FtcHljYWV2aG9jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNDExODksImV4cCI6MjA3ODYxNzE4OX0.0CAOUF-SVUIx5udgzNBkrggovWaafHWYFN1j-HzYTFU",w=iv(lv,ov,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}});async function cv(){try{const e=["https://api.ipify.org?format=json","https://api.my-ip.io/ip.json","https://ipapi.co/json/"];for(const t of e)try{const r=await fetch(t,{method:"GET",headers:{Accept:"application/json"}});if(r.ok){const n=await r.json(),i=n.ip||n.IP||null;if(i)return console.log(" IP detected:",i),i}}catch(r){console.warn("Failed to get IP from service:",t,r);continue}return console.warn(" Could not detect IP from any service"),null}catch(e){return console.error("Error getting user IP:",e),null}}async function dv(e){try{const{data:t,error:r}=await w.from("profiles").select("id, full_name, created_at").eq("signup_ip",e);if(r)return console.error("Error checking IP:",r),{exists:!1,count:0};const n=(t==null?void 0:t.length)||0;return console.log(` IP ${e} has ${n} existing account(s)`),{exists:n>0,count:n}}catch(t){return console.error("Error in checkIPExists:",t),{exists:!1,count:0}}}async function uv(e,t){try{const{error:r}=await w.from("profiles").update({signup_ip:t}).eq("id",e);return r?(console.error("Error saving IP:",r),!1):(console.log(" IP saved for user:",e),!0)}catch(r){return console.error("Error in saveUserIP:",r),!1}}const wl=()=>typeof window.Capacitor<"u",mv=()=>wl()?!0:"Notification"in window&&"serviceWorker"in navigator,hv=async(e,t,r)=>{try{const n={userAgent:navigator.userAgent,language:navigator.language,platform:navigator.platform,registeredAt:new Date().toISOString()},{error:i}=await w.from("device_tokens").upsert({user_id:e,token:t,platform:r,device_info:n,is_active:!0,updated_at:new Date().toISOString()},{onConflict:"user_id,token"});return i?(console.error("Error registering device token:",i),!1):(console.log("Device token registered successfully"),!0)}catch(n){return console.error("Error registering device token:",n),!1}},fv=async e=>{if(wl())try{const{PushNotifications:t}=await Sn(async()=>{const{PushNotifications:n}=await import("./index.BZfLb9xZ.js");return{PushNotifications:n}},[]);await t.addListener("registration",async n=>{var a;console.log("Push registration success, token:",n.value);const i=((a=window.Capacitor)==null?void 0:a.getPlatform())==="ios"?"ios":"android";await hv(e,n.value,i)}),await t.addListener("registrationError",n=>{console.error("Push registration error:",n)}),await t.addListener("pushNotificationReceived",n=>{console.log("Push notification received:",n)}),await t.addListener("pushNotificationActionPerformed",n=>{console.log("Push notification action:",n);const i=n.notification.data;i&&gv(i)}),(await t.requestPermissions()).receive==="granted"&&await t.register()}catch(t){console.error("Error initializing native push:",t)}},pv=async e=>{if(!(wl()||!mv()))try{const t=await navigator.serviceWorker.register("/firebase-messaging-sw.js");if(console.log("Service Worker registered:",t),await Notification.requestPermission()!=="granted"){console.log("Push notification permission denied");return}console.log("Web push initialized, waiting for Firebase configuration")}catch(t){console.error("Error initializing web push:",t)}},gv=e=>{switch(e.type){case"message":window.location.href="/messages";break;case"like":case"comment":e.dream_id?window.location.href=`/social?dream=${e.dream_id}`:window.location.href="/social";break;case"follow":case"follow_request":e.actor_id||e.requester_id?window.location.href=`/profile/${e.actor_id||e.requester_id}`:window.location.href="/social";break;case"dream_completed":window.location.href="/library";break;case"trial_expired":window.location.href="/pricing";break;default:window.location.href="/"}},xv=async e=>{e&&(wl()?await fv(e):await pv())},rf=x.createContext(void 0);function yv({children:e}){const[t,r]=x.useState(null),[n,i]=x.useState(!0);x.useEffect(()=>{w.auth.getSession().then(async({data:{session:u}})=>{u!=null&&u.user?(r(u.user),a(u.user.id)):r(null),i(!1)}).catch(()=>{i(!1)});const{data:{subscription:d}}=w.auth.onAuthStateChange(async(u,m)=>{m!=null&&m.user?(r(m.user),a(m.user.id),xv(m.user.id).catch(console.error)):r(null),i(!1)});return()=>d.unsubscribe()},[]);const a=async d=>{try{const{error:u}=await w.rpc("check_trial_expiration",{p_user_id:d});u&&console.error("Error checking trial expiration:",u)}catch(u){console.error("Error in checkTrialExpiration:",u)}},l=async(d,u)=>{try{const{error:m}=await w.auth.signInWithPassword({email:d,password:u});return m?{error:new Error(m.message.includes("Invalid login credentials")||m.message.includes("Email not confirmed")?"Geersiz e-posta veya ifre. Ltfen tekrar deneyin.":m.message.includes("Email not confirmed")?"E-posta adresiniz henz onaylanmam. Ltfen e-postanz kontrol edin.":"Giri yaplamad. Bilgilerinizi kontrol edip tekrar deneyin.")}:{error:null}}catch{return{error:new Error("Giri yaplamad. Ltfen daha sonra tekrar deneyin.")}}},o=async(d,u,m,f)=>{try{if(console.log("Starting signup process for:",{email:d,fullName:m,username:f}),!d||!u||!m||!f)throw new Error("Tm alanlar doldurun.");if(u.length<6)throw new Error("ifre en az 6 karakter olmaldr.");if(f.length<3)throw new Error("Kullanc ad en az 3 karakter olmaldr.");console.log(" Checking IP address...");const p=await cv();if(p){if(console.log(" User IP:",p),(await dv(p)).exists)throw console.warn(" IP already has an account:",p),new Error("Bu cihazdan zaten bir hesap oluturulmu. Ltfen giri yapn veya destek ekibiyle iletiime gein.");console.log(" IP check passed")}else console.warn(" Could not detect IP - proceeding with signup");console.log(" Checking if username is available:",f);const{data:b,error:j}=await w.from("profiles").select("id").ilike("username",f).maybeSingle();if(j&&console.error("Username check error:",j),b)throw console.warn(" Username already taken:",f),new Error("Bu kullanc ad zaten alnm. Ltfen farkl bir kullanc ad sein.");console.log(" Username is available:",f),console.log("Attempting Supabase auth.signUp...");const{data:S,error:y}=await w.auth.signUp({email:d,password:u,options:{emailRedirectTo:`${window.location.origin}`,data:{full_name:m,username:f}}});if(console.log("SignUp response:",{user:S!=null&&S.user?{id:S.user.id,email:S.user.email}:null,session:S!=null&&S.session?"exists":"null",error:y?{message:y.message,status:y.status}:null}),y)throw console.error("SignUp error:",y),console.error("Error details:",{message:y.message,status:y.status,statusText:y.statusText,code:y.code||"no-code"}),y.message.includes("already registered")||y.message.includes("already exists")||y.message.includes("User already registered")?new Error("Bu e-posta adresi zaten kaytl. Ltfen giri yapn veya farkl bir e-posta kullann."):y.message.includes("Password should be at least")?new Error("ifre en az 6 karakter olmaldr."):y.message.includes("Email rate limit exceeded")?new Error("ok fazla kayt denemesi yapld. Ltfen birka dakika bekleyip tekrar deneyin."):y.message.includes("Invalid email")?new Error("Geersiz e-posta adresi. Ltfen geerli bir e-posta girin."):y.message.includes("Signup is disabled")?new Error("Kayt ilemi u anda devre d. Ltfen daha sonra tekrar deneyin."):y.message.includes("Email confirmations are required")?new Error('E-posta onay gerekli. Ltfen Supabase ayarlarnda "Enable email confirmations" seeneini kapatn.'):y.message.includes("rate limit")?new Error("ok fazla kayt denemesi. Ltfen birka dakika bekleyip tekrar deneyin."):y.message.includes("Database error saving new user")?new Error("Veritaban hatas: Supabase Dashboard  SQL Editor  Migration dosyalarn altrn. Profiles tablosu ve RLS politikalar eksik olabilir."):(console.error("Unhandled signup error:",y.message),new Error(`Hesap oluturulamad: ${y.message}`));if(S.user){console.log("User created successfully:",S.user.id),console.log("Skipping profile creation - using basic auth only"),p&&(console.log(" Saving IP to profile..."),await uv(S.user.id,p)),console.log(" Assigning free plan to new user...");try{const{error:h}=await w.rpc("update_subscription_plan",{p_user_id:S.user.id,p_plan_type:"free"});h?console.error("Error assigning free plan:",h):console.log(" Free plan assigned successfully")}catch(h){console.error("Exception assigning free plan:",h)}}return S.user&&!S.session?{error:null}:{error:null}}catch(p){return{error:p instanceof Error?p:new Error("Hesap oluturulamad. Ltfen tekrar deneyin.")}}},c=async()=>{try{await w.auth.signOut({scope:"global"}),r(null),localStorage.clear(),sessionStorage.clear(),window.location.replace("/signin")}catch(d){console.error("Sign out exception:",d),r(null),localStorage.clear(),sessionStorage.clear(),window.location.replace("/signin")}};return s.jsx(rf.Provider,{value:{user:t,loading:n,signIn:l,signUp:o,signOut:c},children:e})}function gt(){const e=x.useContext(rf);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const vv={en:{nav:{home:"Home",about:"About",social:"Social",analyze:"Analyze",library:"Library",generator:"Dream Workshop",contact:"Contact",dashboard:"Dashboard",buy:"Buy",freeTrial:"7-Day Free Trial",signIn:"Sign In",signOut:"Sign Out",messages:"Messages",settings:"Settings"},generator:{title:"Dream Workshop",subtitle:"Transform and design your dream visuals exactly as you imagine",premiumOnly:"Premium Feature",upgradeToPremium:"Upgrade to Premium",lockMessage:"Unlock the Dream Workshop and design your dream visuals exactly as you imagine. Exclusive to Premium members!",selectImage:"Select a Dream Image",selectImageDesc:"Choose an image from your library to transform",noImages:"No dream images found",analyzeFirst:"Analyze dreams with visual mode to get images",promptLabel:"Describe your transformation",promptPlaceholder:"Example: Make it more colorful, add mountains in the background, transform into cyberpunk style...",generateButton:"Generate",generating:"Generating...",myGenerations:"My Generations",generatedAt:"Generated",download:"Download",delete:"Delete",makePublic:"Make Public",makePrivate:"Make Private",deleteConfirm:"Are you sure you want to delete this generation?",empty:"No generations yet",startGenerating:"Start creating amazing images",processing:"Processing...",pleaseWait:"Please wait"},home:{title:"Submirra",subtitle:"Unlock the Secrets of Your Subconscious",description:"Discover the hidden meanings in your dreams. Submirra analyzes your dreams and creates beautiful visualizations to help you understand your subconscious mind.",cta:"Analyze Your Dream",getStarted:"Get Started",learnMore:"Learn More",feature1Title:"Deep Analysis",feature1Desc:"Get detailed insights about your dreams. We analyze symbols, emotions, and patterns to help you understand what your dreams mean.",feature1Details:"Deep Analysis  Symbols  Emotions  Patterns",feature2Title:"Visual Generation",feature2Desc:"See your dreams come to life with beautiful images. We create unique visualizations that capture the feeling and meaning of your dreams.",feature2Details:"Dream Images  Beautiful Art  High Quality  Personalized",feature3Title:"Personal Library",feature3Desc:"Keep all your dreams in one place. Save your analyses and images, track patterns, and see how your dreams change over time.",feature3Details:"Dream Journal  Save Dreams  Statistics  Your History",feature4Title:"Social Community",feature4Desc:"Join a community of dream explorers. Share your dreams, see what others dream about, and connect with people who love exploring dreams.",feature4Details:"Community  Share Dreams  See Others  Connect"},about:{title:"About Submirra",subtitle:"Bridging the conscious and subconscious",missionTitle:"Our Mission",missionDesc:"We help you understand your dreams. We analyze your dreams to show you what they might mean and how they connect to your feelings and thoughts.",howItWorksTitle:"How It Works",howItWorksDesc:"It is simple and easy:",step1:"Write your dream (up to 5000 characters)",step2:"We analyze your dream",step3:"Get a detailed analysis of what it means",step4:"Receive a beautiful image of your dream",step5:"Save everything in your personal library",privacyTitle:"Privacy & Security",privacyDesc:"Your dreams are private and personal. We keep them safe and secure. Only you can see your dreams unless you choose to share them. We never share your data with anyone else.",socialTitle:"Social Community",socialDesc:"Share your dreams, like and comment on others' posts, and connect through direct messages. To protect your security and the site's reputation, you can report inappropriate users - reporting problematic behavior is important for everyone's safety.",quote:"Our website is currently under construction. Your valuable feedback and suggestions are very important to us as we work to provide you with the best experience."},analyze:{title:"Analyze Your Dream",subtitle:"Write your dream and discover what it means",label:"Tell us about your dream",placeholder:"I was walking through a forest filled with glowing trees...",characters:"characters",submit:"Analyze Dream",saving:"Saving...",analysisTitle:"Analysis",visualizationTitle:"Dream Visualization",analyzeAnother:"Analyze Another Dream",confirmationMessage:"Your dream has been saved and will be analyzed shortly.",savedMessage:"Your dream has been saved and will be analyzed shortly.",trialBadge:"7-Day Free Trial",privacyLabel:"Privacy",privacyPublic:"Public",privacyPrivate:"Private",privacyPublicDesc:"Share with the community",privacyPrivateDesc:"Only visible to you",pendingMessage:"Your dream will be analyzed and visualized shortly. Please wait. Once completed, you will receive a notification. You can check the status of your dream in your library.",goToLibrary:"Go to Library",processingTitle:"Dream Analysis in Progress",pendingDreamWarning:"Please wait for your current dream analysis to complete first. You can analyze a new dream after the current analysis is finished.",dailyLimitExceeded:"Your daily analysis limit has been reached. You have used {used}/{limit} analyses today. Limits will reset in 24 hours.",analysisTypeLabel:"Analysis Type",analysisTypeBasic:"Basic Analysis",analysisTypeAdvanced:"Advanced Analysis",analysisTypeVisual:"Visual Analysis",analysisTypeVideo:"Video Analysis",analysisTypeBasicDesc:"Basic dream meaning",analysisTypeAdvancedDesc:"Detailed dream analysis",analysisTypeVisualDesc:"With dream visualization",analysisTypeVideoDesc:"Animated dream video",comingSoon:"Coming Soon"},library:{title:"Your Dream Library",subtitle:"Explore your collection of analyzed dreams and visualizations",empty:"Your library is empty",analyzeFirst:"Analyze Your First Dream",dreamEntry:"Dream Entry",yourDream:"Your Dream",analysis:"Analysis",processingMessage:"Analysis is being processed",creating:"Creating...",searchPlaceholder:"Search your dreams...",noDreamsFound:"No dreams found matching your search",download:"Download",makePrivate:"Make Private",makePublic:"Make Public",addToFavorites:"Add to Favorites",removeFromFavorites:"Remove from Favorites",delete:"Delete",downloadSuccess:"Image downloaded successfully",downloadError:"Failed to download image",imageNotFound:"Image not found",privacyUpdated:"Privacy setting updated",privacyUpdateError:"Failed to update privacy setting",totalDreams:"Total Dreams",publicDreams:"Public Dreams",privateDreams:"Private Dreams",maxDreamLimit:"Max Dream Limit",all:"All",favorites:"Favorites",completed:"Completed",pending:"Pending"},social:{title:"Social Feed",subtitle:"Explore public dream analyses from the community",searchDreams:"Search Dreams",searchUsers:"Search Users",searchDreamsPlaceholder:"Search dreams...",searchUsersPlaceholder:"Search users by name or username...",all:"All",following:"Following",visualAnalyses:"Visual Analyses",textAnalyses:"Text Analyses",generators:"Dream Gallery",generatorsPremiumOnly:"Premium Feature - Upgrade to view",upgradeForGenerators:"Upgrade to Premium",noGenerations:"No creations yet",recent:"Recent",popular:"Popular",trending:"Trending",pending:"Pending",noDreams:"No public dreams yet",shareFirst:"Share Your First Dream",likes:"likes",like:"like",comments:"Comments",comment:"comment",viewAll:"View all",noComments:"No comments yet",writeComment:"Write a comment...",signInToComment:"Sign in to comment",signIn:"Sign In",justNow:"Just now",minutesAgo:"m ago",hoursAgo:"h ago",daysAgo:"d ago",noUsersFound:"No users found",anonymous:"Anonymous",checkOutDream:"Check out this dream",linkCopied:"Link copied to clipboard",deleteDream:"Delete your dream",deleteConfirm:"Are you sure you want to delete this dream? This will also delete all likes and comments.",dreamDeleted:"Dream deleted successfully",deleteFailed:"Failed to delete dream. You can only delete your own dreams.",commentAdded:"Comment added",commentFailed:"Failed to add comment",commentDeleted:"Comment deleted",commentDeleteFailed:"Failed to delete comment",deleteComment:"Delete comment",endOfFeed:"You've reached the end of the feed",loadingMore:"Loading more...",previousImage:"Previous Image",nextImage:"Next Image",close:"Close",noPlanMessage:"You need at least a free plan to view the social feed"},profile:{title:"Profile",manageAccount:"Manage your account settings",userProfile:"User Profile",changeAvatar:"Change avatar",uploading:"Uploading...",publicDreams:"Public Dreams",likesReceived:"Likes Received",comments:"Comments",followers:"Followers",following:"Following",email:"Email",memberSince:"Member Since",editProfile:"Edit Profile",saveChanges:"Save Changes",cancel:"Cancel",follow:"Follow",followingButton:"Following",publicDreamsTitle:"Public Dreams",noPublicDreams:"No public dreams yet",profileSaved:"Profile saved successfully",profileSaveFailed:"Failed to save profile",avatarUploaded:"Avatar uploaded successfully",avatarUploadFailed:"Failed to upload avatar",followSuccess:"Now following this user",unfollowSuccess:"Unfollowed this user",followFailed:"Failed to update follow status",bioPlaceholder:"Write a bio...",message:"Message",reportCount:"Reports Received",reports:"reports",dangerLow:"Low Risk",dangerMedium:"Medium Risk",dangerHigh:"High Risk",dangerCritical:"Critical Risk",noFollowers:"No followers yet",noFollowing:"Not following anyone yet",developer:"Developer"},dashboard:{title:"Dashboard",subtitle:"Overview of your dream analysis journey",totalDreams:"Total Dreams",completedAnalyses:"Completed Analyses",pendingAnalyses:"Pending Analyses",analyzeNewDream:"Analyze New Dream",analyzeNewDreamDesc:"Start analyzing a new dream to discover its hidden meanings",viewLibrary:"View Library",viewLibraryDesc:"Browse your complete collection of analyzed dreams",recentDreams:"Recent Dreams",viewAll:"View All",noDreams:"No dreams yet",analyzeFirstDream:"Analyze Your First Dream"},contact:{title:"Contact Us",subtitle:"Have questions? We'd love to hear from you",emailSupport:"Email Support",liveChat:"Live Chat",available:"Available 24/7 for assistance",sendMessage:"Send us a Message",messageSubmirra:"Message Submirra",viaWebsite:"Via Website",pleaseSignInToMessage:"Please sign in to message Submirra.",name:"Name",email:"Email",subject:"Subject",message:"Message",send:"Send Message",thankYou:"Thank you for your message! We'll get back to you soon.",namePlaceholder:"Your name",emailPlaceholder:"your@email.com",subjectPlaceholder:"What's this about?",messagePlaceholder:"Tell us more..."},auth:{welcomeBack:"Welcome Back",createAccount:"Create Account",continueExploring:"Continue exploring your dreams",startJourney:"Start your journey into the subconscious",signIn:"Sign In",signUp:"Sign Up",fullName:"Your Name",email:"Email",password:"Password",orContinueWith:"Or continue with",googleSignIn:"Sign in with Google",enterFullName:"Enter your full name",enterEmail:"your@email.com",enterPassword:"Enter your password",creatingAccount:"Creating account...",signingIn:"Signing in...",checkEmail:"Check your email",confirmationSent:"We sent you a confirmation link. Please check your email to verify your account.",validationRequired:"Please fill out this field",validationEmail:"Please enter a valid email address",emailAlreadyExists:"This email is already registered. Please sign in or use a different email.",invalidCredentials:"Invalid email or password. Please try again.",acceptTerms:"I accept the Terms of Service",acceptPrivacy:"I accept the Privacy Policy",acceptAge:"I confirm that I am 18 years of age or older",mustAcceptTerms:"You must accept the Terms of Service to create an account",mustAcceptPrivacy:"You must accept the Privacy Policy to create an account",mustAcceptAge:"You must confirm that you are 18 years of age or older",readTerms:"Read Terms of Service",readPrivacy:"Read Privacy Policy"},settings:{title:"Settings",blockedUsers:"Blocked Users",privacy:"Privacy",notifications:"Notifications",blockedUsersDesc:"Users you've blocked won't be able to send you messages or interact with your content.",noBlockedUsers:"No blocked users",unblock:"Unblock",unblockConfirm:"Are you sure you want to unblock",unblockSuccess:"has been unblocked",privacyDesc:"Control who can see your content and interact with you.",profileVisibility:"Profile Visibility",allowMessagesFrom:"Allow Messages From",public:"Public",private:"Private",everyone:"Everyone",followingOnly:"Following Only",notificationsDesc:"Choose what notifications you want to receive.",likesOnDreams:"Likes on Dreams",comments:"Comments",newFollowers:"New Followers",directMessages:"Direct Messages",favorites:"Favorites",favoritesDesc:"Your favorite friends. Their dreams will be shown with priority.",noFavorites:"No favorite friends yet",remove:"Remove",showReadReceipts:"Show Read Receipts",showReadReceiptsDesc:"Let others know when you've seen their messages",readReceiptsEnabled:"Read receipts enabled",readReceiptsDisabled:"Read receipts disabled",readReceiptsUpdateError:"Failed to update read receipts setting",deleteAccount:"Delete Account",deleteAccountDesc:"Permanently delete your account and all associated data.",deleteAccountButton:"Delete My Account",deleteAccountConfirm:"Are you sure you want to delete your account? This action cannot be undone. All your dreams, data, and subscription will be permanently deleted.",deleteAccountSuccess:"Your account has been deleted successfully.",deleteAccountError:"Failed to delete account. Please try again."},messages:{title:"Messages",searchPlaceholder:"Search users...",noMessages:"No messages yet",searchToStart:"Search for users to start chatting",typePlaceholder:"Type a message...",loading:"Loading...",loadingUser:"Loading user...",searchResults:"Search Results",searching:"Searching...",deleteConversation:"Delete Conversation",reply:"Reply",replyPlaceholder:"Type your reply..."},notifications:{title:"Notifications",deleteAll:"Delete All",deleteAllConfirm:"Are you sure you want to delete all notifications?",deleteAllSuccess:"All notifications deleted",deleteAllError:"Failed to delete all notifications",markAllRead:"Mark all read",markAllReadSuccess:"All notifications marked as read",markAllReadError:"Failed to mark all as read",deleteError:"Failed to delete notification",noNotifications:"No notifications yet",dreamCompleted:"Your dream analysis is ready! Click to view in your library.",dreamCompletedToast:"Your dream analysis is ready!",trialExpired:"Your 7-day free trial has expired. Upgrade to continue using Submirra!",someoneLiked:"liked your dream",someoneCommented:"commented on your dream",someoneFollowed:"started following you",someone:"Someone",newNotification:"New notification",justNow:"Just now",minutesAgo:"m ago",hoursAgo:"h ago",daysAgo:"d ago"},pricing:{title:"Simple, Transparent Pricing",subtitle:"Choose the perfect plan for your dream analysis journey",freePlan:{title:"Free Plan",price:"Free",description:"Perfect for unlimited basic dream analysis",feature1:"Unlimited basic dream analysis",feature2:"30 dreams storage limit in library",feature3:"Access to social features",cta:"Get Free Plan"},freeTrial:{title:"Free Trial",price:"Free",description:"Perfect for exploring what Submirra can do",feature1:"7 days of access",feature2:"7 visual dream analyses total",feature3:"7 days of advanced analysis access",feature4:"Beautiful visualizations for your dreams",cta:"Start Free Trial",signUp:"Sign Up Free",alreadyUsed:"Already Used"},standard:{title:"Standard",price:"$3",period:"month",description:"Unlock deeper insights into your dreams with advanced analysis",feature1:"Access to social features",feature2:"30 dreams storage limit in library",feature3:"Advanced analysis unlocked",feature4:"Unlimited detailed and advanced analysis",feature5:"Visual analysis unlocked",feature6:"3 visual analyses per day",feature7:"1 image per analysis",cta:"Get Standard"},premium:{badge:"Most Popular",title:"Premium",price:"$9",period:"month",description:"Transform your dreams into art with multiple visuals and priority analysis",feature1:"Access to social features",feature2:"60 dreams storage limit in library",feature3:"Advanced analysis unlocked",feature4:"Unlimited, advanced and priority analysis",feature5:"Visual analysis unlocked",feature6:"5 visual analyses per day",feature7:"3 images per analysis",feature8:"Dream Workshop unlocks",feature9:"Design your dream visuals as you imagine",feature10:"Dream gallery unlocks in social",cta:"Go Premium"},whySubmirra:{title:"Why Choose Submirra?",description:"Submirra uses cutting-edge analysis technology to decode your dreams, revealing hidden meanings about your subconscious mind, emotional state, and inner desires. Each analysis comes with unique surreal visualizations that capture the essence of your dream."},ruyagezer:{title:"Dreamwalker",badge:"Coming Soon",popularBadge:"Most Popular",description:"Experience the most comprehensive dream analysis with unlimited access to all premium features, advanced visualizations, and exclusive video analysis capabilities.",feature1:"Access to social features",feature2:"Unlimited dreams storage limit in library",feature3:"Advanced analysis unlocked",feature4:"Unlimited, advanced and priority analysis",feature5:"Visual analysis unlocked",feature6:"7 visual analyses per day",feature7:"3 images per analysis",feature8:"Dream Workshop unlocks",feature9:"Design your dream visuals as you imagine",feature10:"Video analysis unlocked",feature11:"1 video analysis per day",feature12:"Dream gallery unlocks in social"}},trial:{activateTitle:"Activate Your 7-Day Free Trial",activateDesc:"Experience the full power of Submirra with unlimited access for 7 days",activateNow:"Activate Free Trial",activating:"Activating...",activated:"Trial Activated!",activatedDesc:"Your 7-day free trial has been successfully activated.",enjoy3Days:"Enjoy 7 days of unlimited dream analysis and insights!",alreadyUsed:"Trial Already Used",alreadyUsedDesc:"You have already used your free trial. Upgrade to a paid plan to continue enjoying Submirra.",viewPlans:"View Plans",whatsIncluded:"What's Included:",feature1:"7 days of full access to all features",feature2:"7 advanced/visual dream analyses total",feature3:"Beautiful visualizations for your dreams",duration:"Duration",threeDays:"7 Days",analyses:"Analyses",threeAnalyses:"7 Dreams",features:"Features",fullAccess:"Full Access",startAnalyzing:"Start Analyzing Dreams",trialExpired:"Trial Expired",trialExpiredDesc:"Your 7-day free trial has expired. Upgrade to continue.",ipAlreadyUsed:"This IP address has already used a free trial. Each person can only get one free trial.",ipCheckFailed:"Could not verify eligibility. Please try again."},footer:{termsOfService:"Terms of Service",privacyPolicy:"Privacy Policy",feedback:"Feedback"},terms:{title:"Terms of Service",lastUpdated:"Last updated: December 2024",acceptanceTitle:"1. Acceptance of Terms",acceptanceText:"Welcome to Submirra! By accessing and using our platform, you agree to follow these terms. We're committed to providing you with a safe and enjoyable experience. If you have any concerns, please contact us.",serviceTitle:"2. Description of Service",serviceText:"Submirra provides an advanced dream analysis and visualization platform. Our services include:",serviceFeature1:"Advanced dream analysis and interpretation",serviceFeature2:"Dream visualization generation",serviceFeature3:"Social sharing and community features",userAccountTitle:"3. User Accounts",userAccountText:"To access certain features, you must register for an account. You agree to:",userAccountFeature1:"Provide accurate and complete information",userAccountFeature2:"Maintain the security of your account credentials",userAccountFeature3:"Notify us immediately of any unauthorized use",contentTitle:"4. User Content",contentText:"You retain ownership of content you submit. By submitting content, you grant us a license to:",contentFeature1:"Use, display, and distribute your content on the platform",contentFeature2:"Process and analyze your dreams using our advanced technology",contentFeature3:"Generate visualizations based on your dream content",privacyTitle:"5. Privacy",privacyText:"Your privacy is important to us. Please review our Privacy Policy, which also governs your use of the service, to understand our practices.",paymentTitle:"6. Payment and Subscription",paymentText:"We offer flexible subscription plans to suit your needs:",paymentFeature1:"Monthly subscriptions can be cancelled at any time",paymentFeature2:"You'll be notified 7 days before your subscription renews",paymentFeature3:"We offer a 7-day free trial so you can explore all features risk-free",terminationTitle:"7. Account Termination",terminationText:"We may suspend accounts that violate our community guidelines or engage in harmful behavior. We always aim to resolve issues fairly and will notify you if any action is taken on your account.",contactTitle:"8. Contact Information",contactText:"If you have any questions about these Terms of Service, please",contactLink:"contact us"},feedback:{title:"Feedback",subtitle:"We value your opinion! Help us improve Submirra",categoryLabel:"Category",categoryBug:"Bug Report",categoryFeature:"Feature Request",categoryImprovement:"Improvement Suggestion",categoryOther:"Other",messageLabel:"Your Feedback",placeholder:"Tell us what you think...",submitButton:"Submit Feedback",submitting:"Submitting...",successMessage:"Thank you for your feedback!",errorMessage:"Failed to submit feedback. Please try again.",emptyError:"Please enter your feedback before submitting.",thankYou:"Thank You!",thankYouMessage:"Your feedback has been received and will be reviewed by our team.",privacyNote:"Your feedback is private and will only be viewed by the Submirra team."},privacy:{title:"Privacy Policy",lastUpdated:"Last updated: December 2024",introductionTitle:"1. Introduction",introductionText:"At Submirra, we take your privacy seriously. This Privacy Policy explains how we collect, use, store, and protect your personal information when you use our dream analysis platform. We are committed to maintaining the highest standards of data protection and transparency.",dataCollectionTitle:"2. Information We Collect",dataCollectionText:"We collect information that is necessary to provide you with our services:",dataCollectionItem1:"Account information: email address and username",dataCollectionItem2:"Profile information: full name, bio, and avatar (optional)",dataCollectionItem3:"Dream content: your dream descriptions and analysis results",dataCollectionItem4:"Usage data: subscription information, preferences, and interaction history",dataUsageTitle:"3. How We Use Your Information",dataUsageText:"We use your information solely to provide and improve our services:",dataUsageItem1:"To process and analyze your dreams using our advanced technology",dataUsageItem2:"To generate personalized visualizations based on your dream content",dataUsageItem3:"To manage your account, subscriptions, and preferences",dataUsageItem4:"To communicate with you about your account, updates, and important notices",dataStorageTitle:"4. Data Storage and Retention",dataStorageText:"Your data is stored securely with industry-standard encryption on secure servers. We retain your information for as long as your account is active or as needed to provide our services. You can delete your account and all associated data at any time from your profile settings.",dataSecurityTitle:"5. Data Security",dataSecurityText:"We implement robust security measures to protect your information:",dataSecurityItem1:"All data is encrypted in transit and at rest using advanced encryption protocols",dataSecurityItem2:"Access to your data is restricted to authorized personnel only",dataSecurityItem3:"We regularly monitor our systems for security vulnerabilities and update our security practices",userRightsTitle:"6. Your Rights and Choices",userRightsText:"You have full control over your personal information:",userRightsItem1:"Access: You can view and download your data at any time",userRightsItem2:"Modify: You can update your profile information and username",userRightsItem3:"Delete: You can delete your account and all associated data permanently",userRightsItem4:"Privacy: You can control the visibility of your dreams (public or private)",contactTitle:"8. Contact Us",contactText:"If you have any questions, concerns, or requests regarding this Privacy Policy or your personal information, please",contactLink:"contact us"}},tr:{nav:{home:"Ana Sayfa",about:"Hakknda",social:"Sosyal",analyze:"Analiz",library:"Ktphane",generator:"Rya Atlyesi",contact:"letiim",dashboard:"Kontrol Paneli",buy:"Satn Al",freeTrial:"7 Gnlk cretsiz Deneme",signIn:"Giri Yap",signOut:"k Yap",messages:"Mesajlar",settings:"Ayarlar"},generator:{title:"Rya Atlyesi",subtitle:"Rya grsellerinizi hayal ettiiniz gibi dntrn ve tasarlayn",premiumOnly:"Premium zellik",upgradeToPremium:"Premium'a Ykselt",lockMessage:"Rya Atlyesi'nin kilidini an ve rya grsellerinizi hayal ettiiniz gibi tasarlayn. Premium yelere zel!",selectImage:"Bir Rya Grseli Sein",selectImageDesc:"Ktphanenizden dntrmek iin bir grsel sein",noImages:"Rya grseli bulunamad",analyzeFirst:"Grsel almak iin grsel moduyla rya analiz edin",promptLabel:"Dnm tanmlayn",promptPlaceholder:"rnek: Daha renkli yap, arka plana dalar ekle, cyberpunk stile dntr...",generateButton:"Olutur",generating:"Oluturuluyor...",myGenerations:"Oluturduum Grseller",generatedAt:"Oluturuldu",download:"ndir",delete:"Sil",makePublic:"Herkese A",makePrivate:"Gizle",deleteConfirm:"Bu grseli silmek istediinizden emin misiniz?",empty:"Henz grsel oluturulmam",startGenerating:"Harika grseller oluturmaya balayn",processing:"leniyor...",pleaseWait:"Ltfen bekleyin"},home:{title:"Submirra",subtitle:"Bilinaltnzn Srlarn Kefedin",description:"Ryalarnzdaki gizli anlamlar kefedin. Submirra ryalarnz analiz eder ve gzel grseller oluturarak bilinaltnz anlamanza yardmc olur.",cta:"Ryan Analiz Et",getStarted:"Balayn",learnMore:"Daha Fazla Bilgi",feature1Title:"Derin Analiz",feature1Desc:"Ryalarnz hakknda detayl bilgi aln. Sembolleri, duygular ve kalplar analiz ederek ryalarnzn ne anlama geldiini anlamanza yardmc oluyoruz.",feature1Details:"Derin Analiz  Semboller  Duygular  Kalplar",feature2Title:"Grsel retimi",feature2Desc:"Ryalarnz gzel grsellerle grn. Ryalarnzn hissini ve anlamn yakalayan zel grseller oluturuyoruz.",feature2Details:"Rya Grselleri  Gzel Sanat  Yksek Kalite  Kiiselletirilmi",feature3Title:"Kiisel Ktphane",feature3Desc:"Tm ryalarnz tek bir yerde saklayn. Analizlerinizi ve grsellerinizi kaydedin, kalplar takip edin ve ryalarnzn zamanla nasl deitiini grn.",feature3Details:"Rya Gnl  Rya Kaydet  statistikler  Gemiiniz",feature4Title:"Sosyal Topluluk",feature4Desc:"Rya keifileri topluluuna katln. Ryalarnz paylan, bakalarnn ryalarn grn ve ryalar seven insanlarla balant kurun.",feature4Details:"Topluluk  Rya Payla  Bakalarn Gr  Balan"},about:{title:"Submirra Hakknda",subtitle:"Bilin ve bilinalt arasnda kpr",missionTitle:"Misyonumuz",missionDesc:"Ryalarnz anlamanza yardmc oluyoruz. Ryalarnz analiz ederek ne anlama geldiklerini ve duygularnz ve dncelerinizle nasl balantl olduklarn gsteriyoruz.",howItWorksTitle:"Nasl alr",howItWorksDesc:"ok basit ve kolay:",step1:"Ryanz yazn (5000 karaktere kadar)",step2:"Ryanz analiz ediyoruz",step3:"Ne anlama geldiine dair detayl analiz aln",step4:"Ryanzn gzel bir grselini aln",step5:"Her eyi kiisel ktphanenizde saklayn",privacyTitle:"Gizlilik ve Gvenlik",privacyDesc:"Ryalarnz zel ve kiiseldir. Onlar gvenli bir ekilde saklyoruz. Paylamay semediiniz srece ryalarnz sadece siz grebilirsiniz. Verilerinizi baka kimseyle paylamyoruz.",socialTitle:"Sosyal Topluluk",socialDesc:"Ryalarnz paylan, bakalarnn paylamlarn beenip yorum yapn ve DM ile balant kurun. Gvenliinizi ve sitenin itibarn korumak adna uygunsuz kullanclar ikayet edebilirsiniz - sorun karan kullanclar bildirmek hem bizim hem sizin anzdan nemlidir.",quote:"Sitemiz henz yapm aamasndadr. Siz deerli kullanclarmz memnun etmek iin geri bildirimleriniz ve eletirileriniz bizim iin ok nemlidir."},analyze:{title:"Ryanz Analiz Edin",subtitle:"Ryanz yazn ve ne anlama geldiini kefedin",label:"Ryanz hakknda bize bilgi verin",placeholder:"Parlayan aalarla dolu bir ormanda yryordum...",characters:"karakter",submit:"Ryay Analiz Et",saving:"Kaydediliyor...",analysisTitle:"Analiz",visualizationTitle:"Rya Grselletirmesi",analyzeAnother:"Baka Bir Rya Analiz Et",confirmationMessage:"Ryanz kaydedildi ve ksa sre iinde analiz edilecek.",savedMessage:"Ryanz kaydedildi ve ksa sre iinde analiz edilecek.",trialBadge:"7 Gnlk cretsiz Deneme",privacyLabel:"Gizlilik",privacyPublic:"Herkese Ak",privacyPrivate:"zel",privacyPublicDesc:"Toplulukla payla",privacyPrivateDesc:"Sadece size zel",pendingMessage:"Ryanz ksa sre iinde analiz edilip grselletirilecektir. Ltfen bekleyiniz. Tamamlandktan sonra size bildirim gelecektir, ktphanenizden ryanzn durumunu kontrol edebilirsiniz.",goToLibrary:"Ktphaneye Git",processingTitle:"Rya Analizi Devam Ediyor",pendingDreamWarning:"Ltfen nce mevcut rya analizinizin tamamlanmasn bekleyin. Analiz tamamlandktan sonra yeni bir rya analiz edebilirsiniz.",dailyLimitExceeded:"Gnlk analiz limitiniz tkendi. Bugn {used}/{limit} analiz yaptnz. Limitler 24 saat sonra yenilenecektir.",analysisTypeLabel:"Analiz Tipi",analysisTypeBasic:"Temel Analiz",analysisTypeAdvanced:"Gelimi Analiz",analysisTypeVisual:"Grselli Analiz",analysisTypeVideo:"Videolu Analiz",analysisTypeBasicDesc:"Temel rya anlam",analysisTypeAdvancedDesc:"Detayl rya analizi",analysisTypeVisualDesc:"Rya grselletirmesi ile",analysisTypeVideoDesc:"Animasyonlu rya videosu",comingSoon:"Yaknda"},library:{title:"Rya Ktphaneniz",subtitle:"Analiz edilmi ryalarnz ve grselletirmelerinizi kefedin",empty:"Ktphaneniz bo",analyzeFirst:"lk Ryanz Analiz Edin",dreamEntry:"Rya Kayd",yourDream:"Ryanz",analysis:"Analiz",processingMessage:"Analiz ileniyor",creating:"Oluturuluyor...",searchPlaceholder:"Ryalarnzda arayn...",noDreamsFound:"Aramanzla eleen rya bulunamad",download:"ndir",makePrivate:"zel Yap",makePublic:"Herkese A",addToFavorites:"Favorilere Ekle",removeFromFavorites:"Favorilerden kar",delete:"Sil",downloadSuccess:"Grsel baaryla indirildi",downloadError:"Grsel indirilemedi",imageNotFound:"Grsel bulunamad",privacyUpdated:"Gizlilik ayar gncellendi",privacyUpdateError:"Gizlilik ayar deitirilemedi",totalDreams:"Toplam Rya",publicDreams:"Herkese Ak Ryalar",privateDreams:"zel Ryalar",maxDreamLimit:"Maksimum Rya Limiti",all:"Tm",favorites:"Favoriler",completed:"Tamamlanan",pending:"Beklemede"},social:{title:"Sosyal Ak",subtitle:"Topluluktan herkese ak rya analizlerini kefedin",searchDreams:"Ryalar Ara",searchUsers:"Kullanclar Ara",searchDreamsPlaceholder:"Ryalar ara...",searchUsersPlaceholder:"sim veya kullanc adna gre kullanc ara...",all:"Tm",following:"Takip Edilenler",visualAnalyses:"Grselli Analizler",textAnalyses:"Yazl Analizler",generators:"Hayal Galerisi",generatorsPremiumOnly:"Premium zellik - Grntlemek iin ykselt",upgradeForGenerators:"Premium'a Ykselt",noGenerations:"Henz eser oluturulmam",recent:"En Yeni",popular:"Popler",trending:"Trend",pending:"Beklemede",noDreams:"Henz herkese ak rya yok",shareFirst:"lk Ryanz Paylan",likes:"beeni",like:"beeni",comments:"Yorumlar",comment:"yorum",viewAll:"Tmn gr",noComments:"Henz yorum yok",writeComment:"Yorum yaz...",signInToComment:"Yorum yapmak iin giri yapn",signIn:"Giri Yap",justNow:"Az nce",minutesAgo:" dk nce",hoursAgo:" sa nce",daysAgo:" gn nce",noUsersFound:"Kullanc bulunamad",anonymous:"Anonim",checkOutDream:"Bu ryaya gz at",linkCopied:"Link panoya kopyaland",deleteDream:"Ryanz silin",deleteConfirm:"Bu ryay silmek istediinizden emin misiniz? Bu ilem tm beenileri ve yorumlar da silecektir.",dreamDeleted:"Rya baaryla silindi",deleteFailed:"Rya silinemedi. Sadece kendi ryalarnz silebilirsiniz.",commentAdded:"Yorum eklendi",commentFailed:"Yorum eklenemedi",commentDeleted:"Yorum silindi",commentDeleteFailed:"Yorum silinemedi",deleteComment:"Yorumu sil",endOfFeed:"Akn sonuna ulatnz",loadingMore:"Daha fazla ykleniyor...",previousImage:"nceki Grsel",nextImage:"Sonraki Grsel",close:"Kapat",noPlanMessage:"Sosyal ak grntlemek iin en az bedava plana sahip olmalsnz"},profile:{title:"Profil",manageAccount:"Hesap ayarlarnz ynetin",userProfile:"Kullanc Profili",changeAvatar:"Avatar deitir",uploading:"Ykleniyor...",publicDreams:"Herkese Ak Ryalar",likesReceived:"Alnan Beeniler",comments:"Yorumlar",followers:"Takipiler",following:"Takip Edilenler",email:"E-posta",memberSince:"yelik Tarihi",editProfile:"Profili Dzenle",saveChanges:"Deiiklikleri Kaydet",cancel:"ptal",follow:"Takip Et",followingButton:"Takip Ediliyor",publicDreamsTitle:"Herkese Ak Ryalar",noPublicDreams:"Henz herkese ak rya yok",profileSaved:"Profil baaryla kaydedildi",profileSaveFailed:"Profil kaydedilemedi",avatarUploaded:"Avatar baaryla yklendi",avatarUploadFailed:"Avatar yklenemedi",followSuccess:"Bu kullancy takip ediyorsunuz",unfollowSuccess:"Bu kullancy takipten ktnz",followFailed:"Takip durumu gncellenemedi",bioPlaceholder:"Bir biyografi yazn...",message:"Mesaj",reportCount:"Alnan ikayetler",reports:"ikayet",dangerLow:"Dk Risk",dangerMedium:"Orta Risk",dangerHigh:"Yksek Risk",dangerCritical:"Kritik Risk",noFollowers:"Henz takipi yok",noFollowing:"Henz kimseyi takip etmiyor",developer:"Developer"},dashboard:{title:"Kontrol Paneli",subtitle:"Rya analizi yolculuunuzun genel bak",totalDreams:"Toplam Rya",completedAnalyses:"Tamamlanan Analizler",pendingAnalyses:"Bekleyen Analizler",analyzeNewDream:"Yeni Rya Analiz Et",analyzeNewDreamDesc:"Gizli anlamlarn kefetmek iin yeni bir rya analiz etmeye balayn",viewLibrary:"Ktphaneyi Grntle",viewLibraryDesc:"Analiz edilmi ryalarnzn tam koleksiyonunu gzden geirin",recentDreams:"Son Ryalar",viewAll:"Tmn Gr",noDreams:"Henz rya yok",analyzeFirstDream:"lk Ryanz Analiz Edin"},contact:{title:"letiim",subtitle:"Sorularnz m var? Sizden haber almak isteriz",emailSupport:"E-posta Destei",liveChat:"Canl Sohbet",available:"Yardm iin 7/24 ulalabilir",sendMessage:"Bize Mesaj Gnderin",messageSubmirra:"Mesajla",viaWebsite:"Site zerinden",pleaseSignInToMessage:"Mesajlamak iin ltfen giri yapn.",name:"sim",email:"E-posta",subject:"Konu",message:"Mesaj",send:"Mesaj Gnder",thankYou:"Mesajnz iin teekkr ederiz! En ksa srede size geri dneceiz.",namePlaceholder:"sminiz",emailPlaceholder:"eposta@ornek.com",subjectPlaceholder:"Bu ne hakknda?",messagePlaceholder:"Bize daha fazla bilgi verin..."},auth:{welcomeBack:"Tekrar Ho Geldiniz",createAccount:"Hesap Olutur",continueExploring:"Ryalarnz kefetmeye devam edin",startJourney:"Bilinaltna yolculuunuza balayn",signIn:"Giri Yap",signUp:"Kaydol",fullName:"Adnz",email:"E-posta",password:"ifre",orContinueWith:"Veya ununla devam et",googleSignIn:"Google ile giri yap",enterFullName:"Adnz girin",enterEmail:"eposta@ornek.com",enterPassword:"ifrenizi girin",creatingAccount:"Hesap oluturuluyor...",signingIn:"Giri yaplyor...",checkEmail:"E-postanz kontrol edin",confirmationSent:"Size bir onay linki gnderdik. Hesabnz dorulamak iin ltfen e-postanz kontrol edin.",validationRequired:"Ltfen bu alan doldurun",validationEmail:"Ltfen geerli bir e-posta adresi girin",emailAlreadyExists:"Bu e-posta adresi zaten kaytl. Ltfen giri yapn veya farkl bir e-posta kullann.",invalidCredentials:"Geersiz e-posta veya ifre. Ltfen tekrar deneyin.",acceptTerms:"Hizmet artlarn kabul ediyorum",acceptPrivacy:"Gizlilik Politikasn kabul ediyorum",acceptAge:"18 yandan byk olduumu onaylyorum",mustAcceptTerms:"Hesap oluturmak iin Hizmet artlarn kabul etmelisiniz",mustAcceptPrivacy:"Hesap oluturmak iin Gizlilik Politikasn kabul etmelisiniz",mustAcceptAge:"18 yandan byk olduunuzu onaylamalsnz",readTerms:"Hizmet artlarn Oku",readPrivacy:"Gizlilik Politikasn Oku"},settings:{title:"Ayarlar",blockedUsers:"Engellenen Kullanclar",privacy:"Gizlilik",notifications:"Bildirimler",blockedUsersDesc:"Engellediiniz kullanclar size mesaj gnderemez veya ieriinizle etkileime geemez.",noBlockedUsers:"Engellenen kullanc yok",unblock:"Engeli Kaldr",unblockConfirm:"Engelini kaldrmak istediinizden emin misiniz",unblockSuccess:"engelinden karld",privacyDesc:"eriinizi kimlerin grebileceini ve sizinle etkileime girebileceini kontrol edin.",profileVisibility:"Profil Grnrl",allowMessagesFrom:"Mesaj Gnderebilecekler",public:"Herkese Ak",private:"zel",everyone:"Herkes",followingOnly:"Sadece Takip Ettiklerim",notificationsDesc:"Almak istediiniz bildirimleri sein.",likesOnDreams:"Rya Beenileri",comments:"Yorumlar",newFollowers:"Yeni Takipiler",directMessages:"Dorudan Mesajlar",favorites:"Favoriler",favoritesDesc:"Favori arkadalarnz. Bu kullanclarn ryalar ncelikli olarak gsterilir.",noFavorites:"Henz favori arkadanz yok",remove:"kar",showReadReceipts:"Grld Bilgisi",showReadReceiptsDesc:"Dier kullanclarn mesajlarnz grp grmediini bilmelerine izin verin",readReceiptsEnabled:"Grld bilgisi ald",readReceiptsDisabled:"Grld bilgisi kapatld",readReceiptsUpdateError:"Grld bilgisi ayar gncellenemedi",deleteAccount:"Hesab Sil",deleteAccountDesc:"Hesabnz ve tm ilikili verileri kalc olarak silin.",deleteAccountButton:"Hesabm Sil",deleteAccountConfirm:"Hesabnz silmek istediinizden emin misiniz? Bu ilem geri alnamaz. Tm ryalarnz, verileriniz ve aboneliiniz kalc olarak silinecektir.",deleteAccountSuccess:"Hesabnz baaryla silindi.",deleteAccountError:"Hesap silinemedi. Ltfen tekrar deneyin."},messages:{title:"Mesajlar",searchPlaceholder:"Kullanc ara...",noMessages:"Henz mesaj yok",searchToStart:"Sohbet balatmak iin kullanc arayn",typePlaceholder:"Mesaj yazn...",loading:"Ykleniyor...",loadingUser:"Kullanc ykleniyor...",searchResults:"Arama Sonular",searching:"Aranyor...",deleteConversation:"Sohbeti Sil"},notifications:{title:"Bildirimler",deleteAll:"Btn Bildirimleri Sil",deleteAllConfirm:"Tm bildirimleri silmek istediinizden emin misiniz?",deleteAllSuccess:"Tm bildirimler silindi",deleteAllError:"Bildirimler silinemedi",markAllRead:"Tmn okundu iaretle",markAllReadSuccess:"Tm bildirimler okundu olarak iaretlendi",markAllReadError:"Tmn okundu iaretleme baarsz",deleteError:"Bildirim silinemedi",noNotifications:"Henz bildirim yok",dreamCompleted:"Rya analiziniz hazr! Ktphanenizde grntlemek iin tklayn.",dreamCompletedToast:"Rya analiziniz hazr!",trialExpired:"7 gnlk cretsiz denemeniz sona erdi. Submirra'y kullanmaya devam etmek iin ykseltin!",someoneLiked:"ryanz beendi",someoneCommented:"ryanza yorum yapt",someoneFollowed:"sizi takip etmeye balad",someone:"Birisi",newNotification:"Yeni bildirim",justNow:"Az nce",minutesAgo:"dakika nce",hoursAgo:"saat nce",daysAgo:"gn nce",close:"Kapat"},pricing:{title:"Basit ve effaf Fiyatlandrma",subtitle:"Rya analizi yolculuunuz iin mkemmel plan sein",freePlan:{title:"Bedava Plan",price:"cretsiz",description:"Snrsz temel rya analizi iin mkemmel",feature1:"Snrsz bedava temel rya analizi",feature2:"Ktphanede 30 ryaya kadar saklama limiti",feature3:"Sosyal ksmna eriim hakk",cta:"Bedava Plan Al"},freeTrial:{title:"cretsiz Deneme",price:"cretsiz",description:"Submirra'nn neler yapabileceini kefetmek iin mkemmel",feature1:"7 gn eriim",feature2:"Toplam 7 grselli rya analizi",feature3:"7 gn boyunca gelimi analiz hakk",feature4:"Ryalarnz iin gzel grselletirmeler",cta:"cretsiz Deneyin",signUp:"cretsiz Kaydol",alreadyUsed:"Kullanld"},standard:{title:"Standart",price:"100",period:"ay",description:"Gelimi analiz ile ryalarnzn derinliklerine inin",feature1:"Sosyal ksmna eriim hakk",feature2:"Ktphanede 30 adet ryaya kadar saklama limiti",feature3:"Gelimi analiz kilidi alr",feature4:"Snrsz, daha detayl ve gelimi analiz",feature5:"Grselli analiz kilidi alr",feature6:"Gnde 3 ryaya kadar grselli analiz hakk",feature7:"Analiz bana 1 grsel",cta:"Standart Al"},premium:{badge:"En Popler",title:"Premium",price:"300",period:"ay",description:"Ryalarnz oklu grsellerle sanata dntrn ve ncelikli analiz aln",feature1:"Sosyal ksmna eriim hakk",feature2:"Ktphanede 60 adet ryaya kadar saklama limiti",feature3:"Gelimi analiz kilidi alr",feature4:"Snrsz, gelimi ve ncelikli analiz hakk",feature5:"Grselli analiz kilidi alr",feature6:"Gnde 5 defaya kadar grselli analiz hakk",feature7:"Analiz bana 3 grsel",feature8:"Rya Atlyesi kilidi alr",feature9:"Rya grsellerinizi istediiniz gibi tasarlayn",feature10:"Sosyalde hayal galerisi kilidi alr",cta:"Premium'a Ykselt"},whySubmirra:{title:"Neden Submirra?",description:"Submirra, bilinalt zihniniz, duygusal durumunuz ve i arzularnz hakknda gizli anlamlar ortaya karmak iin son teknoloji analiz teknolojisini kullanr. Her analiz, ryanzn zn yakalayan benzersiz srreal grselletirmeler ile gelir."},ruyagezer:{title:"Ryagezer",badge:"Yaknda",popularBadge:"En Popler",description:"Tm premium zelliklere, gelimi grselletirmelere ve zel videolu analiz yeteneklerine snrsz eriimle en kapsaml rya analizi deneyimini yaayn.",feature1:"Sosyal ksmna eriim hakk",feature2:"Ktphanede snrsz ryaya kadar saklama limiti",feature3:"Gelimi analiz kilidi alr",feature4:"Snrsz, gelimi ve ncelikli analiz hakk",feature5:"Analiz sayfasnda grselli analiz kilidi alr",feature6:"Gnde 7 defaya kadar grselli analiz hakk",feature7:"Analiz bana 3 grsel",feature8:"Rya Atlyesi kilidi alr",feature9:"Rya grsellerinizi istediiniz gibi tasarlayn",feature10:"Videolu analiz kilidi alr",feature11:"Gnde 1 defaya kadar videolu analiz hakk",feature12:"Sosyalde hayal galerisi kilidi alr"}},trial:{activateTitle:"7 Gnlk cretsiz Denemenizi Etkinletirin",activateDesc:"Submirra'nn tm gcn 7 gn boyunca snrsz eriimle deneyimleyin",activateNow:"cretsiz Denemeyi Balat",activating:"Etkinletiriliyor...",activated:"Deneme Etkinletirildi!",activatedDesc:"7 gnlk cretsiz denemeniz baaryla etkinletirildi.",enjoy3Days:"7 gn boyunca snrsz rya analizi ve igrlerin tadn karn!",alreadyUsed:"Deneme Zaten Kullanld",alreadyUsedDesc:"cretsiz denemenizi zaten kullandnz. Submirra'nn keyfini karmaya devam etmek iin cretli bir plana ykseltin.",viewPlans:"Planlar Grntle",whatsIncluded:"Neler Dahil:",feature1:"Tm zelliklere 7 gn tam eriim",feature2:"Toplam 7 gelimi/grselli rya analizi",feature3:"Ryalarnz iin gzel grselletirmeler",duration:"Sre",threeDays:"7 Gn",analyses:"Analizler",threeAnalyses:"7 Rya",features:"zellikler",fullAccess:"Tam Eriim",startAnalyzing:"Rya Analizine Bala",trialExpired:"Deneme Sresi Doldu",trialExpiredDesc:"7 gnlk cretsiz denemeniz sona erdi. Devam etmek iin ykseltin.",ipAlreadyUsed:"Bu IP adresinden daha nce cretsiz deneme kullanlm. Her kii yalnzca bir kez cretsiz deneme alabilir.",ipCheckFailed:"Uygunluk kontrol yaplamad. Ltfen tekrar deneyin."},footer:{termsOfService:"Hizmet artlar",privacyPolicy:"Gizlilik Politikas",feedback:"Geri Bildirim"},terms:{title:"Hizmet artlar",lastUpdated:"Son gncelleme: Aralk 2024",acceptanceTitle:"1. artlarn Kabul",acceptanceText:"Submirra'ya ho geldiniz! Platformumuzu kullanarak bu artlar kabul etmi olursunuz. Size gvenli ve keyifli bir deneyim sunmaya kararlyz. Herhangi bir sorunuz varsa, ltfen bizimle iletiime gein.",serviceTitle:"2. Hizmet Aklamas",serviceText:"Submirra, gelimi rya analizi ve grselletirme platformu salar. Hizmetlerimiz unlar ierir:",serviceFeature1:"Gelimi rya analizi ve yorumlama",serviceFeature2:"Rya grselletirme retimi",serviceFeature3:"Sosyal paylam ve topluluk zellikleri",userAccountTitle:"3. Kullanc Hesaplar",userAccountText:"Belirli zelliklere erimek iin bir hesap oluturmanz gerekir. unlar kabul edersiniz:",userAccountFeature1:"Doru ve eksiksiz bilgi salamak",userAccountFeature2:"Hesap bilgilerinizin gvenliini korumak",userAccountFeature3:"Yetkisiz kullanm durumunda derhal bizi bilgilendirmek",contentTitle:"4. Kullanc erii",contentText:"Gnderdiiniz ieriin sahiplii size aittir. erik gndererek, bize u lisans verirsiniz:",contentFeature1:"eriinizi platformda kullanma, gsterme ve datma",contentFeature2:"Gelimi teknolojimizi kullanarak ryalarnz ileme ve analiz etme",contentFeature3:"Rya ieriinize dayal grselletirmeler oluturma",privacyTitle:"5. Gizlilik",privacyText:"Gizliliiniz bizim iin nemlidir. Uygulamalarmz anlamak iin ltfen hizmetin kullanmnz da yneten Gizlilik Politikamz inceleyin.",paymentTitle:"6. deme ve Abonelik",paymentText:"htiyalarnza uygun esnek abonelik planlar sunuyoruz:",paymentFeature1:"Aylk abonelikler istediiniz zaman iptal edilebilir",paymentFeature2:"Aboneliiniz yenilenmeden 7 gn nce bilgilendirileceksiniz",paymentFeature3:"Tm zellikleri risk almadan kefetmeniz iin 7 gnlk cretsiz deneme sunuyoruz",terminationTitle:"7. Hesap Sonlandrma",terminationText:"Topluluk kurallarmz ihlal eden veya zararl davranlarda bulunan hesaplar askya alabiliriz. Sorunlar adil bir ekilde zmeyi hedefliyoruz ve hesabnzda herhangi bir ilem yaplrsa sizi bilgilendireceiz.",contactTitle:"8. letiim Bilgileri",contactText:"Bu Hizmet artlar hakknda sorularnz varsa, ltfen bizimle",contactLink:"iletiime gein"},feedback:{title:"Geri Bildirim",subtitle:"Grnz bizim iin deerli! Submirra'y gelitirmemize yardmc olun",categoryLabel:"Kategori",categoryBug:"Hata Bildirimi",categoryFeature:"zellik stei",categoryImprovement:"yiletirme nerisi",categoryOther:"Dier",messageLabel:"Geri Bildiriminiz",placeholder:"Dncelerinizi paylan...",submitButton:"Geri Bildirim Gnder",submitting:"Gnderiliyor...",successMessage:"Geri bildiriminiz iin teekkr ederiz!",errorMessage:"Geri bildirim gnderilemedi. Ltfen tekrar deneyin.",emptyError:"Gndermeden nce ltfen geri bildiriminizi girin.",thankYou:"Teekkrler!",thankYouMessage:"Geri bildiriminiz alnd ve ekibimiz tarafndan incelenecektir.",privacyNote:"Geri bildiriminiz gizlidir ve yalnzca Submirra ekibi tarafndan grntlenecektir."},privacy:{title:"Gizlilik Politikas",lastUpdated:"Son gncelleme: Aralk 2024",introductionTitle:"1. Giri",introductionText:"Submirra'da gizliliinize nem veriyoruz. Bu Gizlilik Politikas, rya analizi platformumuzu kullandnzda kiisel bilgilerinizi nasl topladmz, kullandmz, sakladmz ve koruduumuzu aklar. En yksek veri koruma ve effaflk standartlarn srdrmeye kararlyz.",dataCollectionTitle:"2. Topladmz Bilgiler",dataCollectionText:"Size hizmetlerimizi sunmak iin gerekli bilgileri topluyoruz:",dataCollectionItem1:"Hesap bilgileri: e-posta adresi ve kullanc ad",dataCollectionItem2:"Profil bilgileri: ad soyad, biyografi ve avatar (istee bal)",dataCollectionItem3:"Rya ierii: rya aklamalarnz ve analiz sonular",dataCollectionItem4:"Kullanm verileri: abonelik bilgileri, tercihler ve etkileim gemii",dataUsageTitle:"3. Bilgilerinizi Nasl Kullanyoruz",dataUsageText:"Bilgilerinizi yalnzca hizmetlerimizi sunmak ve iyiletirmek iin kullanyoruz:",dataUsageItem1:"Gelimi teknolojimizi kullanarak ryalarnz ilemek ve analiz etmek",dataUsageItem2:"Rya ieriinize dayal kiiselletirilmi grselletirmeler oluturmak",dataUsageItem3:"Hesabnz, aboneliklerinizi ve tercihlerinizi ynetmek",dataUsageItem4:"Hesabnz, gncellemeler ve nemli bildirimler hakknda sizinle iletiim kurmak",dataStorageTitle:"4. Veri Depolama ve Saklama",dataStorageText:"Verileriniz endstri standard ifreleme ile gvenli sunucularda saklanr. Hesabnz aktif olduu srece veya hizmetlerimizi sunmak iin gerekli olduu srece bilgilerinizi saklarz. Hesabnz ve tm ilikili verileri istediiniz zaman profil ayarlarnzdan silebilirsiniz.",dataSecurityTitle:"5. Veri Gvenlii",dataSecurityText:"Bilgilerinizi korumak iin gl gvenlik nlemleri uyguluyoruz:",dataSecurityItem1:"Tm veriler, gelimi ifreleme protokolleri kullanlarak aktarm srasnda ve beklerken ifrelenir",dataSecurityItem2:"Verilerinize eriim yalnzca yetkili personelle snrldr",dataSecurityItem3:"Sistemlerimizi dzenli olarak gvenlik aklar iin izliyor ve gvenlik uygulamalarmz gncelliyoruz",userRightsTitle:"6. Haklarnz ve Seenekleriniz",userRightsText:"Kiisel bilgileriniz zerinde tam kontrolnz var:",userRightsItem1:"Eriim: Verilerinizi istediiniz zaman grntleyebilir ve indirebilirsiniz",userRightsItem2:"Deitirme: Profil bilgilerinizi ve kullanc adnz gncelleyebilirsiniz",userRightsItem3:"Silme: Hesabnz ve tm ilikili verileri kalc olarak silebilirsiniz",userRightsItem4:"Gizlilik: Ryalarnzn grnrln kontrol edebilirsiniz (herkese ak veya zel)",contactTitle:"8. Bize Ulan",contactText:"Bu Gizlilik Politikas veya kiisel bilgileriniz hakknda herhangi bir sorunuz, endieniz veya talebiniz varsa, ltfen bizimle",contactLink:"iletiime gein"}}},sf=x.createContext(void 0);function bv({children:e}){const[t,r]=x.useState(()=>{const i=localStorage.getItem("submirra_language");return i==="tr"||i==="en"?i:"en"}),n=i=>{r(i),localStorage.setItem("submirra_language",i)};return s.jsx(sf.Provider,{value:{language:t,setLanguage:n,t:vv[t]},children:e})}function tt(){const e=x.useContext(sf);if(!e)throw new Error("useLanguage must be used within LanguageProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ie=(e,t)=>{const r=x.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:o="",children:c,...d},u)=>x.createElement("svg",{ref:u,...wv,width:i,height:i,stroke:n,strokeWidth:l?Number(a)*24/Number(i):a,className:["lucide",`lucide-${kv(e)}`,o].join(" "),...d},[...t.map(([m,f])=>x.createElement(m,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=ie("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=ie("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=ie("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=ie("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=ie("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=ie("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=ie("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=ie("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=ie("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=ie("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=ie("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=ie("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=ie("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=ie("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=ie("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=ie("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=ie("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=ie("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=ie("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=ie("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=ie("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=ie("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=ie("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=ie("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=ie("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=ie("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=ie("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=ie("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=ie("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=ie("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=ie("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=ie("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=ie("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=ie("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=ie("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=ie("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=ie("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=ie("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=ie("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=ie("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=ie("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=ie("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=ie("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=ie("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=ie("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=ie("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=ie("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=ie("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=ie("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=ie("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=ie("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=ie("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=ie("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=ie("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=ie("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=ie("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=ie("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=ie("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),of=x.createContext(void 0);function Zv({children:e}){const[t,r]=x.useState([]),n=(o,c="info",d=4e3)=>{const u=Math.random().toString(36).substring(7),m={id:u,message:o,type:c,duration:d};r(f=>[...f,m]),d>0&&setTimeout(()=>{i(u)},d)},i=o=>{r(c=>c.filter(d=>d.id!==o))},a=o=>{switch(o){case"success":return s.jsx(kl,{className:"text-green-400",size:20});case"error":return s.jsx(ys,{className:"text-red-400",size:20});case"warning":return s.jsx(jv,{className:"text-yellow-400",size:20});default:return s.jsx(kc,{className:"text-blue-400",size:20})}},l=o=>{switch(o){case"success":return"bg-green-500/10 border-green-500/30 text-green-400";case"error":return"bg-red-500/10 border-red-500/30 text-red-400";case"warning":return"bg-yellow-500/10 border-yellow-500/30 text-yellow-400";default:return"bg-blue-500/10 border-blue-500/30 text-blue-400"}};return s.jsxs(of.Provider,{value:{showToast:n},children:[e,s.jsx("div",{className:"hidden sm:flex fixed top-16 sm:top-20 right-2 sm:right-4 left-2 sm:left-auto z-[100] flex-col gap-2 max-w-sm sm:max-w-md w-auto sm:w-full",children:t.map(o=>s.jsxs("div",{className:`${l(o.type)} border rounded-lg p-4 backdrop-blur-sm shadow-lg animate-slide-in-right flex items-start gap-3`,children:[a(o.type),s.jsx("p",{className:"flex-1 text-sm font-medium",children:o.message}),s.jsx("button",{onClick:()=>i(o.id),className:"text-slate-400 hover:text-slate-200 transition-colors",children:s.jsx(pt,{size:16})})]},o.id))})]})}function rr(){const e=x.useContext(of);if(!e)throw new Error("useToast must be used within ToastProvider");return e}const cf=x.createContext(void 0);function eb({children:e}){const{user:t}=gt(),[r,n]=x.useState(0),[i,a]=x.useState(0),l=async()=>{if(!t){n(0);return}try{const{data:c,error:d}=await w.from("notifications").select("id, read_at").eq("user_id",t.id).is("read_at",null);if(d)throw d;n((c==null?void 0:c.length)||0)}catch(c){console.error("Error loading unread notifications:",c)}},o=async()=>{if(!t){a(0);return}try{const{count:c,error:d}=await w.from("messages").select("*",{count:"exact",head:!0}).eq("receiver_id",t.id).is("read_at",null);if(d)throw d;a(c||0)}catch(c){console.error("Error loading unread messages:",c)}};return x.useEffect(()=>{if(t){l(),o();const c=setInterval(()=>{l(),o()},1e3);return()=>{clearInterval(c)}}},[t]),s.jsx(cf.Provider,{value:{unreadCount:r,unreadMessages:i,refreshNotifications:l,refreshMessages:o},children:e})}function zd(){const e=x.useContext(cf);if(e===void 0)throw new Error("useNotifications must be used within a NotificationsProvider");return e}const cm=["/","/about","/contact","/analyze","/library","/generator","/pricing","/profile","/signin","/signup","/dashboard","/social","/activate-trial","/messages","/terms","/privacy","/feedback","/settings"],jl=x.createContext(void 0);function tb({children:e}){const t=()=>{if(typeof window>"u")return"/";const l=window.location.pathname;if(l.startsWith("/profile/"))return"/profile";const c=l.split("?")[0].split("/")[1];if(!c||c==="")return"/";const d=`/${c}`;return cm.includes(d)?d:"/"},[r,n]=x.useState(t);x.useEffect(()=>{const l=()=>{const d=window.location.pathname;if(d.startsWith("/profile/")){n("/profile"),window.scrollTo(0,0);return}const m=d.split("?")[0].split("/")[1];let f="/";if(!m||m==="")f="/";else{const p=`/${m}`;cm.includes(p)?f=p:f="/"}n(f),window.scrollTo(0,0)};l();const o=()=>{l()},c=()=>{l()};return window.addEventListener("popstate",o),window.addEventListener("hashchange",c),()=>{window.removeEventListener("popstate",o),window.removeEventListener("hashchange",c)}},[]);const i=l=>{if(l.startsWith("/profile/"))window.history.pushState({},"",l),n("/profile");else if(l.includes("?")){const o=l.split("?")[0];window.history.pushState({},"",l),n(o)}else window.history.pushState({},"",l),n(l);window.scrollTo(0,0)},a=l=>{const o=window.location.pathname;return l==="userId"&&o.startsWith("/profile/")?o.split("/")[2]||null:new URLSearchParams(window.location.search).get(l)};return s.jsx(jl.Provider,{value:{currentPage:r,navigate:i,getUrlParam:a},children:e})}function _t(){const e=x.useContext(jl);if(!e)throw new Error("useNavigate must be used within RouterProvider");return e.navigate}function rb(){const e=x.useContext(jl);if(!e)throw new Error("useRouter must be used within RouterProvider");return e}function Ed(){const e=x.useContext(jl);if(!e)throw new Error("useCurrentPage must be used within RouterProvider");return e.currentPage}function sb(){const e=_t();return s.jsxs("button",{onClick:()=>e("/"),className:"flex items-center gap-2 hover:opacity-80 transition-opacity cursor-pointer flex-shrink-0",children:[s.jsx("div",{className:"relative overflow-visible flex items-center justify-center flex-shrink-0",children:s.jsx("img",{src:"/br.png",alt:"Submirra Logo",className:"object-contain flex-shrink-0",style:{width:"3.5rem",height:"3.5rem",minWidth:"3.5rem",minHeight:"3.5rem",maxWidth:"3.5rem",maxHeight:"3.5rem"}})}),s.jsx("span",{className:"text-lg font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent whitespace-nowrap flex-shrink-0",style:{fontSize:"1.125rem"},children:"Submirra"})]})}function dm(){const{language:e,setLanguage:t}=tt();return s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(Va,{size:14,className:"text-slate-500"}),s.jsx("button",{onClick:()=>t("en"),className:`px-2 py-0.5 rounded text-xs font-medium transition-all duration-200 ${e==="en"?"bg-pink-600 text-white":"text-slate-500 hover:text-slate-300"}`,children:"EN"}),s.jsx("button",{onClick:()=>t("tr"),className:`px-2 py-0.5 rounded text-xs font-medium transition-all duration-200 ${e==="tr"?"bg-pink-600 text-white":"text-slate-500 hover:text-slate-300"}`,children:"TR"})]})}function um({variant:e="default"}){const{user:t}=gt(),r=_t(),{showToast:n}=rr(),{t:i,language:a}=tt(),{refreshNotifications:l,unreadCount:o}=zd(),[c,d]=x.useState([]),[u,m]=x.useState([]),[f,p]=x.useState(!1),[b,j]=x.useState(!1),[S,y]=x.useState("notifications"),h=x.useCallback(async()=>{if(t)try{j(!0);const{data:k,error:q}=await w.from("notifications").select(`
          *,
          actor_profile:actor_id (
            full_name,
            avatar_url,
            username
          )
        `).eq("user_id",t.id).order("created_at",{ascending:!1}).limit(50);if(q)throw q;const H=(k||[]).map(O=>({...O,actor_profile:O.actor_profile||(O.type==="dream_completed"?null:{full_name:"Anonymous",avatar_url:null,username:null})}));d(H),await g()}catch(k){console.error("Error loading notifications:",k)}finally{j(!1)}},[t]),g=async()=>{if(t)try{const{data:k,error:q}=await w.from("follow_requests").select(`
          id,
          requester_id,
          created_at,
          requester_profile:requester_id (
            full_name,
            avatar_url,
            username
          )
        `).eq("target_id",t.id).eq("status","pending").order("created_at",{ascending:!1});if(q)throw q;const H=(k||[]).map(O=>{const L=Array.isArray(O.requester_profile)?O.requester_profile[0]:O.requester_profile;return{id:O.id,requester_id:O.requester_id,created_at:O.created_at,requester_profile:L||{full_name:"Unknown",avatar_url:null,username:null}}});m(H)}catch(k){console.error("Error loading follow requests:",k)}},_=async(k,q)=>{if(t)try{await w.from("follow_requests").update({status:"accepted"}).eq("id",k),await w.from("follows").insert({follower_id:q,following_id:t.id}),m(H=>H.filter(O=>O.id!==k)),n(a==="tr"?"Takip istei kabul edildi":"Follow request accepted","success")}catch(H){console.error("Error accepting follow request:",H),n(a==="tr"?"Bir hata olutu":"An error occurred","error")}},$=async k=>{try{await w.from("follow_requests").update({status:"rejected"}).eq("id",k),m(q=>q.filter(H=>H.id!==k)),n(a==="tr"?"Takip istei reddedildi":"Follow request rejected","info")}catch(q){console.error("Error rejecting follow request:",q)}},A=x.useCallback(async k=>{if(t)try{const{data:q,error:H}=await w.from("notifications").select(`
          *,
          actor_profile:actor_id (
            full_name,
            avatar_url,
            username
          )
        `).eq("id",k).single();if(H)throw H;const O={...q,actor_profile:q.actor_profile||(q.type==="dream_completed"?null:{full_name:"Anonymous",avatar_url:null,username:null})};d(L=>L.some(se=>se.id===k)?L:[O,...L]),l(),O.type==="dream_completed"&&n(i.notifications.dreamCompletedToast,"success")}catch(q){console.error("Error adding new notification:",q),h()}},[t,h,n]);x.useEffect(()=>{if(!t)return;console.log(" Setting up notifications real-time subscription for user:",t.id);const k=w.channel(`notifications-${t.id}-${Date.now()}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${t.id}`},H=>{var O,L,se;console.log(" NEW NOTIFICATION RECEIVED INSTANTLY:",H),console.log(" Notification ID:",(O=H.new)==null?void 0:O.id),console.log(" Notification Type:",(L=H.new)==null?void 0:L.type),(se=H.new)!=null&&se.id?(console.log(" Adding notification to list instantly"),A(H.new.id)):console.error(" Notification ID missing, cannot add")}).subscribe(H=>{console.log(" Notifications channel subscription status:",H),H==="SUBSCRIBED"?console.log(" Real-time notifications ACTIVE and listening"):H==="CHANNEL_ERROR"?console.error(" Notifications subscription ERROR"):H==="TIMED_OUT"&&console.error(" Notifications subscription TIMED OUT")});h();const q=w.channel(`dreams-status-${t.id}-${Date.now()}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"dreams",filter:`user_id=eq.${t.id}`},H=>{console.log("Dream status changed:",H),H.new.status==="completed"&&H.old.status!=="completed"&&(console.log("Dream completed - notification should arrive via INSERT event"),setTimeout(()=>{h()},2e3))}).subscribe();return()=>{w.removeChannel(k),w.removeChannel(q)}},[t,h,A]);const M=async k=>{if(t)try{const{error:q}=await w.from("notifications").update({read_at:new Date().toISOString()}).eq("id",k);if(q)throw q;d(H=>H.map(O=>O.id===k?{...O,read_at:new Date().toISOString()}:O)),l()}catch(q){console.error("Error marking notification as read:",q)}},I=async(k,q)=>{if(q.stopPropagation(),!!t)try{const{error:H}=await w.from("notifications").delete().eq("id",k);if(H)throw H;d(O=>O.filter(L=>L.id!==k)),l()}catch(H){console.error("Error deleting notification:",H),n(i.notifications.deleteError,"error")}},G=async()=>{if(t)try{const{error:k}=await w.from("notifications").update({read_at:new Date().toISOString()}).eq("user_id",t.id).is("read_at",null);if(k)throw k;d(q=>q.map(H=>({...H,read_at:H.read_at||new Date().toISOString()}))),l(),n(i.notifications.markAllReadSuccess,"success")}catch(k){console.error("Error marking all as read:",k),n(i.notifications.markAllReadError,"error")}},K=async()=>{if(t&&confirm(i.notifications.deleteAllConfirm||"Are you sure you want to delete all notifications?"))try{const{error:k}=await w.from("notifications").delete().eq("user_id",t.id);if(k)throw k;d([]),l(),n(i.notifications.deleteAllSuccess||"All notifications deleted","success")}catch(k){console.error("Error deleting all notifications:",k),n(i.notifications.deleteAllError||"Failed to delete all notifications","error")}},E=k=>{if(M(k.id),p(!1),k.type==="dream_completed")r("/library");else if(k.type==="trial_expired")r("/pricing");else if(k.dream_id){const q=new URLSearchParams;q.set("dream",k.dream_id),k.comment_id&&q.set("comment",k.comment_id),r(`/social?${q.toString()}`)}else k.type==="follow"&&k.actor_id&&r(`/profile/${k.actor_id}`)},W=k=>{switch(k){case"like":return s.jsx(dr,{className:"text-pink-400",size:18});case"comment":return s.jsx(wr,{className:"text-purple-400",size:18});case"follow":return s.jsx(si,{className:"text-cyan-400",size:18});case"dream_completed":return s.jsx(kl,{className:"text-green-400",size:18});case"trial_expired":return s.jsx(ys,{className:"text-yellow-400",size:18});default:return s.jsx(Gs,{className:"text-slate-400",size:18})}},P=k=>{var H,O;if(k.type==="dream_completed")return i.notifications.dreamCompleted;if(k.type==="trial_expired")return i.notifications.trialExpired;const q=((H=k.actor_profile)==null?void 0:H.full_name)||((O=k.actor_profile)==null?void 0:O.username)||i.notifications.someone;switch(k.type){case"like":return`${q} ${i.notifications.someoneLiked}`;case"comment":return`${q} ${i.notifications.someoneCommented}`;case"follow":return`${q} ${i.notifications.someoneFollowed}`;default:return i.notifications.newNotification}},U=k=>{const q=new Date(k),H=new Date,O=H.getTime()-q.getTime(),L=Math.floor(O/6e4),se=Math.floor(L/60),de=Math.floor(se/24);if(L<1)return i.notifications.justNow;if(L<60)return`${L} ${i.notifications.minutesAgo}`;if(se<24)return`${se} ${i.notifications.hoursAgo}`;if(de<7)return`${de} ${i.notifications.daysAgo}`;const ke=a==="tr"?"tr-TR":"en-US";return q.toLocaleDateString(ke,{month:"short",day:"numeric",year:q.getFullYear()!==H.getFullYear()?"numeric":void 0})};return t?s.jsxs("div",{className:"relative",children:[e==="sidebar"?s.jsxs("button",{onClick:k=>{k.stopPropagation(),p(!f)},className:"w-full flex items-center gap-3 px-4 py-2 rounded-lg font-medium transition-all duration-200 text-slate-300 hover:bg-slate-800/50 hover:text-purple-400",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Gs,{size:18}),(u.length>0||o>0)&&s.jsx("span",{className:"absolute -top-1 -right-1 min-w-[14px] h-[14px] bg-pink-500 rounded-full text-white text-[8px] flex items-center justify-center font-bold",children:u.length+o>9?"9+":u.length+o})]}),s.jsx("span",{children:i.notifications.title})]}):s.jsxs("button",{onClick:k=>{k.stopPropagation(),p(!f)},className:"relative p-3 text-slate-400 hover:text-purple-400 transition-colors flex items-center justify-center",children:[s.jsx(Gs,{size:22}),u.length>0&&s.jsx("span",{className:"absolute top-1 left-1 min-w-[16px] h-4 px-1 bg-blue-500 rounded-full text-white text-[10px] flex items-center justify-center font-bold shadow-lg border border-slate-900",children:u.length>9?"9+":u.length}),o>0&&s.jsx("span",{className:"absolute top-1 right-1 min-w-[16px] h-4 px-1 bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center font-bold shadow-lg border border-slate-900",children:o>9?"9+":o})]}),f&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>p(!1)}),s.jsxs("div",{className:`fixed bg-slate-900 border border-purple-500/30 rounded-2xl shadow-2xl z-50 overflow-hidden flex flex-col ${e==="sidebar"?"left-4 right-4 top-20 bottom-20 max-h-[70vh]":"inset-x-2 sm:inset-x-auto sm:right-0 bottom-16 sm:bottom-auto sm:top-12 sm:w-[400px] md:w-[500px] lg:w-[600px] max-h-[60vh] sm:max-h-[80vh] md:max-h-[700px]"}`,children:[s.jsxs("div",{className:"p-4 border-b border-purple-500/20",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-xl font-semibold text-white",children:i.notifications.title}),s.jsx("button",{onClick:()=>p(!1),className:"text-slate-400 hover:text-white transition-colors",title:i.notifications.close,"aria-label":i.notifications.close,children:s.jsx(pt,{size:18})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>y("notifications"),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all ${S==="notifications"?"bg-purple-600 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:[s.jsx(Gs,{size:14,className:"inline mr-1"}),a==="tr"?"Bildirimler":"Notifications",o>0&&s.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-pink-500 rounded-full text-xs",children:o})]}),s.jsxs("button",{onClick:()=>y("requests"),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all ${S==="requests"?"bg-purple-600 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:[s.jsx(si,{size:14,className:"inline mr-1"}),a==="tr"?"stekler":"Requests",u.length>0&&s.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-cyan-500 rounded-full text-xs",children:u.length})]})]})]}),s.jsxs("div",{className:"overflow-y-auto flex-1 scrollbar-hide",children:[S==="requests"&&s.jsx("div",{className:"p-2",children:u.length===0?s.jsxs("div",{className:"text-center py-8 px-4",children:[s.jsx(si,{className:"mx-auto mb-3 text-slate-600",size:32}),s.jsx("p",{className:"text-slate-400",children:a==="tr"?"Takip istei yok":"No follow requests"})]}):s.jsx("div",{className:"space-y-2",children:u.map(k=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-800/50 rounded-xl hover:bg-slate-800 transition-colors",children:[s.jsx("button",{onClick:()=>{r(`/profile/${k.requester_id}`),p(!1)},className:"w-10 h-10 rounded-full bg-gradient-to-br from-cyan-500/20 to-purple-500/20 border border-cyan-500/30 flex items-center justify-center overflow-hidden",children:k.requester_profile.avatar_url?s.jsx("img",{src:k.requester_profile.avatar_url,alt:"",className:"w-full h-full object-cover"}):s.jsx(Je,{className:"text-cyan-400",size:20})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-white font-medium text-sm truncate",children:k.requester_profile.full_name}),s.jsx("p",{className:"text-slate-500 text-xs",children:a==="tr"?"sizi takip etmek istiyor":"wants to follow you"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>_(k.id,k.requester_id),className:"p-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors",title:a==="tr"?"Kabul Et":"Accept",children:s.jsx(be,{size:16})}),s.jsx("button",{onClick:()=>$(k.id),className:"p-2 bg-red-600/20 hover:bg-red-600/30 text-red-400 rounded-lg transition-colors",title:a==="tr"?"Reddet":"Reject",children:s.jsx(pt,{size:16})})]})]},k.id))})}),S==="notifications"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-end gap-2 p-2 border-b border-purple-500/10",children:[c.length>0&&s.jsxs("button",{onClick:K,className:"text-xs text-red-400 hover:text-red-300 transition-colors px-2 py-1 rounded hover:bg-red-500/10 flex items-center gap-1",children:[s.jsx(Dr,{size:12}),i.notifications.deleteAll||"Delete all"]}),o>0&&s.jsx("button",{onClick:G,className:"text-xs text-purple-400 hover:text-purple-300 transition-colors px-2 py-1 rounded hover:bg-purple-500/10",children:i.notifications.markAllRead})]}),b?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(Ne,{className:"animate-spin text-purple-400",size:24})}):c.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Gs,{className:"mx-auto mb-4 text-slate-600",size:48}),s.jsx("p",{className:"text-slate-400",children:i.notifications.noNotifications})]}):s.jsx("div",{className:"divide-y divide-purple-500/10",children:c.map(k=>s.jsxs("div",{className:`relative group ${k.read_at?"":"bg-purple-500/5"}`,children:[s.jsx("button",{onClick:()=>E(k),className:"w-full p-3 text-left hover:bg-slate-950/50 transition-colors",children:s.jsxs("div",{className:"flex flex-col gap-1.5 w-full",children:[s.jsxs("div",{className:"flex gap-2.5 items-start",children:[s.jsxs("div",{className:"relative flex-shrink-0 mt-0.5",children:[W(k.type),!k.read_at&&s.jsx("div",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-pink-500 rounded-full border-2 border-slate-800"})]}),s.jsx("div",{className:"flex-1 min-w-0 pr-8",children:s.jsx("p",{className:"text-white text-xs leading-relaxed break-words break-all overflow-wrap-anywhere",style:{wordBreak:"break-word",overflowWrap:"break-word",hyphens:"auto"},children:P(k)})})]}),s.jsx("div",{className:"flex items-center gap-2 pl-6",children:s.jsx("p",{className:"text-slate-400 text-xs whitespace-nowrap",children:U(k.created_at)})})]})}),s.jsx("button",{onClick:q=>I(k.id,q),className:"absolute top-3 right-3 p-1 text-slate-600 hover:text-red-400 hover:bg-slate-700/50 rounded-full opacity-0 group-hover:opacity-100 transition-all",title:"Delete notification",children:s.jsx(pt,{size:12})})]},k.id))})]})]})]})]})]}):null}/*! Capacitor: https://capacitorjs.com/ - MIT License */var kn;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(kn||(kn={}));class po extends Error{constructor(t,r,n){super(t),this.message=t,this.code=r,this.data=n}}const nb=e=>{var t,r;return e!=null&&e.androidBridge?"android":!((r=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},ib=e=>{const t=e.CapacitorCustomPlatform||null,r=e.Capacitor||{},n=r.Plugins=r.Plugins||{},i=()=>t!==null?t.name:nb(e),a=()=>i()!=="web",l=m=>{const f=d.get(m);return!!(f!=null&&f.platforms.has(i())||o(m))},o=m=>{var f;return(f=r.PluginHeaders)===null||f===void 0?void 0:f.find(p=>p.name===m)},c=m=>e.console.error(m),d=new Map,u=(m,f={})=>{const p=d.get(m);if(p)return console.warn(`Capacitor plugin "${m}" already registered. Cannot register plugins twice.`),p.proxy;const b=i(),j=o(m);let S;const y=async()=>(!S&&b in f?S=typeof f[b]=="function"?S=await f[b]():S=f[b]:t!==null&&!S&&"web"in f&&(S=typeof f.web=="function"?S=await f.web():S=f.web),S),h=(I,G)=>{var K,E;if(j){const W=j==null?void 0:j.methods.find(P=>G===P.name);if(W)return W.rtype==="promise"?P=>r.nativePromise(m,G.toString(),P):(P,U)=>r.nativeCallback(m,G.toString(),P,U);if(I)return(K=I[G])===null||K===void 0?void 0:K.bind(I)}else{if(I)return(E=I[G])===null||E===void 0?void 0:E.bind(I);throw new po(`"${m}" plugin is not implemented on ${b}`,kn.Unimplemented)}},g=I=>{let G;const K=(...E)=>{const W=y().then(P=>{const U=h(P,I);if(U){const k=U(...E);return G=k==null?void 0:k.remove,k}else throw new po(`"${m}.${I}()" is not implemented on ${b}`,kn.Unimplemented)});return I==="addListener"&&(W.remove=async()=>G()),W};return K.toString=()=>`${I.toString()}() { [capacitor code] }`,Object.defineProperty(K,"name",{value:I,writable:!1,configurable:!1}),K},_=g("addListener"),$=g("removeListener"),A=(I,G)=>{const K=_({eventName:I},G),E=async()=>{const P=await K;$({eventName:I,callbackId:P},G)},W=new Promise(P=>K.then(()=>P({remove:E})));return W.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await E()},W},M=new Proxy({},{get(I,G){switch(G){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return j?A:_;case"removeListener":return $;default:return g(G)}}});return n[m]=M,d.set(m,{name:m,proxy:M,platforms:new Set([...Object.keys(f),...j?[b]:[]])}),M};return r.convertFileSrc||(r.convertFileSrc=m=>m),r.getPlatform=i,r.handleError=c,r.isNativePlatform=a,r.isPluginAvailable=l,r.registerPlugin=u,r.Exception=po,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},ab=e=>e.Capacitor=ib(e),ji=ab(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Cd=ji.registerPlugin;class Pd{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,r){let n=!1;this.listeners[t]||(this.listeners[t]=[],n=!0),this.listeners[t].push(r);const a=this.windowListeners[t];a&&!a.registered&&this.addWindowListener(a),n&&this.sendRetainedArgumentsForEvent(t);const l=async()=>this.removeListener(t,r);return Promise.resolve({remove:l})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,r,n){const i=this.listeners[t];if(!i){if(n){let a=this.retainedEventArguments[t];a||(a=[]),a.push(r),this.retainedEventArguments[t]=a}return}i.forEach(a=>a(r))}hasListeners(t){var r;return!!(!((r=this.listeners[t])===null||r===void 0)&&r.length)}registerWindowListener(t,r){this.windowListeners[r]={registered:!1,windowEventName:t,pluginEventName:r,handler:n=>{this.notifyListeners(r,n)}}}unimplemented(t="not implemented"){return new ji.Exception(t,kn.Unimplemented)}unavailable(t="not available"){return new ji.Exception(t,kn.Unavailable)}async removeListener(t,r){const n=this.listeners[t];if(!n)return;const i=n.indexOf(r);this.listeners[t].splice(i,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const r=this.retainedEventArguments[t];r&&(delete this.retainedEventArguments[t],r.forEach(n=>{this.notifyListeners(t,n)}))}}const mm=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),hm=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class lb extends Pd{async getCookies(){const t=document.cookie,r={};return t.split(";").forEach(n=>{if(n.length<=0)return;let[i,a]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=hm(i).trim(),a=hm(a).trim(),r[i]=a}),r}async setCookie(t){try{const r=mm(t.key),n=mm(t.value),i=`; expires=${(t.expires||"").replace("expires=","")}`,a=(t.path||"/").replace("path=",""),l=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${r}=${n||""}${i}; path=${a}; ${l};`}catch(r){return Promise.reject(r)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const r of t)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}Cd("CapacitorCookies",{web:()=>new lb});const ob=async e=>new Promise((t,r)=>{const n=new FileReader;n.onload=()=>{const i=n.result;t(i.indexOf(",")>=0?i.split(",")[1]:i)},n.onerror=i=>r(i),n.readAsDataURL(e)}),cb=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(i=>i.toLocaleLowerCase()).reduce((i,a,l)=>(i[a]=e[t[l]],i),{})},db=(e,t=!0)=>e?Object.entries(e).reduce((n,i)=>{const[a,l]=i;let o,c;return Array.isArray(l)?(c="",l.forEach(d=>{o=t?encodeURIComponent(d):d,c+=`${a}=${o}&`}),c.slice(0,-1)):(o=t?encodeURIComponent(l):l,c=`${a}=${o}`),`${n}&${c}`},"").substr(1):null,ub=(e,t={})=>{const r=Object.assign({method:e.method||"GET",headers:e.headers},t),i=cb(e.headers)["content-type"]||"";if(typeof e.data=="string")r.body=e.data;else if(i.includes("application/x-www-form-urlencoded")){const a=new URLSearchParams;for(const[l,o]of Object.entries(e.data||{}))a.set(l,o);r.body=a.toString()}else if(i.includes("multipart/form-data")||e.data instanceof FormData){const a=new FormData;if(e.data instanceof FormData)e.data.forEach((o,c)=>{a.append(c,o)});else for(const o of Object.keys(e.data))a.append(o,e.data[o]);r.body=a;const l=new Headers(r.headers);l.delete("content-type"),r.headers=l}else(i.includes("application/json")||typeof e.data=="object")&&(r.body=JSON.stringify(e.data));return r};class mb extends Pd{async request(t){const r=ub(t,t.webFetchExtra),n=db(t.params,t.shouldEncodeUrlParams),i=n?`${t.url}?${n}`:t.url,a=await fetch(i,r),l=a.headers.get("content-type")||"";let{responseType:o="text"}=a.ok?t:{};l.includes("application/json")&&(o="json");let c,d;switch(o){case"arraybuffer":case"blob":d=await a.blob(),c=await ob(d);break;case"json":c=await a.json();break;case"document":case"text":default:c=await a.text()}const u={};return a.headers.forEach((m,f)=>{u[f]=m}),{data:c,headers:u,status:a.status,url:a.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}Cd("CapacitorHttp",{web:()=>new mb});var fm;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(fm||(fm={}));var pm;(function(e){e.StatusBar="StatusBar",e.NavigationBar="NavigationBar"})(pm||(pm={}));class hb extends Pd{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}Cd("SystemBars",{web:()=>new hb});function fb(){const e=_t(),t=Ed(),{user:r,signOut:n}=gt(),{t:i,language:a}=tt(),l=ji.isNativePlatform(),{unreadCount:o,unreadMessages:c}=zd(),[d,u]=x.useState(!1),[m,f]=x.useState(null),[p,b]=x.useState(!1),j=x.useRef(0),S=x.useRef(0),y=50,h=[{label:i.nav.home,path:"/",icon:am},{label:i.nav.about,path:"/about",icon:kc},{label:i.nav.social,path:"/social",icon:Ps},{label:i.nav.analyze,path:"/analyze",icon:Ha},{label:i.nav.library,path:"/library",icon:_r}],g=[{label:i.nav.home,path:"/",icon:am},{label:i.nav.about,path:"/about",icon:kc}],_={label:i.nav.settings,path:"/settings",icon:Ja},$=[{label:i.nav.contact,path:"/contact",icon:nn}],A=[{label:i.nav.generator,path:"/generator",icon:ut}],M=E=>{e(E),u(!1)};x.useEffect(()=>{r?((async()=>{try{const{data:P,error:U}=await w.from("profiles").select("avatar_url, full_name").eq("id",r.id).single();if(U){console.error("Error loading user profile:",U);return}f(P)}catch(P){console.error("Error loading user profile:",P)}})(),(async()=>{try{const{data:P}=await w.from("subscriptions").select("plan_type").eq("user_id",r.id).single();b((P==null?void 0:P.plan_type)==="premium"||(P==null?void 0:P.plan_type)==="ruyagezer")}catch(P){console.error("Error checking premium status:",P)}})()):(f(null),b(!1))},[r]),x.useEffect(()=>(d?(document.body.style.overflow="hidden",document.body.style.touchAction="none"):(document.body.style.overflow="",document.body.style.touchAction=""),()=>{document.body.style.overflow="",document.body.style.touchAction=""}),[d]);const I=x.useCallback(E=>{j.current=E.touches[0].clientX,S.current=E.touches[0].clientX},[]),G=x.useCallback(E=>{S.current=E.touches[0].clientX},[]),K=x.useCallback(()=>{const E=S.current-j.current,W=j.current<30;!d&&E>y&&W?u(!0):d&&E<-y&&u(!1)},[d]);return x.useEffect(()=>{if(window.innerWidth<640)return document.addEventListener("touchstart",I,{passive:!0}),document.addEventListener("touchmove",G,{passive:!0}),document.addEventListener("touchend",K,{passive:!0}),()=>{document.removeEventListener("touchstart",I),document.removeEventListener("touchmove",G),document.removeEventListener("touchend",K)}},[I,G,K]),s.jsxs(s.Fragment,{children:[s.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-slate-950/90 backdrop-blur-xl border-b border-pink-500/20 shadow-lg shadow-pink-500/5",style:{paddingTop:"env(safe-area-inset-top)"},children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-2",style:{paddingLeft:"max(1rem, env(safe-area-inset-left))",paddingRight:"max(1rem, env(safe-area-inset-right))"},children:[s.jsxs("div",{className:"flex items-center justify-between gap-6",children:[s.jsx("div",{className:"flex sm:hidden items-center flex-shrink-0",children:s.jsxs("button",{onClick:()=>u(!d),className:"p-3 text-white hover:text-pink-400 transition-all duration-200 hover:scale-110 hover:bg-slate-900/50 rounded-lg border border-transparent hover:border-pink-500/20 relative z-[100] touch-manipulation","aria-label":"Toggle menu",style:{minWidth:"48px",minHeight:"48px"},children:[d?s.jsx(pt,{size:28,className:"text-pink-400"}):s.jsx(Av,{size:28,className:"text-white"}),!d&&o>0&&s.jsx("span",{className:"absolute top-1 right-1 min-w-[20px] h-[20px] bg-pink-500 rounded-full text-white text-[11px] flex items-center justify-center font-bold shadow-lg",children:o>9?"9+":o})]})}),s.jsx("div",{className:"hidden sm:flex items-center flex-shrink-0",children:s.jsx(sb,{})}),s.jsxs("div",{className:"hidden sm:flex items-center gap-3 flex-1",children:[h.map(E=>{const W=E.icon,P=t===E.path,U={"/":{text:"text-pink-400",bg:"bg-pink-500/10",shadow:"shadow-pink-500/20",badge:"bg-pink-400",line:"from-pink-400 via-pink-500 to-pink-400",hover:"hover:text-pink-400",hoverIcon:"group-hover:text-pink-400",iconGlow:"rgba(236,72,153,0.8)"},"/about":{text:"text-pink-400",bg:"bg-pink-500/10",shadow:"shadow-pink-500/20",badge:"bg-pink-400",line:"from-pink-400 via-pink-500 to-pink-400",hover:"hover:text-pink-400",hoverIcon:"group-hover:text-pink-400",iconGlow:"rgba(236,72,153,0.8)"},"/social":{text:"text-pink-400",bg:"bg-pink-500/10",shadow:"shadow-pink-500/20",badge:"bg-pink-400",line:"from-pink-400 via-pink-500 to-pink-400",hover:"hover:text-pink-400",hoverIcon:"group-hover:text-pink-400",iconGlow:"rgba(236,72,153,0.8)"},"/analyze":{text:"text-pink-400",bg:"bg-pink-500/10",shadow:"shadow-pink-500/20",badge:"bg-pink-400",line:"from-pink-400 via-pink-500 to-pink-400",hover:"hover:text-pink-400",hoverIcon:"group-hover:text-pink-400",iconGlow:"rgba(236,72,153,0.8)"},"/library":{text:"text-pink-400",bg:"bg-pink-500/10",shadow:"shadow-pink-500/20",badge:"bg-pink-400",line:"from-pink-400 via-pink-500 to-pink-400",hover:"hover:text-pink-400",hoverIcon:"group-hover:text-pink-400",iconGlow:"rgba(236,72,153,0.8)"}},k=U[E.path]||U["/"];return s.jsxs("button",{onClick:()=>e(E.path),className:`flex items-center gap-1.5 px-2.5 py-2 rounded-lg text-sm font-medium transition-all duration-300 relative group whitespace-nowrap ${P?`text-white ${k.bg} shadow-lg ${k.shadow} scale-105`:`text-white ${k.hover} hover:bg-slate-800/50 hover:scale-105`}`,children:[s.jsx(W,{size:16,className:`transition-all duration-300 flex-shrink-0 ${P?k.text:`text-slate-400 ${k.hoverIcon}`}`,style:P?{filter:`drop-shadow(0 0 8px ${k.iconGlow})`}:{}}),s.jsx("span",{className:"text-white transition-all duration-300",children:E.label}),P&&s.jsx("span",{className:`absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full ${k.badge} animate-pulse`,style:{boxShadow:`0 0 8px ${k.iconGlow}`}}),s.jsx("span",{className:`absolute -bottom-1 left-0 w-0 h-[2px] bg-gradient-to-r ${k.line} transition-all duration-500 ease-out group-hover:w-full ${P?"w-full":""}`,style:P?{boxShadow:`0 0 8px ${k.iconGlow}`}:{}}),P&&s.jsx("span",{className:"absolute -bottom-1 left-0 w-full h-[2px] bg-gradient-to-r from-transparent via-current to-transparent opacity-50 animate-pulse",style:{color:"inherit"}})]},E.path)}),r&&A.map(E=>{const W=t===E.path;return s.jsxs("button",{onClick:()=>e(E.path),className:`flex items-center gap-1.5 px-2.5 py-2 rounded-lg text-sm font-medium transition-all duration-300 relative group whitespace-nowrap ${W?"text-white bg-gradient-to-r from-pink-500/10 to-yellow-500/10 shadow-lg shadow-pink-500/20 scale-105":"text-white hover:bg-slate-800/50 hover:scale-105"}`,children:[s.jsx(E.icon,{size:16,className:`flex-shrink-0 ${p?W?"text-yellow-300 drop-shadow-[0_0_8px_rgba(253,224,71,0.8)]":"text-yellow-400 drop-shadow-[0_0_4px_rgba(250,204,21,0.4)] group-hover:drop-shadow-[0_0_6px_rgba(253,224,71,0.6)]":"text-yellow-400 drop-shadow-[0_0_4px_rgba(250,204,21,0.4)]"}`}),s.jsx("span",{className:"text-white",children:E.label}),!p&&s.jsx(wt,{size:12,className:"text-pink-400 flex-shrink-0"}),s.jsx("span",{className:`absolute -bottom-1 left-0 w-0 h-[2px] bg-gradient-to-r from-pink-400 via-yellow-400 to-pink-400 transition-all duration-500 ease-out group-hover:w-full ${W?"w-full":""} ${W?"shadow-[0_0_10px_rgba(236,72,153,0.8),0_0_6px_rgba(250,204,21,0.6)]":""}`}),W&&s.jsx("span",{className:"absolute -bottom-1 left-0 w-full h-[2px] bg-gradient-to-r from-transparent via-yellow-300 to-transparent opacity-50 animate-pulse"}),W&&s.jsx("span",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full bg-yellow-400 animate-pulse shadow-[0_0_8px_rgba(250,204,21,0.8)]"})]},E.path)}),$.map(E=>{const W=E.icon,P=t===E.path,U={text:"text-pink-400",bg:"bg-pink-500/10",shadow:"shadow-pink-500/20",badge:"bg-pink-400",line:"from-pink-400 via-pink-500 to-pink-400",hover:"hover:text-pink-400",hoverIcon:"group-hover:text-pink-400",iconGlow:"rgba(236,72,153,0.8)"};return s.jsxs("button",{onClick:()=>e(E.path),className:`flex items-center gap-1.5 px-2.5 py-2 rounded-lg text-sm font-medium transition-all duration-300 relative group whitespace-nowrap ${P?`text-white ${U.bg} shadow-lg ${U.shadow} scale-105`:`text-white ${U.hover} hover:bg-slate-800/50 hover:scale-105`}`,children:[s.jsx(W,{size:16,className:`transition-all duration-300 flex-shrink-0 ${P?U.text:`text-slate-400 ${U.hoverIcon}`}`,style:P?{filter:`drop-shadow(0 0 8px ${U.iconGlow})`}:{}}),s.jsx("span",{className:"text-white transition-all duration-300",children:E.label}),P&&s.jsx("span",{className:`absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full ${U.badge} animate-pulse`,style:{boxShadow:`0 0 8px ${U.iconGlow}`}}),s.jsx("span",{className:`absolute -bottom-1 left-0 w-0 h-[2px] bg-gradient-to-r ${U.line} transition-all duration-500 ease-out group-hover:w-full ${P?"w-full":""}`,style:P?{boxShadow:`0 0 8px ${U.iconGlow}`}:{}}),P&&s.jsx("span",{className:"absolute -bottom-1 left-0 w-full h-[2px] bg-gradient-to-r from-transparent via-current to-transparent opacity-50 animate-pulse",style:{color:"inherit"}})]},E.path)})]}),s.jsxs("div",{className:"hidden sm:flex items-center gap-3 flex-shrink-0",children:[s.jsx("button",{onClick:()=>e("/pricing"),className:`px-4 py-2 rounded-lg bg-gradient-to-r from-pink-600 via-purple-600 via-pink-500 to-purple-600 text-white text-sm font-semibold hover:shadow-xl hover:shadow-pink-500/40 hover:scale-105 active:scale-95 transition-all duration-300 bg-[length:200%_auto] animate-gradient ${t==="/pricing"?"ring-2 ring-pink-400 ring-offset-2 ring-offset-slate-950":""}`,children:i.nav.buy}),s.jsx(dm,{}),r?s.jsxs(s.Fragment,{children:[s.jsx(um,{}),s.jsxs("button",{onClick:()=>e("/messages"),className:"relative p-2 text-slate-400 hover:text-purple-400 transition-colors",title:i.nav.messages,children:[s.jsx(Ya,{size:20}),c>0&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 min-w-[18px] h-[18px] bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center font-bold px-1",children:c>99?"99+":c})]}),s.jsx("button",{onClick:()=>e("/settings"),className:"p-2 text-slate-400 hover:text-purple-400 transition-colors",title:i.nav.settings||"Settings",children:s.jsx(Ja,{size:20})}),s.jsx("button",{onClick:()=>e("/profile"),className:"flex items-center gap-2 p-1 rounded-full bg-slate-800/50 hover:bg-slate-700/50 transition-all duration-200 group",title:(m==null?void 0:m.full_name)||"Profile",children:s.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border border-pink-500/30 flex items-center justify-center overflow-hidden group-hover:border-pink-500/50 transition-all",children:m!=null&&m.avatar_url?s.jsx("img",{src:m.avatar_url,alt:"Profile",className:"w-full h-full object-cover rounded-full"}):s.jsx(Je,{className:"text-pink-400",size:16})})}),s.jsx("button",{onClick:n,className:"p-2 text-slate-400 hover:text-pink-400 transition-colors",title:i.nav.signOut,children:s.jsx(om,{size:20})})]}):s.jsx("button",{onClick:()=>e("/signin"),className:`px-6 py-2 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-medium hover:from-pink-500 hover:to-purple-500 transition-all duration-200 hover:shadow-lg hover:shadow-pink-500/30 ${t==="/signin"?"ring-2 ring-pink-400":""}`,children:i.nav.signIn})]}),s.jsx("div",{className:"flex sm:hidden flex-1 justify-end items-center pr-2",children:s.jsx("span",{className:"text-lg font-bold bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent animate-gradient-slow",style:{backgroundSize:"200% auto",animation:"gradient-shift 4s ease-in-out infinite"},children:"Submirra"})})]}),d&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"sm:hidden fixed top-14 left-0 right-0 bottom-0 bg-black/50 z-40",onClick:()=>u(!1)}),s.jsx("div",{className:"sm:hidden fixed top-14 left-0 w-72 h-[calc(100vh-56px)] bg-slate-950/95 backdrop-blur-xl border-r border-pink-500/20 z-50 animate-slide-in-left overflow-y-auto pb-20",children:s.jsxs("div",{className:"flex flex-col gap-3 p-4",children:[g.map((E,W)=>s.jsxs("button",{onClick:()=>M(E.path),className:`flex items-center gap-3 px-4 py-2 rounded-lg font-medium transition-all duration-200 animate-fade-in ${t===E.path?"bg-pink-500/10 text-pink-400":"text-slate-300 hover:bg-slate-800/50 hover:text-pink-400"}`,style:{animationDelay:`${W*.05}s`},children:[s.jsx(E.icon,{size:18}),E.label]},E.path)),r&&s.jsx("div",{className:"animate-fade-in",style:{animationDelay:`${g.length*.05}s`},children:s.jsx(um,{variant:"sidebar"})}),r&&A.map((E,W)=>s.jsxs("button",{onClick:()=>M(E.path),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 animate-fade-in ${t===E.path?"bg-gradient-to-r from-pink-500/10 to-yellow-500/10 text-pink-400":"text-slate-300 hover:bg-slate-800/50 hover:text-pink-400"}`,style:{animationDelay:`${(h.length+W)*.05}s`},children:[s.jsx(E.icon,{size:18,className:"text-yellow-400"}),E.label,!p&&s.jsx(wt,{size:14,className:"text-pink-400 ml-auto"})]},E.path)),$.map((E,W)=>s.jsxs("button",{onClick:()=>M(E.path),className:`flex items-center gap-3 px-4 py-2 rounded-lg font-medium transition-all duration-200 animate-fade-in ${t===E.path?"bg-pink-500/10 text-pink-400":"text-slate-300 hover:bg-slate-800/50 hover:text-pink-400"}`,style:{animationDelay:`${(h.length+(p?A.length:0)+W)*.05}s`},children:[s.jsx(E.icon,{size:18}),E.label]},E.path)),s.jsxs("button",{onClick:()=>M(_.path),className:`flex items-center gap-3 px-4 py-2 rounded-lg font-medium transition-all duration-200 animate-fade-in ${t===_.path?"bg-pink-500/10 text-pink-400":"text-slate-300 hover:bg-slate-800/50 hover:text-pink-400"}`,style:{animationDelay:`${(h.length+(p?A.length:0)+$.length)*.05}s`},children:[s.jsx(_.icon,{size:18}),_.label]}),s.jsxs("button",{onClick:()=>{e("/pricing"),u(!1)},className:`flex items-center gap-3 px-4 py-2 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-medium hover:from-pink-500 hover:to-purple-500 transition-all duration-200 animate-fade-in ${t==="/pricing"?"ring-2 ring-pink-400":""}`,style:{animationDelay:`${(h.length+$.length)*.05}s`},children:[s.jsx(zv,{size:18}),i.nav.buy]}),r?s.jsx(s.Fragment,{children:s.jsxs("button",{onClick:()=>{n(),u(!1)},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-pink-600/20 to-purple-600/20 border border-pink-500/30 text-pink-300 hover:border-pink-400/50 hover:text-pink-200 transition-all duration-200 animate-fade-in",style:{animationDelay:`${(h.length+$.length+1)*.05}s`},children:[s.jsx(om,{size:16}),i.nav.signOut]})}):s.jsx("button",{onClick:()=>{e("/signin"),u(!1)},className:`text-left px-4 py-2 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-medium hover:from-pink-500 hover:to-purple-500 transition-all duration-200 animate-fade-in ${t==="/signin"?"ring-2 ring-pink-400":""}`,style:{animationDelay:`${(h.length+$.length+1)*.05}s`},children:i.nav.signIn}),s.jsx("div",{className:"pt-2 mt-2",children:s.jsx(dm,{})}),!l&&s.jsx("div",{className:"pt-3 mt-1",children:s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-slate-800/50 border border-slate-600/30 rounded-lg opacity-60 cursor-not-allowed",children:[s.jsx("svg",{className:"w-5 h-5 text-slate-400",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M3.609 1.814L13.792 12 3.61 22.186a.996.996 0 0 1-.61-.92V2.734a1 1 0 0 1 .609-.92zm10.89 10.893l2.302 2.302-10.937 6.333 8.635-8.635zm3.199-3.198l2.807 1.626a1 1 0 0 1 0 1.73l-2.808 1.626L15.206 12l2.492-2.491zM5.864 2.658L16.802 8.99l-2.303 2.303-8.635-8.635z"})}),s.jsx("span",{className:"text-slate-400 text-sm font-medium",children:"Google Play"}),s.jsxs("div",{className:"flex items-center gap-1 ml-auto px-2 py-0.5 bg-slate-700/80 rounded text-xs text-slate-300",children:[s.jsx(wt,{size:12}),s.jsx("span",{children:a==="tr"?"Yaknda":"Soon"})]})]})})]})})]})]})}),r&&s.jsx("div",{className:"sm:hidden fixed bottom-0 left-0 right-0 z-[60] bg-slate-950/95 backdrop-blur-xl border-t border-pink-500/20 shadow-lg shadow-pink-500/10",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:s.jsxs("div",{className:"grid grid-cols-5 gap-0 px-1 py-2 relative",style:{minHeight:"56px"},children:[s.jsx("button",{onClick:()=>e("/social"),className:`flex justify-center p-3 transition-colors ${t==="/social"?"text-pink-400":"text-slate-400 hover:text-pink-300"}`,title:i.nav.social,children:s.jsx(Ps,{size:22})}),s.jsxs("button",{onClick:()=>e("/messages"),className:`relative flex justify-center p-3 transition-colors ${t==="/messages"?"text-purple-400":"text-slate-400 hover:text-purple-300"}`,title:i.nav.messages,children:[s.jsx(Ya,{size:22}),c>0&&s.jsx("span",{className:"absolute top-1 right-2 min-w-[16px] h-[16px] bg-gradient-to-r from-pink-500 to-purple-500 rounded-full text-white text-[9px] flex items-center justify-center font-bold shadow-lg animate-pulse",children:c>99?"99+":c})]}),s.jsx("div",{className:"flex justify-center",children:s.jsxs("button",{onClick:()=>e("/analyze"),className:`absolute -top-6 left-1/2 -translate-x-1/2 w-14 h-14 rounded-full flex items-center justify-center transition-all duration-500 shadow-lg ${t==="/analyze"?"bg-gradient-to-br from-pink-500 via-purple-500 to-cyan-500 shadow-purple-500/50 scale-110":"bg-gradient-to-br from-pink-600 via-purple-600 to-cyan-600 hover:from-pink-500 hover:via-purple-500 hover:to-cyan-500 shadow-purple-500/30 hover:shadow-purple-500/50 hover:scale-105"}`,title:i.nav.analyze,style:{animation:t!=="/analyze"?"float-gentle 3s ease-in-out infinite":"none"},children:[s.jsx("div",{className:"absolute -inset-1 rounded-full bg-gradient-to-br from-pink-500/30 via-purple-500/30 to-cyan-500/30 blur-sm",style:{animation:"pulse-slow 4s ease-in-out infinite"}}),s.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-conic from-pink-500 via-purple-500 via-cyan-500 to-pink-500 opacity-20",style:{animation:"spin-slow 8s linear infinite"}}),s.jsx("div",{className:"absolute inset-0 rounded-full overflow-hidden",style:{animation:"shimmer 3s ease-in-out infinite"},children:s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full",style:{animation:"shimmer-move 3s ease-in-out infinite"}})}),s.jsx(Ha,{size:26,className:"text-white relative z-10",style:{filter:"drop-shadow(0 0 6px rgba(236, 72, 153, 0.5))",animation:"breathe 4s ease-in-out infinite"}})]})}),s.jsx("button",{onClick:()=>e("/library"),className:`flex justify-center p-3 transition-colors ${t==="/library"?"text-pink-400":"text-slate-400 hover:text-pink-300"}`,title:i.nav.library,children:s.jsx(_r,{size:22})}),s.jsx("button",{onClick:()=>e("/profile"),className:"p-2.5 flex justify-center items-center",title:(m==null?void 0:m.full_name)||"Profile",children:s.jsx("div",{className:`w-[26px] h-[26px] rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border flex items-center justify-center overflow-hidden transition-all ${t==="/profile"?"border-pink-500/60 shadow-lg shadow-pink-500/30":"border-pink-500/30"}`,children:m!=null&&m.avatar_url?s.jsx("img",{src:m.avatar_url,alt:"Profile",className:"w-full h-full object-cover rounded-full"}):s.jsx(Je,{className:"text-pink-400",size:14})})})]})})]})}function pb(){const e=_t(),{t,language:r}=tt(),n=ji.isNativePlatform();return s.jsx("footer",{className:"relative border-t border-purple-500/20 bg-slate-950/50 backdrop-blur-sm",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-6 py-4",style:{paddingLeft:"max(1rem, env(safe-area-inset-left))",paddingRight:"max(1.5rem, env(safe-area-inset-right))"},children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{className:"hidden md:flex items-center gap-6 text-sm",children:[!n&&s.jsx("div",{className:"relative group cursor-not-allowed",children:s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-800/50 border border-slate-600/30 rounded-lg opacity-60",children:[s.jsx("svg",{className:"w-4 h-4 text-slate-400",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M3.609 1.814L13.792 12 3.61 22.186a.996.996 0 0 1-.61-.92V2.734a1 1 0 0 1 .609-.92zm10.89 10.893l2.302 2.302-10.937 6.333 8.635-8.635zm3.199-3.198l2.807 1.626a1 1 0 0 1 0 1.73l-2.808 1.626L15.206 12l2.492-2.491zM5.864 2.658L16.802 8.99l-2.303 2.303-8.635-8.635z"})}),s.jsx("span",{className:"text-slate-400 text-xs font-medium",children:"Google Play"}),s.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-0.5 bg-slate-700/80 rounded text-[10px] text-slate-300",children:[s.jsx(wt,{size:10}),s.jsx("span",{children:r==="tr"?"Yaknda":"Soon"})]})]})}),s.jsx("button",{onClick:()=>e("/terms"),className:"text-slate-400 hover:text-purple-400 transition-colors",children:t.footer.termsOfService}),s.jsx("button",{onClick:()=>e("/privacy"),className:"text-slate-400 hover:text-purple-400 transition-colors",children:t.footer.privacyPolicy}),s.jsx("button",{onClick:()=>e("/feedback"),className:"text-slate-400 hover:text-purple-400 transition-colors",children:t.footer.feedback})]}),s.jsxs("div",{className:"hidden sm:block text-slate-500 text-xs",children:[" ",new Date().getFullYear()," Submirra. All rights reserved."]})]})})})}function gb(){const e=x.useRef(null);return x.useEffect(()=>{const t=e.current;if(!t)return;const r=t.getContext("2d");if(!r)return;let n,i=[],a=window.innerWidth/2,l=window.innerHeight/2,o=a,c=l;const d=()=>{t.width=window.innerWidth,t.height=window.innerHeight,u()},u=()=>{i=[];const j=Math.floor(t.width*t.height/3e3);for(let S=0;S<j;S++){const y=(Math.random()-.5)*.3,h=(Math.random()-.5)*.3;i.push({x:Math.random()*t.width,y:Math.random()*t.height,z:Math.random()*3,size:Math.random()*1.5+.5,vx:y,vy:h,baseVx:y,baseVy:h})}},m=j=>{o=j.clientX,c=j.clientY},f=()=>{a+=(o-a)*.02,l+=(c-l)*.02;const j=t.width/2,S=t.height/2,y=(a-j)/j,h=(l-S)/S;i.forEach(g=>{const _=.15*(g.z/3);g.vx=g.baseVx+y*_,g.vy=g.baseVy+h*_,g.x+=g.vx,g.y+=g.vy,g.x<0&&(g.x=t.width),g.x>t.width&&(g.x=0),g.y<0&&(g.y=t.height),g.y>t.height&&(g.y=0)})},p=()=>{r.clearRect(0,0,t.width,t.height),i.forEach(j=>{const S=.3+j.z/3*.7;r.fillStyle=`rgba(255, 255, 255, ${S})`,r.beginPath(),r.arc(j.x,j.y,j.size,0,Math.PI*2),r.fill(),Math.random()>.998&&(r.shadowBlur=10,r.shadowColor=j.z>2?"#ec4899":j.z>1?"#a855f7":"#06b6d4",r.fill(),r.shadowBlur=0)})},b=()=>{f(),p(),n=requestAnimationFrame(b)};return d(),b(),window.addEventListener("resize",d),window.addEventListener("mousemove",m),()=>{window.removeEventListener("resize",d),window.removeEventListener("mousemove",m),cancelAnimationFrame(n)}},[]),s.jsx("canvas",{ref:e,className:"fixed inset-0 pointer-events-none z-0",style:{opacity:.4}})}function gm(){const e=_t(),{user:t}=gt(),{t:r}=tt(),[n,i]=x.useState({x:0,y:0});return x.useEffect(()=>{let a,l=0,o=0;const c=d=>{a&&cancelAnimationFrame(a),a=requestAnimationFrame(()=>{const u=(d.clientX/window.innerWidth-.5)*20,m=(d.clientY/window.innerHeight-.5)*20;(Math.abs(u-l)>.5||Math.abs(m-o)>.5)&&(i({x:u,y:m}),l=u,o=m)})};return window.addEventListener("mousemove",c,{passive:!0}),()=>{window.removeEventListener("mousemove",c),a&&cancelAnimationFrame(a)}},[]),s.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[s.jsx("style",{children:`
        @keyframes nebulaFlow {
          0%, 100% { 
            transform: translateY(0) scale(1); 
            opacity: 0.2; 
          }
          50% { 
            transform: translateY(-20px) scale(1.08); 
            opacity: 0.3; 
          }
        }
        @keyframes gradientShift {
          0%, 100% {
            background-position: 0% 50%;
          }
          50% {
            background-position: 100% 50%;
          }
        }
      `}),s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-40 right-20 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl",style:{transform:`translate3d(${n.x*.08}px, ${n.y*.08}px, 0)`,transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform"}}),s.jsx("div",{className:"absolute bottom-20 left-1/3 w-80 h-80 bg-cyan-500/5 rounded-full blur-3xl",style:{transform:`translate3d(${n.x*.12}px, ${n.y*.12}px, 0)`,transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform"}}),s.jsx("div",{className:"absolute top-[20%] right-[12%] w-[400px] h-[400px] md:w-[550px] md:h-[550px] opacity-15",style:{background:"radial-gradient(circle, rgba(139, 92, 246, 0.3) 0%, rgba(99, 102, 241, 0.2) 40%, transparent 100%)",filter:"blur(70px)",transform:`translate3d(${n.x*.05}px, ${n.y*.05}px, 0)`,transition:"transform 0.4s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform",borderRadius:"50%"}}),s.jsxs("svg",{className:"absolute top-[10%] right-[8%] w-[450px] h-[650px] md:w-[650px] md:h-[850px] opacity-20",viewBox:"0 0 450 650",style:{transform:`translate3d(${n.x*.03}px, ${n.y*.03}px, 0)`,transition:"transform 0.5s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform",filter:"blur(45px)",animation:"nebulaFlow 14s ease-in-out infinite",animationDelay:"1.5s"},children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"lavenderNebulaGrad",x1:"0%",y1:"100%",x2:"0%",y2:"0%",children:[s.jsx("stop",{offset:"0%",stopColor:"rgba(167, 139, 250, 0.4)"}),s.jsx("stop",{offset:"25%",stopColor:"rgba(192, 132, 252, 0.32)"}),s.jsx("stop",{offset:"50%",stopColor:"rgba(196, 181, 253, 0.28)"}),s.jsx("stop",{offset:"75%",stopColor:"rgba(167, 139, 250, 0.2)"}),s.jsx("stop",{offset:"100%",stopColor:"rgba(192, 132, 252, 0.1)"})]})}),s.jsx("path",{d:"M 400,600 Q 350,500 300,450 Q 250,400 200,350 Q 150,300 100,250 Q 50,200 0,150",stroke:"url(#lavenderNebulaGrad)",strokeWidth:"120",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 350,600 Q 300,500 250,450 Q 200,400 150,350 Q 100,300 50,250",stroke:"url(#lavenderNebulaGrad)",strokeWidth:"100",fill:"none",strokeLinecap:"round",opacity:"0.7"}),s.jsx("path",{d:"M 375,600 Q 325,500 275,450 Q 225,400 175,350 Q 125,300 75,250 Q 25,200 0,180",stroke:"url(#lavenderNebulaGrad)",strokeWidth:"85",fill:"none",strokeLinecap:"round",opacity:"0.55"})]})]}),s.jsx("div",{className:"relative pt-24 md:pt-32 pb-16 md:pb-20 px-4 md:px-6 z-10",children:s.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[s.jsxs("div",{className:"mb-6 md:mb-8 inline-block animate-fade-in",children:[s.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-bold mb-3 md:mb-4 bg-clip-text text-transparent py-2 leading-tight px-2",style:{background:"linear-gradient(90deg, #f472b6, #c084fc, #a78bfa, #818cf8, #22d3ee, #c084fc, #f472b6)",backgroundSize:"300% 100%",WebkitBackgroundClip:"text",backgroundClip:"text",animation:"gradientShift 8s ease-in-out infinite",willChange:"background-position",transform:"translateZ(0)"},children:r.home.title}),s.jsx("p",{className:"text-lg sm:text-xl md:text-2xl text-slate-200 font-light tracking-wide px-2",children:r.home.subtitle})]}),s.jsx("p",{className:"text-base md:text-lg text-slate-300 max-w-3xl mx-auto mb-8 md:mb-12 leading-relaxed px-4",children:r.home.description}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mb-12",children:[s.jsxs("button",{onClick:()=>e(t?"/analyze":"/signin"),className:"group px-8 md:px-10 py-4 md:py-5 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold text-base md:text-lg hover:from-pink-500 hover:to-purple-500 transition-all duration-300 flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-pink-500/50 focus:ring-offset-2 focus:ring-offset-slate-950 active:scale-95",style:{transform:`translate3d(${n.x*.05}px, ${n.y*.05}px, 0)`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform"},"aria-label":t?r.home.cta:r.home.getStarted,children:[t?r.home.cta:r.home.getStarted,s.jsx(Nd,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform duration-300"})]}),s.jsx("button",{onClick:()=>e("/about"),className:"px-8 md:px-10 py-4 md:py-5 rounded-lg bg-slate-900/50 backdrop-blur-sm border border-purple-500/30 text-slate-200 font-semibold text-base md:text-lg hover:border-purple-500/50 hover:text-white hover:bg-slate-800/60 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:ring-offset-2 focus:ring-offset-slate-950 active:scale-95",style:{transform:`translate3d(${n.x*.05}px, ${n.y*.05}px, 0)`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform"},"aria-label":r.home.learnMore,children:r.home.learnMore})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8 mt-12 md:mt-24 max-w-7xl mx-auto",children:[s.jsxs("div",{onClick:()=>e("/analyze"),className:"group bg-slate-900/70 backdrop-blur-sm rounded-2xl p-6 hover:shadow-xl hover:shadow-pink-500/25 transition-all duration-500 relative overflow-hidden hover:-translate-y-2 focus-within:ring-2 focus-within:ring-pink-500/50 focus-within:ring-offset-2 focus-within:ring-offset-slate-950 cursor-pointer",style:{transform:`translate3d(${n.x*.03}px, ${n.y*.03}px, 0)`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform",boxShadow:"0 0 0 0.5px rgba(236, 72, 153, 0.12), inset 0 0 0 0.5px rgba(236, 72, 153, 0.06), 0 1px 2px rgba(0, 0, 0, 0.1), 0 0 20px rgba(236, 72, 153, 0.08)"},onMouseEnter:a=>{a.currentTarget.style.boxShadow="0 0 0 0.5px rgba(236, 72, 153, 0.25), inset 0 0 0 0.5px rgba(236, 72, 153, 0.12), 0 4px 12px rgba(236, 72, 153, 0.15), 0 0 30px rgba(236, 72, 153, 0.12)"},onMouseLeave:a=>{a.currentTarget.style.boxShadow="0 0 0 0.5px rgba(236, 72, 153, 0.12), inset 0 0 0 0.5px rgba(236, 72, 153, 0.06), 0 1px 2px rgba(0, 0, 0, 0.1), 0 0 20px rgba(236, 72, 153, 0.08)"},tabIndex:0,role:"article","aria-label":r.home.feature1Title,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-pink-500/10 to-transparent opacity-40 group-hover:opacity-100 transition-opacity duration-500"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-pink-500/30 to-pink-600/20 flex items-center justify-center border-2 border-pink-500/40 transition-all duration-500 group-hover:scale-110 group-hover:shadow-xl group-hover:shadow-pink-500/40 group-hover:border-pink-400/60",children:s.jsx(Ha,{className:"w-8 h-8 text-pink-400 group-hover:text-pink-300 transition-colors"})}),s.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-pink-100 transition-colors",children:r.home.feature1Title}),s.jsx("p",{className:"text-sm text-slate-300 leading-relaxed mb-4 group-hover:text-slate-200 transition-colors",children:r.home.feature1Desc}),s.jsx("div",{className:"grid grid-cols-2 gap-1.5 mb-3",children:r.home.feature1Details.split("  ").map((a,l)=>s.jsx("div",{className:"px-3 py-2 bg-pink-500/20 text-pink-300 text-xs font-medium rounded-md border border-pink-500/30 group-hover:bg-pink-500/30 group-hover:border-pink-400/50 transition-all text-center h-[2.25rem] flex items-center justify-center",children:a},l))}),s.jsxs("div",{className:"flex justify-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:[s.jsx(Sd,{className:"w-4 h-4 text-pink-400"}),s.jsx(nf,{className:"w-4 h-4 text-pink-400"}),s.jsx(fo,{className:"w-4 h-4 text-pink-400"})]})]})]}),s.jsxs("div",{onClick:()=>e("/analyze"),className:"group bg-slate-900/70 backdrop-blur-sm rounded-2xl p-6 hover:shadow-xl hover:shadow-purple-500/25 transition-all duration-500 relative overflow-hidden hover:-translate-y-2 focus-within:ring-2 focus-within:ring-purple-500/50 focus-within:ring-offset-2 focus-within:ring-offset-slate-950 cursor-pointer",style:{transform:`translate3d(${n.x*.03}px, ${n.y*.03}px, 0)`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform",boxShadow:"0 0 0 0.5px rgba(167, 139, 250, 0.12), inset 0 0 0 0.5px rgba(167, 139, 250, 0.06), 0 1px 2px rgba(0, 0, 0, 0.1), 0 0 20px rgba(167, 139, 250, 0.08)"},onMouseEnter:a=>{a.currentTarget.style.boxShadow="0 0 0 0.5px rgba(167, 139, 250, 0.25), inset 0 0 0 0.5px rgba(167, 139, 250, 0.12), 0 4px 12px rgba(167, 139, 250, 0.15), 0 0 30px rgba(167, 139, 250, 0.12)"},onMouseLeave:a=>{a.currentTarget.style.boxShadow="0 0 0 0.5px rgba(167, 139, 250, 0.12), inset 0 0 0 0.5px rgba(167, 139, 250, 0.06), 0 1px 2px rgba(0, 0, 0, 0.1), 0 0 20px rgba(167, 139, 250, 0.08)"},tabIndex:0,role:"article","aria-label":r.home.feature2Title,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 to-transparent opacity-40 group-hover:opacity-100 transition-opacity duration-500"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-purple-500/30 to-purple-600/20 flex items-center justify-center border-2 border-purple-500/40 transition-all duration-500 group-hover:scale-110 group-hover:shadow-xl group-hover:shadow-purple-500/40 group-hover:border-purple-400/60",children:s.jsx(Ka,{className:"w-8 h-8 text-purple-400 group-hover:text-purple-300 transition-colors"})}),s.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-purple-100 transition-colors",children:r.home.feature2Title}),s.jsx("p",{className:"text-sm text-slate-300 leading-relaxed mb-6 group-hover:text-slate-200 transition-colors",children:r.home.feature2Desc}),s.jsx("div",{className:"grid grid-cols-2 gap-1.5 mb-3",children:r.home.feature2Details.split("  ").map((a,l)=>s.jsx("div",{className:"px-3 py-2 bg-purple-500/20 text-purple-300 text-xs font-medium rounded-md border border-purple-500/30 group-hover:bg-purple-500/30 group-hover:border-purple-400/50 transition-all text-center h-[2.25rem] flex items-center justify-center",children:a},l))}),s.jsxs("div",{className:"flex justify-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:[s.jsx(Rv,{className:"w-4 h-4 text-purple-400"}),s.jsx(ut,{className:"w-4 h-4 text-purple-400"}),s.jsx(Ka,{className:"w-4 h-4 text-purple-400"})]})]})]}),s.jsxs("div",{onClick:()=>e(t?"/library":"/signin"),className:"group bg-slate-900/70 backdrop-blur-sm rounded-2xl p-6 hover:shadow-xl hover:shadow-cyan-500/25 transition-all duration-500 relative overflow-hidden hover:-translate-y-2 focus-within:ring-2 focus-within:ring-cyan-500/50 focus-within:ring-offset-2 focus-within:ring-offset-slate-950 cursor-pointer",style:{transform:`translate3d(${n.x*.03}px, ${n.y*.03}px, 0)`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform",boxShadow:"0 0 0 0.5px rgba(6, 182, 212, 0.12), inset 0 0 0 0.5px rgba(6, 182, 212, 0.06), 0 1px 2px rgba(0, 0, 0, 0.1)"},onMouseEnter:a=>{a.currentTarget.style.boxShadow="0 0 0 0.5px rgba(6, 182, 212, 0.25), inset 0 0 0 0.5px rgba(6, 182, 212, 0.12), 0 4px 12px rgba(6, 182, 212, 0.15)"},onMouseLeave:a=>{a.currentTarget.style.boxShadow="0 0 0 0.5px rgba(6, 182, 212, 0.12), inset 0 0 0 0.5px rgba(6, 182, 212, 0.06), 0 1px 2px rgba(0, 0, 0, 0.1)"},tabIndex:0,role:"article","aria-label":r.home.feature3Title,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 to-transparent opacity-30 group-hover:opacity-100 transition-opacity duration-500"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-cyan-500/30 to-cyan-600/20 flex items-center justify-center border-2 border-cyan-500/40 transition-all duration-500 group-hover:scale-110 group-hover:shadow-xl group-hover:shadow-cyan-500/40 group-hover:border-cyan-400/60",children:s.jsx(_r,{className:"w-8 h-8 text-cyan-400 group-hover:text-cyan-300 transition-colors"})}),s.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-cyan-100 transition-colors",children:r.home.feature3Title}),s.jsx("p",{className:"text-sm text-slate-300 leading-relaxed mb-5 group-hover:text-slate-200 transition-colors",children:r.home.feature3Desc}),s.jsx("div",{className:"grid grid-cols-2 gap-1.5 mb-3",children:r.home.feature3Details.split("  ").map((a,l)=>s.jsx("div",{className:"px-3 py-2 bg-cyan-500/20 text-cyan-300 text-xs font-medium rounded-md border border-cyan-500/30 group-hover:bg-cyan-500/30 group-hover:border-cyan-400/50 transition-all text-center h-[2.25rem] flex items-center justify-center",children:a},l))}),s.jsxs("div",{className:"flex justify-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:[s.jsx(Ev,{className:"w-4 h-4 text-cyan-400"}),s.jsx(fo,{className:"w-4 h-4 text-cyan-400"}),s.jsx(_r,{className:"w-4 h-4 text-cyan-400"})]})]})]}),s.jsxs("div",{onClick:()=>e(t?"/social":"/signin"),className:"group bg-slate-900/70 backdrop-blur-sm rounded-2xl p-6 hover:shadow-xl hover:shadow-green-500/25 transition-all duration-500 relative overflow-hidden hover:-translate-y-2 focus-within:ring-2 focus-within:ring-green-500/50 focus-within:ring-offset-2 focus-within:ring-offset-slate-950 cursor-pointer",style:{transform:`translate3d(${n.x*.03}px, ${n.y*.03}px, 0)`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform",boxShadow:"0 0 0 0.5px rgba(34, 197, 94, 0.12), inset 0 0 0 0.5px rgba(34, 197, 94, 0.06), 0 1px 2px rgba(0, 0, 0, 0.1), 0 0 20px rgba(34, 197, 94, 0.08)"},onMouseEnter:a=>{a.currentTarget.style.boxShadow="0 0 0 0.5px rgba(34, 197, 94, 0.25), inset 0 0 0 0.5px rgba(34, 197, 94, 0.12), 0 4px 12px rgba(34, 197, 94, 0.15), 0 0 30px rgba(34, 197, 94, 0.12)"},onMouseLeave:a=>{a.currentTarget.style.boxShadow="0 0 0 0.5px rgba(34, 197, 94, 0.12), inset 0 0 0 0.5px rgba(34, 197, 94, 0.06), 0 1px 2px rgba(0, 0, 0, 0.1), 0 0 20px rgba(34, 197, 94, 0.08)"},tabIndex:0,role:"article","aria-label":r.home.feature4Title,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/10 to-transparent opacity-40 group-hover:opacity-100 transition-opacity duration-500"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-green-500/30 to-green-600/20 flex items-center justify-center border-2 border-green-500/40 transition-all duration-500 group-hover:scale-110 group-hover:shadow-xl group-hover:shadow-green-500/40 group-hover:border-green-400/60",children:s.jsx(Ps,{className:"w-8 h-8 text-green-400 group-hover:text-green-300 transition-colors"})}),s.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-green-100 transition-colors",children:r.home.feature4Title}),s.jsx("p",{className:"text-sm text-slate-300 leading-relaxed mb-4 group-hover:text-slate-200 transition-colors",children:r.home.feature4Desc}),s.jsx("div",{className:"grid grid-cols-2 gap-1.5 mb-3",children:r.home.feature4Details.split("  ").map((a,l)=>s.jsx("div",{className:"px-3 py-2 bg-green-500/20 text-green-300 text-xs font-medium rounded-md border border-green-500/30 group-hover:bg-green-500/30 group-hover:border-green-400/50 transition-all text-center h-[2.25rem] flex items-center justify-center",children:a},l))}),s.jsxs("div",{className:"flex justify-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:[s.jsx(Ps,{className:"w-4 h-4 text-green-400"}),s.jsx(ut,{className:"w-4 h-4 text-green-400"}),s.jsx(fo,{className:"w-4 h-4 text-green-400"})]})]})]})]})]})})]})}function xb(){const{t:e}=tt();return s.jsxs("div",{className:"min-h-screen relative pt-20 md:pt-24 pb-12 md:pb-16 px-4 md:px-6",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-40 right-20 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-float"}),s.jsx("div",{className:"absolute bottom-40 left-20 w-96 h-96 bg-cyan-500/10 rounded-full blur-3xl animate-float animation-delay-2000"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 w-[400px] h-[400px] bg-pink-500/5 rounded-full blur-3xl animate-float animation-delay-4000"})]}),s.jsxs("div",{className:"relative max-w-4xl mx-auto z-10",children:[s.jsxs("div",{className:"text-center mb-10 md:mb-16 animate-fade-in",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",children:e.about.title}),s.jsx("p",{className:"text-slate-400 text-base md:text-lg px-2",children:e.about.subtitle})]}),s.jsxs("div",{className:"space-y-6 md:space-y-12",children:[s.jsx("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-pink-500/20 rounded-2xl p-5 md:p-8 hover:border-pink-500/30 transition-all duration-500 hover:shadow-xl hover:shadow-pink-500/10 hover:-translate-y-1 animate-fade-in-delay group",children:s.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[s.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-br from-pink-500/20 to-pink-600/20 flex items-center justify-center border border-pink-500/30 flex-shrink-0 transition-all duration-300 group-hover:scale-110 group-hover:shadow-lg group-hover:shadow-pink-500/30",children:s.jsx(Ha,{className:"text-pink-400 transition-all duration-300 group-hover:drop-shadow-[0_0_8px_rgba(236,72,153,0.6)]",size:20})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-2 md:mb-3",children:e.about.missionTitle}),s.jsx("p",{className:"text-sm md:text-base text-slate-300 leading-relaxed",children:e.about.missionDesc})]})]})}),s.jsx("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-5 md:p-8 hover:border-purple-500/30 transition-all duration-500 hover:shadow-xl hover:shadow-purple-500/10 hover:-translate-y-1 animate-fade-in-delay-2 group",children:s.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[s.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-br from-purple-500/20 to-purple-600/20 flex items-center justify-center border border-purple-500/30 flex-shrink-0 transition-all duration-300 group-hover:scale-110 group-hover:shadow-lg group-hover:shadow-purple-500/30",children:s.jsx(ut,{className:"text-purple-400 transition-all duration-300 group-hover:drop-shadow-[0_0_8px_rgba(168,85,247,0.6)]",size:20})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-2 md:mb-3",children:e.about.howItWorksTitle}),s.jsx("p",{className:"text-sm md:text-base text-slate-300 leading-relaxed mb-3 md:mb-4",children:e.about.howItWorksDesc}),s.jsxs("ul",{className:"space-y-2.5 text-sm md:text-base text-slate-300",children:[s.jsxs("li",{className:"flex gap-2.5 items-start transition-all duration-200 hover:text-white hover:translate-x-1",children:[s.jsx("span",{className:"text-purple-400 flex-shrink-0 mt-0.5 group-hover:scale-125 transition-transform duration-200",children:""}),s.jsx("span",{children:e.about.step1})]}),s.jsxs("li",{className:"flex gap-2.5 items-start transition-all duration-200 hover:text-white hover:translate-x-1",children:[s.jsx("span",{className:"text-purple-400 flex-shrink-0 mt-0.5 group-hover:scale-125 transition-transform duration-200",children:""}),s.jsx("span",{children:e.about.step2})]}),s.jsxs("li",{className:"flex gap-2.5 items-start transition-all duration-200 hover:text-white hover:translate-x-1",children:[s.jsx("span",{className:"text-purple-400 flex-shrink-0 mt-0.5 group-hover:scale-125 transition-transform duration-200",children:""}),s.jsx("span",{children:e.about.step3})]}),s.jsxs("li",{className:"flex gap-2.5 items-start transition-all duration-200 hover:text-white hover:translate-x-1",children:[s.jsx("span",{className:"text-purple-400 flex-shrink-0 mt-0.5 group-hover:scale-125 transition-transform duration-200",children:""}),s.jsx("span",{children:e.about.step4})]}),s.jsxs("li",{className:"flex gap-2.5 items-start transition-all duration-200 hover:text-white hover:translate-x-1",children:[s.jsx("span",{className:"text-purple-400 flex-shrink-0 mt-0.5 group-hover:scale-125 transition-transform duration-200",children:""}),s.jsx("span",{children:e.about.step5})]})]})]})]})}),s.jsx("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-green-500/20 rounded-2xl p-5 md:p-8 hover:border-green-500/30 transition-all duration-500 hover:shadow-xl hover:shadow-green-500/10 hover:-translate-y-1 animate-fade-in-delay-3 group",children:s.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[s.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-br from-green-500/20 to-green-600/20 flex items-center justify-center border border-green-500/30 flex-shrink-0 transition-all duration-300 group-hover:scale-110 group-hover:shadow-lg group-hover:shadow-green-500/30",children:s.jsx(Ps,{className:"text-green-400 transition-all duration-300 group-hover:drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",size:20})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-2 md:mb-3",children:e.about.socialTitle}),s.jsx("p",{className:"text-sm md:text-base text-slate-300 leading-relaxed",children:e.about.socialDesc})]})]})}),s.jsx("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-cyan-500/20 rounded-2xl p-5 md:p-8 hover:border-cyan-500/30 transition-all duration-500 hover:shadow-xl hover:shadow-cyan-500/10 hover:-translate-y-1 animate-fade-in-delay-4 group",children:s.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[s.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-br from-cyan-500/20 to-cyan-600/20 flex items-center justify-center border border-cyan-500/30 flex-shrink-0 transition-all duration-300 group-hover:scale-110 group-hover:shadow-lg group-hover:shadow-cyan-500/30",children:s.jsx(Xa,{className:"text-cyan-400 transition-all duration-300 group-hover:drop-shadow-[0_0_8px_rgba(34,211,238,0.6)]",size:20})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-2 md:mb-3",children:e.about.privacyTitle}),s.jsx("p",{className:"text-sm md:text-base text-slate-300 leading-relaxed",children:e.about.privacyDesc})]})]})}),s.jsx("div",{className:"text-center pt-6 md:pt-8 animate-fade-in-delay-5",children:s.jsx("div",{className:"inline-block bg-slate-900/30 backdrop-blur-sm border border-slate-700/30 rounded-xl px-6 py-4 hover:border-slate-600/50 transition-all duration-300",children:s.jsx("p",{className:"text-sm md:text-base text-slate-400 px-4 leading-relaxed",children:e.about.quote})})})]})]})]})}class Ti{constructor(t=0,r="Network Error"){this.status=t,this.text=r}}const yb=()=>{if(!(typeof localStorage>"u"))return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}},bt={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:yb()},Td=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{},vb=(e,t="https://api.emailjs.com")=>{if(!e)return;const r=Td(e);bt.publicKey=r.publicKey,bt.blockHeadless=r.blockHeadless,bt.storageProvider=r.storageProvider,bt.blockList=r.blockList,bt.limitRate=r.limitRate,bt.origin=r.origin||t},df=async(e,t,r={})=>{const n=await fetch(bt.origin+e,{method:"POST",headers:r,body:t}),i=await n.text(),a=new Ti(n.status,i);if(n.ok)return a;throw a},uf=(e,t,r)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r||typeof r!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},bb=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},mf=e=>e.webdriver||!e.languages||e.languages.length===0,hf=()=>new Ti(451,"Unavailable For Headless Browser"),wb=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},kb=e=>{var t;return!((t=e.list)!=null&&t.length)||!e.watchVariable},jb=(e,t)=>e instanceof FormData?e.get(t):e[t],ff=(e,t)=>{if(kb(e))return!1;wb(e.list,e.watchVariable);const r=jb(t,e.watchVariable);return typeof r!="string"?!1:e.list.includes(r)},pf=()=>new Ti(403,"Forbidden"),_b=(e,t)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},Nb=async(e,t,r)=>{const n=Number(await r.get(e)||0);return t-Date.now()+n},gf=async(e,t,r)=>{if(!t.throttle||!r)return!1;_b(t.throttle,t.id);const n=t.id||e;return await Nb(n,t.throttle,r)>0?!0:(await r.set(n,Date.now().toString()),!1)},xf=()=>new Ti(429,"Too Many Requests"),Sb=async(e,t,r,n)=>{const i=Td(n),a=i.publicKey||bt.publicKey,l=i.blockHeadless||bt.blockHeadless,o=i.storageProvider||bt.storageProvider,c={...bt.blockList,...i.blockList},d={...bt.limitRate,...i.limitRate};return l&&mf(navigator)?Promise.reject(hf()):(uf(a,e,t),bb(r),r&&ff(c,r)?Promise.reject(pf()):await gf(location.pathname,d,o)?Promise.reject(xf()):df("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:a,service_id:e,template_id:t,template_params:r}),{"Content-type":"application/json"}))},zb=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},Eb=e=>typeof e=="string"?document.querySelector(e):e,Cb=async(e,t,r,n)=>{const i=Td(n),a=i.publicKey||bt.publicKey,l=i.blockHeadless||bt.blockHeadless,o=bt.storageProvider||i.storageProvider,c={...bt.blockList,...i.blockList},d={...bt.limitRate,...i.limitRate};if(l&&mf(navigator))return Promise.reject(hf());const u=Eb(r);uf(a,e,t),zb(u);const m=new FormData(u);return ff(c,m)?Promise.reject(pf()):await gf(location.pathname,d,o)?Promise.reject(xf()):(m.append("lib_version","4.4.1"),m.append("service_id",e),m.append("template_id",t),m.append("user_id",a),df("/api/v1.0/email/send-form",m))},ni={init:vb,send:Sb,sendForm:Cb,EmailJSResponseStatus:Ti};function Pb(){const{t:e,language:t}=tt(),{showToast:r}=rr(),{user:n}=gt(),i=_t(),[a,l]=x.useState({name:"",email:"",subject:"",message:""}),[o,c]=x.useState(!1),[d,u]=x.useState(!1),[m,f]=x.useState(!1),[p,b]=x.useState({name:"",email:"",subject:"",message:""}),[j,S]=x.useState(!1),y="ded2c1c6-7064-499f-a1e7-a8f90c95904a",h="AdvA9XekMYHYYOhcF";x.useEffect(()=>{ni.init(h)},[]);const g=async _=>{var $;_.preventDefault(),u(!0);try{const A={name:a.name,email:a.email,time:new Date().toLocaleString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),message:`${a.subject?`Konu: ${a.subject}

`:""}${a.message}`},M="service_6btsv5d",I="template_x7aji5u";try{console.log(" EmailJS Gnderiliyor...",{serviceId:M,templateId:I,publicKey:h,templateParams:A});const G=await ni.send(M,I,A);if(console.log(" EmailJS Baarl:",G),n)try{const K=` Contact Form Mesaj

sim: ${a.name}
Email: ${a.email}
Konu: ${a.subject}

Mesaj:
${a.message}`,{error:E}=await w.from("messages").insert({sender_id:n.id,receiver_id:y,message_text:K});E?console.error(" Mesaj kaydetme hatas:",E):console.log(" Mesaj site ii mesajlama sistemine kaydedildi")}catch(K){console.error(" Mesaj kaydetme hatas:",K)}c(!0),l({name:"",email:"",subject:"",message:""}),r("Mesajnz baaryla gnderildi! En ksa srede size dn yapacaz.","success"),setTimeout(()=>c(!1),5e3)}catch(G){console.error(" EmailJS Hatas:",G);let K="Email gnderilirken bir hata olutu.";if(G!=null&&G.text?K=`Email hatas: ${G.text}`:G!=null&&G.message?K=`Email hatas: ${G.message}`:typeof G=="string"&&(K=`Email hatas: ${G}`),(G==null?void 0:G.status)===400){let E="Template parametreleri hatal olabilir.";G!=null&&G.text?E=G.text:G!=null&&G.message?E=G.message:($=G==null?void 0:G.response)!=null&&$.text&&(E=G.response.text),r(`EmailJS hatas: ${E}`,"error")}else r(K,"error")}}catch(A){console.error("Form gnderme hatas:",A),r("Mesaj gnderilirken bir hata olutu. Ltfen tekrar deneyin.","error")}finally{u(!1)}};return s.jsxs("div",{className:"min-h-screen relative pt-24 pb-24 sm:pb-16 px-4 overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-40 right-10 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-float"}),s.jsx("div",{className:"absolute bottom-40 left-10 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-float animation-delay-2000"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-cyan-500/5 rounded-full blur-3xl animate-float animation-delay-4000"})]}),s.jsxs("div",{className:"relative max-w-6xl mx-auto z-10",children:[s.jsxs("div",{className:"text-center mb-10 md:mb-16 animate-fade-in",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",children:e.contact.title}),s.jsx("p",{className:"text-slate-400 text-base md:text-lg px-2",children:e.contact.subtitle})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-12 animate-fade-in-delay",children:[s.jsxs("button",{onClick:()=>f(!0),className:"group bg-gradient-to-br from-slate-900/80 via-slate-900/60 to-slate-900/80 backdrop-blur-xl border border-pink-500/30 rounded-3xl p-8 shadow-2xl shadow-pink-500/10 hover:shadow-pink-500/20 transition-all duration-500 hover:border-pink-500/50 hover:-translate-y-1 text-left w-full",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("div",{className:"p-4 bg-gradient-to-br from-pink-500/20 to-pink-600/20 rounded-2xl border border-pink-500/30 flex-shrink-0 shadow-lg shadow-pink-500/20 group-hover:scale-110 transition-transform duration-300",children:s.jsx(nn,{className:"text-pink-400 drop-shadow-[0_0_8px_rgba(236,72,153,0.6)]",size:28})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:e.contact.emailSupport}),s.jsx("p",{className:"text-slate-400 text-sm",children:t==="tr"?"Dorudan e-posta destei":"Direct email support"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-pink-400 group-hover:text-pink-300 transition-colors duration-300 font-medium",children:[s.jsx(nn,{size:18}),s.jsx("span",{children:t==="tr"?"E-posta Gnder":"Send Email"}),s.jsx(ur,{size:16,className:"group-hover:translate-x-1 transition-transform duration-300"})]})]}),s.jsxs("button",{onClick:()=>{if(!n){r(e.contact.pleaseSignInToMessage,"info"),i("/signin");return}i("/messages?user=ded2c1c6-7064-499f-a1e7-a8f90c95904a")},className:"group bg-gradient-to-br from-slate-900/80 via-slate-900/60 to-slate-900/80 backdrop-blur-xl border border-purple-500/30 rounded-3xl p-8 shadow-2xl shadow-purple-500/10 hover:shadow-purple-500/20 transition-all duration-500 hover:border-purple-500/50 hover:-translate-y-1 text-left",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("div",{className:"p-4 bg-gradient-to-br from-purple-500/20 to-purple-600/20 rounded-2xl border border-purple-500/30 flex-shrink-0 shadow-lg shadow-purple-500/20 group-hover:scale-110 transition-transform duration-300",children:s.jsx(wr,{className:"text-purple-400 drop-shadow-[0_0_8px_rgba(168,85,247,0.6)]",size:28})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:e.contact.messageSubmirra}),s.jsx("p",{className:"text-slate-400 text-sm",children:e.contact.viaWebsite})]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-purple-400 group-hover:text-purple-300 transition-colors duration-300 font-medium",children:[s.jsx("span",{children:"Open Messages"}),s.jsx(ur,{size:16,className:"group-hover:translate-x-1 transition-transform duration-300"})]})]}),s.jsxs("a",{href:"https://www.instagram.com/submirra.dream/",target:"_blank",rel:"noopener noreferrer",className:"group bg-gradient-to-br from-slate-900/80 via-slate-900/60 to-slate-900/80 backdrop-blur-xl border border-cyan-500/30 rounded-3xl p-8 shadow-2xl shadow-cyan-500/10 hover:shadow-cyan-500/20 transition-all duration-500 hover:border-cyan-500/50 hover:-translate-y-1 text-left block",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("div",{className:"p-4 bg-gradient-to-br from-cyan-500/20 to-cyan-600/20 rounded-2xl border border-cyan-500/30 flex-shrink-0 shadow-lg shadow-cyan-500/20 group-hover:scale-110 transition-transform duration-300",children:s.jsx(lm,{className:"text-cyan-400 drop-shadow-[0_0_8px_rgba(34,211,238,0.6)]",size:28})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"Instagram"}),s.jsx("p",{className:"text-slate-400 text-sm",children:t==="tr"?"Bizi takip edin":"Follow us"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-cyan-400 group-hover:text-cyan-300 transition-colors duration-300 font-medium",children:[s.jsx("span",{children:"@submirra.dream"}),s.jsx(lm,{size:16,className:"group-hover:scale-110 transition-transform duration-300"})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-900/80 via-slate-900/60 to-slate-900/80 backdrop-blur-xl border border-cyan-500/30 rounded-3xl p-8 md:p-10 shadow-2xl shadow-cyan-500/10 hover:shadow-cyan-500/20 transition-all duration-500 animate-fade-in-delay-2",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-cyan-500/20 to-cyan-600/20 rounded-xl border border-cyan-500/30 flex-shrink-0 shadow-lg shadow-cyan-500/20",children:s.jsx(wc,{className:"text-cyan-400 drop-shadow-[0_0_8px_rgba(34,211,238,0.6)]",size:24})}),s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent pb-1",children:e.contact.sendMessage})]}),o&&s.jsxs("div",{className:"mb-6 p-5 bg-gradient-to-r from-green-500/20 to-emerald-500/20 border border-green-500/40 rounded-xl flex items-center gap-3 animate-fade-in",children:[s.jsx(kl,{className:"text-green-400 flex-shrink-0",size:24}),s.jsx("p",{className:"text-green-400 font-medium",children:e.contact.thankYou})]}),s.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"group",children:[s.jsxs("label",{className:"flex items-center gap-2 text-slate-300 font-medium mb-3 text-sm md:text-base",children:[s.jsx(Je,{size:18,className:"text-pink-400"}),e.contact.name]}),s.jsx("input",{type:"text",value:a.name,onChange:_=>l({...a,name:_.target.value}),className:"w-full px-5 py-3.5 bg-slate-950/70 border-2 border-purple-500/30 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/80 focus:ring-2 focus:ring-purple-500/30 transition-all text-sm md:text-base shadow-lg shadow-purple-500/5 group-hover:shadow-purple-500/10",placeholder:e.contact.namePlaceholder,required:!0})]}),s.jsxs("div",{className:"group",children:[s.jsxs("label",{className:"flex items-center gap-2 text-slate-300 font-medium mb-3 text-sm md:text-base",children:[s.jsx(nn,{size:18,className:"text-pink-400"}),e.contact.email]}),s.jsx("input",{type:"email",value:a.email,onChange:_=>l({...a,email:_.target.value}),className:"w-full px-5 py-3.5 bg-slate-950/70 border-2 border-purple-500/30 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/80 focus:ring-2 focus:ring-purple-500/30 transition-all text-sm md:text-base shadow-lg shadow-purple-500/5 group-hover:shadow-purple-500/10",placeholder:e.contact.emailPlaceholder,required:!0})]})]}),s.jsxs("div",{className:"group",children:[s.jsxs("label",{className:"flex items-center gap-2 text-slate-300 font-medium mb-3 text-sm md:text-base",children:[s.jsx(wc,{size:18,className:"text-pink-400"}),e.contact.subject]}),s.jsx("input",{type:"text",value:a.subject,onChange:_=>l({...a,subject:_.target.value}),className:"w-full px-5 py-3.5 bg-slate-950/70 border-2 border-purple-500/30 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/80 focus:ring-2 focus:ring-purple-500/30 transition-all text-sm md:text-base shadow-lg shadow-purple-500/5 group-hover:shadow-purple-500/10",placeholder:e.contact.subjectPlaceholder,required:!0})]}),s.jsxs("div",{className:"group",children:[s.jsxs("label",{className:"flex items-center gap-2 text-slate-300 font-medium mb-3 text-sm md:text-base",children:[s.jsx(Ya,{size:18,className:"text-pink-400"}),e.contact.message]}),s.jsx("textarea",{value:a.message,onChange:_=>l({...a,message:_.target.value}),className:"w-full min-h-[160px] px-5 py-3.5 bg-slate-950/70 border-2 border-purple-500/30 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/80 focus:ring-2 focus:ring-purple-500/30 transition-all resize-none text-sm md:text-base leading-relaxed shadow-lg shadow-purple-500/5 group-hover:shadow-purple-500/10",placeholder:e.contact.messagePlaceholder,required:!0})]}),s.jsx("button",{type:"submit",disabled:d,className:"w-full px-6 py-4 rounded-xl bg-gradient-to-r from-pink-600 via-purple-600 to-pink-600 text-white font-semibold hover:from-pink-500 hover:via-purple-500 hover:to-pink-500 transition-all duration-300 hover:shadow-xl hover:shadow-pink-500/40 flex items-center justify-center gap-3 text-base disabled:opacity-50 disabled:cursor-not-allowed bg-[length:200%_auto] animate-gradient",children:d?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),s.jsx("span",{children:"Gnderiliyor..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(ur,{size:20,className:"group-hover:translate-x-1 transition-transform duration-300"}),s.jsx("span",{children:e.contact.send})]})})]})]})]}),m&&s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>f(!1),children:s.jsxs("div",{className:"bg-gradient-to-br from-slate-900 via-slate-900 to-slate-800 border border-pink-500/30 rounded-2xl p-6 md:p-8 max-w-lg w-full shadow-2xl shadow-pink-500/20 animate-fade-in",onClick:_=>_.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-pink-500/20 to-pink-600/20 rounded-xl border border-pink-500/30",children:s.jsx(nn,{className:"text-pink-400",size:24})}),s.jsx("h3",{className:"text-xl font-bold text-white",children:t==="tr"?"E-posta Gnder":"Send Email"})]}),s.jsx("button",{onClick:()=>f(!1),className:"text-slate-400 hover:text-white transition-colors p-2",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),s.jsxs("form",{onSubmit:async _=>{_.preventDefault(),S(!0);try{const $={name:p.name,email:p.email,time:new Date().toLocaleString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),message:`${p.subject?`Konu: ${p.subject}

`:""}${p.message}`};await ni.send("service_6btsv5d","template_x7aji5u",$),r(t==="tr"?"E-posta baaryla gnderildi!":"Email sent successfully!","success"),b({name:"",email:"",subject:"",message:""}),f(!1)}catch($){console.error("Email error:",$),r(t==="tr"?"E-posta gnderilemedi. Ltfen tekrar deneyin.":"Failed to send email. Please try again.","error")}finally{S(!1)}},className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-slate-300 text-sm font-medium mb-2",children:t==="tr"?"Adnz":"Your Name"}),s.jsx("input",{type:"text",value:p.name,onChange:_=>b({...p,name:_.target.value}),className:"w-full px-4 py-3 bg-slate-950/70 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all",placeholder:t==="tr"?"Adnz girin":"Enter your name",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-slate-300 text-sm font-medium mb-2",children:t==="tr"?"E-posta Adresiniz":"Your Email"}),s.jsx("input",{type:"email",value:p.email,onChange:_=>b({...p,email:_.target.value}),className:"w-full px-4 py-3 bg-slate-950/70 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all",placeholder:t==="tr"?"ornek@email.com":"example@email.com",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-slate-300 text-sm font-medium mb-2",children:t==="tr"?"Konu":"Subject"}),s.jsx("input",{type:"text",value:p.subject,onChange:_=>b({...p,subject:_.target.value}),className:"w-full px-4 py-3 bg-slate-950/70 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all",placeholder:t==="tr"?"Mesajnzn konusu":"Subject of your message",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-slate-300 text-sm font-medium mb-2",children:t==="tr"?"Mesajnz":"Your Message"}),s.jsx("textarea",{value:p.message,onChange:_=>b({...p,message:_.target.value}),className:"w-full min-h-[120px] px-4 py-3 bg-slate-950/70 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all resize-none",placeholder:t==="tr"?"Mesajnz buraya yazn...":"Write your message here...",required:!0})]}),s.jsx("button",{type:"submit",disabled:j,className:"w-full px-6 py-3.5 rounded-xl bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300 hover:shadow-lg hover:shadow-pink-500/30 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:j?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),s.jsx("span",{children:t==="tr"?"Gnderiliyor...":"Sending..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(ur,{size:18}),s.jsx("span",{children:t==="tr"?"E-posta Gnder":"Send Email"})]})})]})]})})]})}const _c=["4e319154-a316-4367-b8d6-d7776cef9d70","cf059e97-ae1c-40a9-88f2-ae0734fb1cdf","ded2c1c6-7064-499f-a1e7-a8f90c95904a"];async function Tb(e){if(!e)return!1;try{const{data:t,error:r}=await w.rpc("is_developer",{p_user_id:e});return r?(console.error("Error checking developer status:",r),_c.includes(e)):t===!0}catch(t){return console.error("Error in isDeveloper:",t),_c.includes(e)}}function Yr(e){return e?_c.includes(e):!1}function Ab(){const{user:e,loading:t}=gt(),r=_t(),{t:n,language:i}=tt(),{showToast:a}=rr(),[l,o]=x.useState(""),[c,d]=x.useState(!1),[u,m]=x.useState(null),[f,p]=x.useState(null),[b,j]=x.useState(null),[S,y]=x.useState(!1),[h,g]=x.useState("basic"),[_,$]=x.useState(!1),[A,M]=x.useState(null),I=_?h==="advanced"?"advanced_visual":"basic_visual":h||"basic",[G,K]=x.useState(null),[E,W]=x.useState(null),[P,U]=x.useState(!0),[k,q]=x.useState(null),[H,O]=x.useState(!1),[L,se]=x.useState(!1),[de,ke]=x.useState(!1),[Ge,Ie]=x.useState(!1),[Se,He]=x.useState(!1),rt=x.useRef(null),st=x.useRef([]);x.useEffect(()=>{t||(e?Nt():r("/signin"))},[e,t,r]);const Nt=async()=>{if(e)try{const te=Yr(e.id);if(se(te),te&&U(!1),te){K({used:0,limit:1/0}),W("premium");return}const[N,T]=await Promise.all([w.from("subscriptions").select("plan_type, trial_end_date").eq("user_id",e.id).single(),w.from("profiles").select("trial_used").eq("id",e.id).single()]),{data:R,error:le}=N,{data:oe}=T;if(oe&&oe.trial_used!==void 0&&ke(oe.trial_used),!le&&R){const ue=R.plan_type;if(W(ue),U(!1),ue==="free"||ue==="trial"?R.trial_end_date&&(new Date(R.trial_end_date)<new Date?O(!0):O(!1)):O(!1),ue==="trial"||ue==="standard"||ue==="premium")try{const{data:je,error:ge}=await w.rpc("check_visual_analysis_limit",{p_user_id:e.id});!ge&&je&&q({used:je.used||0,limit:je.limit||7})}catch(je){console.error("Error loading visual analysis limit:",je),q({used:0,limit:ue==="trial"?7:ue==="premium"?5:3})}else q(null)}const{data:ye,error:ve}=await w.rpc("check_daily_analysis_limit",{p_user_id:e.id});if(ve){console.error("Error loading remaining analyses:",ve),K({used:0,limit:5});return}K(ye?{used:ye.used||0,limit:ye.limit||5}:{used:0,limit:5})}catch(te){console.error("Error loading remaining analyses:",te),K({used:0,limit:5}),U(!1)}};async function Xe(te,N,T="tr",R="basic"){try{let le="trial",oe=1;try{const{data:ue,error:je}=await w.from("subscriptions").select("plan_type, visualizations_per_analysis").eq("user_id",N).single();!je&&ue&&(le=ue.plan_type||"trial",ue.plan_type==="standard"&&(R==="basic_visual"||R==="advanced_visual")?oe=1:ue.plan_type==="premium"&&(R==="basic_visual"||R==="advanced_visual")?oe=3:oe=ue.visualizations_per_analysis||1)}catch(ue){console.warn("Could not fetch subscription info, using defaults:",ue)}const ve=await(await fetch("https://borablt.app.n8n.cloud/webhook/dream-webhook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:N,dream_text:te,plan_type:le,visualizations_per_analysis:oe,language:T,analysis_type:R})})).json();return console.log("N8N response:",ve),ve}catch(le){throw console.error("N8N webhook error:",le),le}}const C=async te=>{var N,T,R;if(te.preventDefault(),!(!l.trim()||!e)){if(!L&&E===null){j("Analiz yapmak iin ltfen bir plan satn aln."),a("Analiz yapmak iin ltfen bir plan satn aln. Pricing sayfasna gidin.","error"),r("/pricing");return}d(!0),j(null);try{const le=Yr(e.id);let oe=le;if(!le)try{const{data:je,error:ge}=await w.rpc("is_developer",{p_user_id:e.id});!ge&&je===!0&&(oe=!0)}catch(je){console.log("Error checking developer status with RPC, using sync check:",je)}if(!oe){const{count:je,error:ge}=await w.from("dreams").select("*",{count:"exact",head:!0}).eq("user_id",e.id);if(ge)console.error("Error counting dreams:",ge);else{const Ze={free:10,trial:10,standard:30,premium:60,ruyagezer:999999}[E||"free"]||10;if((je||0)>=Ze){const B=i==="tr"?`Ktphane limitiniz doldu (${Ze} rya). Yeni rya eklemek iin eski ryalarnz silin veya daha yksek bir plana gein.`:`Your library storage limit is full (${Ze} dreams). Delete old dreams or upgrade to a higher plan to add new ones.`;j(B),a(B,"error"),d(!1);return}}const{data:Ae,error:xt}=await w.rpc("can_user_submit_analysis",{p_user_id:e.id});if(xt)console.error("Error checking analysis permission:",xt);else if(Ae===!1){j("Trial sreniz dolmu. Analiz yapmak iin ltfen standart veya premium paket satn aln."),a("Trial sreniz dolmu. Paket satn almak iin Pricing sayfasna gidin.","error"),d(!1);return}if(I==="advanced"||I==="advanced_visual"){const{data:Le,error:Ze}=await w.rpc("check_advanced_analysis_limit",{p_user_id:e.id});if(Ze)console.error("Error checking advanced analysis limit:",Ze);else if(Le&&!Le.can_analyze){Le.trial_expired?(j("Trial sreniz dolmu. Analiz yapmak iin ltfen standart veya premium paket satn aln."),a("Trial sreniz dolmu. Paket satn almak iin Pricing sayfasna gidin.","error")):(j("Bu analiz tipi iin standart plan veya zeri gereklidir."),a("Bu analiz tipi iin standart plan veya zeri gereklidir.","error")),d(!1);return}}else if(I==="basic_visual"||I==="advanced_visual"){const{data:Le,error:Ze}=await w.rpc("check_visual_analysis_limit",{p_user_id:e.id});if(Ze)console.error("Error checking visual analysis limit:",Ze);else if(Le&&!Le.can_analyze){if(Le.trial_expired)j("Trial sreniz dolmu. Analiz yapmak iin ltfen standart veya premium paket satn aln."),a("Trial sreniz dolmu. Paket satn almak iin Pricing sayfasna gidin.","error");else{const B=E==="trial"?`7/7 (${i==="tr"?"toplam":"total"})`:E==="premium"?"5/5":"3/3",Z=E==="trial"?`Trial grselli analiz hakknz doldu (${B}).`:`Gnlk grselli analiz limitiniz doldu (${B}). Yarn tekrar deneyin.`;j(Z),a(Z,"error")}d(!1);return}}if(E==="free"&&(I==="advanced"||I==="basic_visual"||I==="advanced_visual")){j("Bu analiz tipi iin standart plan veya zeri gereklidir."),a("Bu analiz tipi iin standart plan veya zeri gereklidir.","error"),d(!1);return}if(E==="trial"&&H&&(I==="advanced"||I==="basic_visual"||I==="advanced_visual")){j("Trial sreniz dolmu. Bu analiz tipi iin standart plan veya zeri gereklidir."),a("Trial sreniz dolmu. Bu analiz tipi iin standart plan veya zeri gereklidir.","error"),d(!1);return}}const ye={user_id:e.id,dream_text:l,status:"pending",is_public:S,analysis_type:I};i==="tr"?ye.dream_text_tr=l:ye.dream_text_en=l;const{data:ve,error:ue}=await w.from("dreams").insert(ye).select().single();if(ue)if(console.error("Dream insert error:",ue),console.error("Insert data:",ye),(N=ue.message)!=null&&N.includes("is_public")||ue.code==="42703"||ue.code==="PGRST116"){console.warn("is_public column not found, saving without it. Please run migration.");const{data:je,error:ge}=await w.from("dreams").insert({user_id:e.id,dream_text:l,status:"pending",analysis_type:I,...i==="tr"?{dream_text_tr:l}:{dream_text_en:l}}).select().single();if(ge)throw console.error("Retry insert error:",ge),ge}else if((T=ue.message)!=null&&T.includes("analysis_type")||(R=ue.message)!=null&&R.includes("check constraint")){console.warn("analysis_type constraint failed, trying with basic. Please run migration.");const{data:je,error:ge}=await w.from("dreams").insert({user_id:e.id,dream_text:l,status:"pending",is_public:S,analysis_type:"basic",...i==="tr"?{dream_text_tr:l}:{dream_text_en:l}}).select().single();if(ge)throw console.error("Retry insert error:",ge),ge}else throw ue;if(!oe&&(I==="basic_visual"||I==="advanced_visual"))try{await w.rpc("increment_visual_analysis",{p_user_id:e.id})}catch(je){console.error("Failed to increment visual analysis:",je)}try{await Xe(l,e.id,i,I)}catch(je){console.error("Failed to send to N8N:",je)}if(m(n.analyze.savedMessage),p("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMSIgaGVpZ2h0PSIxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiMwMDAwMDAiLz48L3N2Zz4="),M(I),o(""),a(n.analyze.savedMessage,"success"),await Nt(),(I==="basic_visual"||I==="advanced_visual")&&(E==="trial"||E==="standard"||E==="premium"))try{const{data:je,error:ge}=await w.rpc("check_visual_analysis_limit",{p_user_id:e.id});!ge&&je&&q({used:je.used||0,limit:je.limit||7})}catch(je){console.error("Error reloading visual analysis limit:",je)}}catch(le){const oe=le instanceof Error?le.message:"Failed to save dream";j(oe),a(oe,"error")}finally{d(!1)}}},X=l.length,ae=5e3,fe=async()=>{if(Ge&&rt.current){rt.current.stop(),Ie(!1);return}try{const te=await navigator.mediaDevices.getUserMedia({audio:!0}),N=new MediaRecorder(te,{mimeType:"audio/webm"});rt.current=N,st.current=[],N.ondataavailable=T=>{T.data.size>0&&st.current.push(T.data)},N.onstop=async()=>{te.getTracks().forEach(R=>R.stop());const T=new Blob(st.current,{type:"audio/webm"});if(console.log("Audio recorded, size:",T.size),T.size<1e3){a(i==="tr"?"Ses kayd ok ksa":"Recording too short","error");return}He(!0),a(i==="tr"?"Ses metne evriliyor...":"Transcribing...","info");try{const R=new FormData;R.append("audio",T,"recording.webm"),R.append("language",i);const oe=await(await fetch("https://soewlqmskqmpycaevhoc.supabase.co/functions/v1/whisper-transcribe",{method:"POST",body:R})).json();if(oe.error)throw new Error(oe.error);oe.text&&(o(ye=>(ye?ye+" "+oe.text:oe.text).trim().slice(0,ae)),a(i==="tr"?"Ses metne evrildi!":"Transcription complete!","success"))}catch(R){console.error("Transcription error:",R),a(i==="tr"?"Ses evrilemedi":"Transcription failed","error")}finally{He(!1)}},N.start(),Ie(!0),a(i==="tr"?"Kayt balad... Bitince tekrar tklayn":"Recording... Click again when done","info")}catch(te){console.error("Microphone access error:",te),a(i==="tr"?"Mikrofon eriimi reddedildi":"Microphone access denied","error")}};return e?s.jsxs("div",{className:"min-h-screen relative pt-20 md:pt-24 pb-24 sm:pb-16 px-4 md:px-6",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-40 right-10 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse"}),s.jsx("div",{className:"absolute bottom-40 left-10 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),s.jsx("div",{className:"absolute top-1/2 left-1/2 w-[400px] h-[400px] bg-cyan-500/5 rounded-full blur-3xl"})]}),s.jsxs("div",{className:"relative max-w-6xl mx-auto z-10",children:[s.jsxs("div",{className:"text-center mb-8 md:mb-12 animate-fade-in",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",children:n.analyze.title}),s.jsx("p",{className:"text-slate-400 text-base md:text-lg px-2",children:n.analyze.subtitle})]}),u?s.jsx("div",{className:"max-w-6xl mx-auto animate-fade-in",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"bg-gradient-to-br from-pink-500/10 to-purple-500/10 border border-pink-500/20 rounded-2xl p-6 md:p-8 backdrop-blur-sm",children:[s.jsx("div",{className:"flex items-center justify-center gap-4 mb-6",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:n.analyze.processingTitle}),s.jsx("p",{className:"text-sm md:text-base text-pink-300 leading-relaxed",children:A==="basic_visual"||A==="advanced_visual"?i==="tr"?"Ryanz ksa sre iinde analiz edilip grselletirilecektir. Ltfen bekleyiniz. Tamamlandktan sonra size bildirim gelecektir, ktphanenizden ryanzn durumunu kontrol edebilirsiniz.":"Your dream will be analyzed and visualized shortly. Please wait. You will receive a notification when completed, you can check the status of your dream from your library.":i==="tr"?"Ryanz ksa sre iinde analiz edilecektir. Ltfen bekleyiniz. Tamamlandktan sonra size bildirim gelecektir, ktphanenizden ryanzn durumunu kontrol edebilirsiniz.":"Your dream will be analyzed shortly. Please wait. You will receive a notification when completed, you can check the status of your dream from your library."})]})}),s.jsx("div",{className:"flex flex-col sm:flex-row gap-3 justify-start",children:s.jsxs("button",{onClick:()=>{r(`/library?tab=${A==="basic"||A==="advanced"?"text":"visual"}`)},className:"group flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white rounded-xl font-medium transition-all duration-300 hover:shadow-lg hover:shadow-pink-500/30 hover:scale-105",children:[s.jsx(_r,{size:18}),s.jsx("span",{children:n.analyze.goToLibrary}),s.jsx(Nd,{size:16,className:"group-hover:translate-x-1 transition-transform"})]})})]})})}):s.jsx("form",{onSubmit:C,className:"max-w-4xl mx-auto animate-fade-in-delay",children:s.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-pink-500/20 rounded-2xl p-5 md:p-8 relative hover:border-pink-500/30 transition-all duration-300 shadow-xl shadow-pink-500/5",children:[!P&&!L&&!de&&E!=="standard"&&E!=="premium"&&E!=="trial"&&s.jsx("div",{className:"absolute -top-3 right-4 md:right-6 flex gap-2 items-center",children:s.jsx("button",{onClick:()=>r("/pricing"),className:"px-2 md:px-3 py-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xs font-semibold rounded-full shadow-lg animate-pulse hover:from-purple-500 hover:to-pink-500 transition-all duration-300 hover:scale-105 cursor-pointer",title:"Satn Al sayfasna git",children:n.analyze.trialBadge})}),s.jsxs("div",{className:"mb-5 md:mb-6",children:[s.jsx("label",{className:"block text-white font-semibold mb-2 md:mb-3 text-sm md:text-base",children:n.analyze.analysisTypeLabel}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-5 md:mb-6",children:[s.jsxs("button",{type:"button",onClick:()=>{if(!L&&E===null){a("Analiz yapmak iin ltfen bir plan satn aln.","error"),r("/pricing");return}h==="advanced"?g("basic"):h==="basic"?_||g(null):g("basic")},disabled:!L&&!P&&E===null,className:`p-4 rounded-xl border-2 transition-all duration-300 text-left relative ${!L&&!P&&E===null?"border-slate-600/30 bg-slate-950/20 opacity-50 cursor-not-allowed":h==="basic"?"border-pink-500 bg-pink-500/10":"border-purple-500/30 bg-slate-950/30 hover:border-purple-500/50"}`,children:[!L&&!P&&E===null&&s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx("span",{className:"px-2 py-0.5 bg-slate-700 text-slate-300 text-[10px] font-semibold rounded",children:""})}),s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${h==="basic"?"border-pink-400 bg-pink-400":"border-slate-400"}`,children:h==="basic"&&s.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),s.jsx("span",{className:`font-semibold ${h==="basic"?"text-pink-400":"text-slate-300"}`,children:n.analyze.analysisTypeBasic})]}),s.jsx("p",{className:"text-xs text-slate-400",children:n.analyze.analysisTypeBasicDesc})]}),s.jsxs("button",{type:"button",onClick:()=>{if(!L&&E===null){a("Analiz yapmak iin ltfen bir plan satn aln.","error"),r("/pricing");return}if(!L&&E==="free"){a("Gelimi analiz iin trial plann aktifletirin veya standart plan satn aln","info"),r("/pricing");return}if(!L&&E==="trial"&&H){a("Trial sreniz dolmu. Gelimi analiz iin standart plan satn aln","info"),r("/pricing");return}h==="basic"?g("advanced"):h==="advanced"?_||g(null):g("advanced")},disabled:!L&&!P&&(E===null||E==="free"||E==="trial"&&H),className:`p-4 rounded-xl border-2 transition-all duration-300 text-left relative ${!L&&!P&&(E===null||E==="free"||E==="trial"&&H)?"border-slate-600/30 bg-slate-950/20 opacity-50 cursor-not-allowed":h==="advanced"?"border-pink-500 bg-pink-500/10":"border-purple-500/30 bg-slate-950/30 hover:border-purple-500/50"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center flex-shrink-0 ${h==="advanced"?"border-pink-400 bg-pink-400":"border-slate-400"}`,children:h==="advanced"&&s.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),s.jsx("span",{className:`font-semibold ${h==="advanced"?"text-pink-400":"text-slate-300"}`,children:n.analyze.analysisTypeAdvanced}),!L&&!P&&(E===null||E==="free"||E==="trial"&&H)&&s.jsx("span",{className:"ml-auto px-2 py-0.5 bg-slate-700 text-slate-300 text-[10px] font-semibold rounded flex-shrink-0",children:""})]}),s.jsx("p",{className:"text-xs text-slate-400",children:n.analyze.analysisTypeAdvancedDesc})]}),s.jsxs("button",{type:"button",onClick:()=>{if(!L&&E===null){a("Analiz yapmak iin ltfen bir plan satn aln.","error"),r("/pricing");return}if(!L&&E==="free"){a("Grselli analiz iin trial plann aktifletirin veya standart plan satn aln","info"),r("/pricing");return}if(!L&&E==="trial"&&H){a("Trial sreniz dolmu. Grselli analiz iin standart plan satn aln","info"),r("/pricing");return}if(!L&&E==="standard"&&k&&k.used>=k.limit){a("Gnlk grselli analiz limitiniz doldu (3/3). Yarn tekrar deneyin.","error");return}if(!L&&E==="premium"&&k&&k.used>=k.limit){a("Gnlk grselli analiz limitiniz doldu (5/5). Yarn tekrar deneyin.","error");return}if(!L&&E==="trial"&&!H&&k&&k.used>=7){a("Trial grselli analiz hakknz doldu (7/7).","error");return}$(!_)},disabled:!L&&!P&&(E===null||E==="free"||E==="trial"&&H||E==="trial"&&!H&&k&&k.used>=7||E==="standard"&&k&&k.used>=k.limit||E==="premium"&&k&&k.used>=k.limit),className:`p-4 rounded-xl border-2 transition-all duration-300 text-left relative ${!L&&!P&&(E===null||E==="free"||E==="trial"&&H||E==="trial"&&!H&&k&&k.used>=7||E==="standard"&&k&&k.used>=k.limit||E==="premium"&&k&&k.used>=k.limit)?"border-slate-600/30 bg-slate-950/20 opacity-50 cursor-not-allowed":_?"border-pink-500 bg-pink-500/10":"border-purple-500/30 bg-slate-950/30 hover:border-purple-500/50"}`,children:[L&&s.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 px-3 py-1 bg-gradient-to-r from-cyan-500/95 to-blue-500/95 border-2 border-cyan-300/60 rounded-full text-white text-sm font-bold shadow-xl shadow-cyan-500/30 flex items-center justify-center min-w-[40px]",children:s.jsx("span",{className:"text-cyan-100",children:""})}),!L&&E==="trial"&&!H&&k&&s.jsxs("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 px-3 py-1 bg-gradient-to-r from-green-500/95 to-emerald-500/95 border-2 border-green-300/60 rounded-full text-white text-xs font-bold shadow-xl shadow-green-500/30 flex items-center justify-center min-w-[50px]",children:[k.used,"/7"]}),!L&&(E==="standard"||E==="premium")&&k&&s.jsxs("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 px-3 py-1 bg-gradient-to-r from-cyan-500/95 to-blue-500/95 border-2 border-cyan-300/60 rounded-full text-white text-xs font-bold shadow-xl shadow-cyan-500/30 flex items-center justify-center min-w-[50px]",children:[k.used,"/",k.limit]}),!L&&!P&&(E===null||E==="free"||E==="trial"&&H||E==="trial"&&!H&&k&&k.used>=7||E==="standard"&&k&&k.used>=k.limit||E==="premium"&&k&&k.used>=k.limit)&&s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx("span",{className:"px-2 py-0.5 bg-slate-700 text-slate-300 text-[10px] font-semibold rounded",children:""})}),s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${_?"border-pink-400 bg-pink-400":"border-slate-400"}`,children:_&&s.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),s.jsx("span",{className:`font-semibold ${_?"text-pink-400":"text-slate-300"}`,children:n.analyze.analysisTypeVisual})]}),s.jsx("p",{className:"text-xs text-slate-400 mb-2",children:n.analyze.analysisTypeVisualDesc}),E==="trial"&&H&&s.jsx("button",{type:"button",onClick:te=>{te.stopPropagation(),r("/pricing")},className:"w-full mt-2 px-3 py-1.5 bg-gradient-to-r from-green-600 to-emerald-600 text-white text-xs font-semibold rounded-lg hover:from-green-500 hover:to-emerald-500 transition-all duration-300",children:n.analyze.trialBadge})]}),s.jsxs("button",{type:"button",disabled:!0,className:"p-4 rounded-xl border-2 transition-all duration-300 text-left relative border-yellow-500/30 bg-slate-950/20 opacity-60 cursor-not-allowed",children:[s.jsx("div",{className:"absolute -top-2.5 right-4",children:s.jsxs("span",{className:"px-2 py-0.5 bg-yellow-600/40 text-yellow-200 text-[10px] font-semibold rounded flex items-center gap-1 border border-yellow-500/50",children:[s.jsx(wt,{size:10}),n.analyze.comingSoon]})}),s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-4 h-4 rounded-full border-2 flex items-center justify-center border-yellow-400/50",children:s.jsx(wt,{className:"text-yellow-400/60",size:10})}),s.jsx("span",{className:"font-semibold text-yellow-300/70",children:n.analyze.analysisTypeVideo})]}),s.jsx("p",{className:"text-xs text-slate-500",children:n.analyze.analysisTypeVideoDesc}),s.jsx("div",{className:"mt-2 flex items-center justify-center",children:s.jsx(Kv,{className:"text-yellow-400/40",size:20})})]})]})]}),s.jsxs("div",{className:"mb-5 md:mb-6",children:[s.jsx("label",{className:"block text-white font-semibold mb-2 md:mb-3 text-sm md:text-base",children:n.analyze.privacyLabel}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-5 md:mb-6",children:[s.jsxs("button",{type:"button",onClick:()=>y(!0),className:`p-4 rounded-xl border-2 transition-all duration-300 text-left ${S?"border-pink-500 bg-pink-500/10":"border-purple-500/30 bg-slate-950/30 hover:border-purple-500/50"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${S?"border-pink-400 bg-pink-400":"border-slate-400"}`,children:S&&s.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),s.jsx("span",{className:`font-semibold ${S?"text-pink-400":"text-slate-300"}`,children:n.analyze.privacyPublic})]}),s.jsx("p",{className:"text-xs text-slate-400",children:n.analyze.privacyPublicDesc})]}),s.jsxs("button",{type:"button",onClick:()=>y(!1),className:`p-4 rounded-xl border-2 transition-all duration-300 text-left ${S?"border-purple-500/30 bg-slate-950/30 hover:border-purple-500/50":"border-pink-500 bg-pink-500/10"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${S?"border-slate-400":"border-pink-400 bg-pink-400"}`,children:!S&&s.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),s.jsx("span",{className:`font-semibold ${S?"text-slate-300":"text-pink-400"}`,children:n.analyze.privacyPrivate})]}),s.jsx("p",{className:"text-xs text-slate-400",children:n.analyze.privacyPrivateDesc})]})]})]}),s.jsxs("div",{className:"mb-5 md:mb-6",children:[s.jsx("label",{className:"block text-white font-semibold mb-2 md:mb-3 text-sm md:text-base",children:n.analyze.label}),s.jsx("textarea",{value:l,onChange:te=>o(te.target.value.slice(0,ae)),onKeyDown:te=>{if(te.key==="Enter"&&!te.shiftKey&&!te.ctrlKey&&!te.altKey&&!te.metaKey){te.preventDefault();const N=te.currentTarget.form;N&&!c&&l.trim()&&N.requestSubmit()}},placeholder:!L&&E===null?i==="tr"?"Analiz yapmak iin ltfen bir plan satn aln...":"Please purchase a plan to analyze...":n.analyze.placeholder,disabled:!L&&E===null,className:`w-full h-48 md:h-64 px-3 md:px-4 py-2 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all resize-none text-sm md:text-base ${!L&&E===null?"opacity-50 cursor-not-allowed":""}`,maxLength:ae,required:!0}),s.jsxs("div",{className:"flex justify-between items-center mt-2",children:[s.jsxs("span",{className:`text-xs md:text-sm ${X>ae*.9?"text-pink-400":"text-slate-500"}`,children:[X," / ",ae," ",n.analyze.characters]}),s.jsx("button",{type:"button",onClick:fe,disabled:!L&&E===null||Se,className:`p-2 rounded-lg transition-all duration-300 ${Se?"bg-blue-500/20 border border-blue-500/50 text-blue-400 animate-pulse":Ge?"bg-red-500/20 border border-red-500/50 text-red-400 animate-pulse":"bg-purple-500/20 border border-purple-500/30 text-purple-400 hover:border-purple-500/50 hover:bg-purple-500/30"} ${!L&&E===null||Se?"opacity-50 cursor-not-allowed":""}`,title:Se?i==="tr"?"evriliyor...":"Transcribing...":Ge?i==="tr"?"Kayd Durdur":"Stop Recording":i==="tr"?"Sesli Giri":"Voice Input",children:Se?s.jsx(Ne,{size:18,className:"animate-spin"}):Ge?s.jsx(af,{size:18}):s.jsx(lf,{size:18})})]})]}),b&&s.jsx("div",{className:"mb-5 md:mb-6 p-3 md:p-4 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400 text-sm md:text-base",children:b}),s.jsx("button",{type:"submit",disabled:c||!l.trim()||!L&&E===null||!h&&!_,className:"w-full px-5 md:px-6 py-3 md:py-4 rounded-xl bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300 hover:shadow-xl hover:shadow-pink-500/30 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm md:text-base",children:c?s.jsxs(s.Fragment,{children:[s.jsx(Ne,{className:"animate-spin",size:18}),n.analyze.saving]}):s.jsxs(s.Fragment,{children:[s.jsx(ut,{size:18}),n.analyze.submit]})})]})})]})]}):null}function mn(e,t){return t==="tr"?e.dream_text_tr||e.dream_text||"":e.dream_text_en||e.dream_text||""}function Qr(e,t){return t==="tr"?e.analysis_text_tr||e.analysis_text||"":e.analysis_text_en||e.analysis_text||""}function Db(){const{user:e,loading:t}=gt(),r=_t(),{t:n,language:i}=tt(),{showToast:a}=rr(),[l,o]=x.useState([]),[c,d]=x.useState(!0),[u,m]=x.useState(null),[f,p]=x.useState(""),[b,j]=x.useState("all"),[S,y]=x.useState("visual"),[h,g]=x.useState(new Set),[_,$]=x.useState(null),[A,M]=x.useState({}),[I,G]=x.useState({total:0,public:0,private:0}),[K,E]=x.useState(!1),[W,P]=x.useState(null),[U,k]=x.useState(!1),q=x.useRef(null),H=x.useRef(null);x.useEffect(()=>{if(t)return;if(!e){r("/signin");return}const X=new URLSearchParams(window.location.search).get("tab");(X==="text"||X==="visual")&&y(X);const ae=localStorage.getItem(`favorites_${e.id}`);ae&&g(new Set(JSON.parse(ae))),(async()=>{const T=Yr(e.id);k(T);const{data:R}=await w.from("subscriptions").select("plan_type").eq("user_id",e.id).single(),le=R==null?void 0:R.plan_type;P(le),E(le==="premium")})(),O();const te=w.channel("dreams-changes").on("postgres_changes",{event:"*",schema:"public",table:"dreams",filter:`user_id=eq.${e.id}`},T=>{console.log("Dream change received:",T),O()}).subscribe(),N=setInterval(()=>{O()},3e3);return()=>{w.removeChannel(te),clearInterval(N)}},[e,r]),x.useEffect(()=>{if(u){const C=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${C}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}else{const C=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",C&&window.scrollTo(0,parseInt(C||"0")*-1)}return()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow=""}},[u]);const O=async()=>{if(e)try{const{data:C,error:X}=await w.from("dreams").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(X)throw X;const ae=localStorage.getItem(`favorites_${e.id}`),fe=ae?new Set(JSON.parse(ae)):h,te=(C||[]).map(ye=>({...ye,is_favorite:fe.has(ye.id)}));o(te),g(fe);const N=te.length,T=te.filter(ye=>ye.is_public===!0).length,R=N-T;G({total:N,public:T,private:R}),!new URLSearchParams(window.location.search).get("tab")&&S==="visual"&&!te.some(ve=>{const ue=[];return ve.image_url&&ve.image_url.trim()!==""&&ue.push(ve.image_url),ve.image_url_2&&ve.image_url_2.trim()!==""&&ue.push(ve.image_url_2),ve.image_url_3&&ve.image_url_3.trim()!==""&&ue.push(ve.image_url_3),ue.length>0})&&te.length>0&&y("text")}catch(C){console.error("Error loading dreams:",C)}finally{d(!1)}},L=C=>{const X=new Date(C),ae=i==="tr"?"tr-TR":"en-US";return X.toLocaleDateString(ae,{year:"numeric",month:"long",day:"numeric"})},se=async(C,X)=>{if(X.stopPropagation(),!e){a("You must be logged in to delete dreams","error");return}if(confirm("Are you sure you want to delete this dream? This will also delete all likes and comments."))try{try{await w.from("dream_likes").delete().eq("dream_id",C)}catch(T){console.log("Error deleting likes:",T)}try{await w.from("dream_comments").delete().eq("dream_id",C)}catch(T){console.log("Error deleting comments:",T)}const ae=Yr(e.id);let fe=w.from("dreams").delete().eq("id",C);ae||(fe=fe.eq("user_id",e.id));const{error:te}=await fe;if(te)throw console.error("Delete error:",te),te;o(T=>T.filter(R=>R.id!==C)),(u==null?void 0:u.id)===C&&m(null);const N=new Set(h);N.delete(C),g(N),localStorage.setItem(`favorites_${e.id}`,JSON.stringify(Array.from(N))),a("Dream deleted successfully","success"),setTimeout(async()=>{await O()},100)}catch(ae){console.error("Error deleting dream:",ae);const fe=(ae==null?void 0:ae.message)||"Failed to delete dream. You can only delete your own dreams.";a(fe,"error")}},de=(C,X)=>{X.stopPropagation();const ae=new Set(h);ae.has(C)?(ae.delete(C),a("Removed from favorites","info")):(ae.add(C),a("Added to favorites","success")),g(ae),e&&localStorage.setItem(`favorites_${e.id}`,JSON.stringify(Array.from(ae)));const fe=ae.has(C);o(te=>te.map(N=>N.id===C?{...N,is_favorite:fe}:N)),(u==null?void 0:u.id)===C&&m({...u,is_favorite:fe})},ke=async(C,X,ae)=>{if(ae.stopPropagation(),!!e)try{const fe=!X,{error:te}=await w.from("dreams").update({is_public:fe}).eq("id",C).eq("user_id",e.id);if(te)throw te;o(N=>N.map(T=>T.id===C?{...T,is_public:fe}:T)),(u==null?void 0:u.id)===C&&m({...u,is_public:fe}),a(n.library.privacyUpdated,"success")}catch(fe){console.error("Error toggling privacy:",fe),a(n.library.privacyUpdateError,"error")}},Ge=async(C,X,ae)=>{var fe;if(ae.stopPropagation(),!C){a(n.library.imageNotFound,"error");return}try{const te=await fetch(C);if(!te.ok)throw new Error("Grsel yklenemedi");const N=await te.blob(),T=window.URL.createObjectURL(N),R=document.createElement("a");R.href=T;const le=((fe=C.split(".").pop())==null?void 0:fe.split("?")[0])||"png";R.download=`ruya-gorseli-${X}.${le}`,document.body.appendChild(R),R.click(),document.body.removeChild(R),window.URL.revokeObjectURL(T),a(n.library.downloadSuccess,"success")}catch(te){console.error("Error downloading image:",te),a(n.library.downloadError,"error")}},Ie=C=>{const X=[];return C.image_url&&C.image_url.trim()!==""&&X.push(C.image_url),C.image_url_2&&C.image_url_2.trim()!==""&&X.push(C.image_url_2),C.image_url_3&&C.image_url_3.trim()!==""&&X.push(C.image_url_3),X},Se=C=>{const X=Ie(C);if(C.primary_image_index!==null&&C.primary_image_index!==void 0&&C.primary_image_index>=0&&C.primary_image_index<X.length){const ae=X[C.primary_image_index];X.splice(C.primary_image_index,1),X.unshift(ae)}return X},He=async(C,X,ae)=>{if(ae.stopPropagation(),ae.preventDefault(),!!e)try{const{data:fe}=await w.from("subscriptions").select("plan_type").eq("user_id",e.id).single();if((fe==null?void 0:fe.plan_type)!=="premium"){a("Bu zellik sadece Premium kullanclar iin geerlidir.","error");return}const{error:te}=await w.from("dreams").update({primary_image_index:X}).eq("id",C).eq("user_id",e.id);if(te)throw te;o(N=>N.map(T=>T.id===C?{...T,primary_image_index:X}:T)),(u==null?void 0:u.id)===C&&m({...u,primary_image_index:X}),M(N=>({...N,[C]:0})),(u==null?void 0:u.id)===C&&M(N=>({...N,[`modal-${C}`]:0})),a("Kapak grseli gncellendi","success")}catch(fe){console.error("Error setting primary image:",fe),a("Kapak grseli gncellenemedi","error")}},rt=C=>{q.current=C.touches[0].clientX},st=C=>{H.current=C.touches[0].clientX},Nt=(C,X)=>{if(!q.current||!H.current)return;const ae=q.current-H.current;if(Math.abs(ae)>50){const te=A[C]||0;ae>0&&te<X.length-1?M({...A,[C]:te+1}):ae<0&&te>0&&M({...A,[C]:te-1})}q.current=null,H.current=null},Xe=l.filter(C=>{const X=f===""||C.dream_text.toLowerCase().includes(f.toLowerCase())||C.analysis_text&&C.analysis_text.toLowerCase().includes(f.toLowerCase()),ae=b==="all"||b==="favorites"&&C.is_favorite,fe=S==="visual"?C.analysis_type==="basic_visual"||C.analysis_type==="advanced_visual":C.analysis_type==="basic"||C.analysis_type==="advanced";return X&&ae&&fe});return e?c?s.jsx("div",{className:"min-h-screen relative pt-24 flex items-center justify-center",children:s.jsx(Ne,{className:"animate-spin text-purple-400",size:48})}):s.jsxs("div",{className:"min-h-screen relative pt-24 pb-24 sm:pb-16 px-6",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-40 left-10 w-96 h-96 bg-cyan-500/5 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-40 right-10 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"})]}),s.jsxs("div",{className:"relative max-w-7xl mx-auto z-10",children:[s.jsxs("div",{className:"text-center mb-8 animate-fade-in",children:[s.jsx("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight",children:n.library.title}),s.jsx("p",{className:"text-slate-400 text-lg mb-6",children:n.library.subtitle}),s.jsxs("div",{className:"flex justify-center gap-3 mb-6",children:[s.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-lg px-4 py-2",children:[s.jsx("div",{className:"text-lg font-semibold text-white",children:I.total}),s.jsx("div",{className:"text-xs text-slate-400",children:n.library.totalDreams})]}),s.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-cyan-500/20 rounded-lg px-4 py-2",children:[s.jsx("div",{className:"text-lg font-semibold text-white",children:I.public}),s.jsx("div",{className:"text-xs text-slate-400",children:n.library.publicDreams})]}),s.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-pink-500/20 rounded-lg px-4 py-2",children:[s.jsx("div",{className:"text-lg font-semibold text-white",children:I.private}),s.jsx("div",{className:"text-xs text-slate-400",children:n.library.privateDreams})]}),s.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-yellow-500/20 rounded-lg px-4 py-2",children:[s.jsx("div",{className:"text-lg font-semibold text-white",children:U?"":W==="free"?30:W==="standard"?60:W==="premium"?90:"-"}),s.jsx("div",{className:"text-xs text-slate-400",children:n.library.maxDreamLimit})]})]}),s.jsxs("div",{className:"max-w-2xl mx-auto mb-8 space-y-4 animate-fade-in-delay",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),s.jsx("input",{type:"text",value:f,onChange:C=>p(C.target.value),placeholder:n.library.searchPlaceholder,className:"w-full pl-10 pr-4 py-3 bg-slate-900/50 backdrop-blur-sm border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all shadow-lg"})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>{y("visual")},className:`flex-1 px-4 py-2 rounded text-sm font-medium transition-all ${S==="visual"?"bg-purple-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:n.social.visualAnalyses}),s.jsx("button",{onClick:()=>{y("text")},className:`flex-1 px-4 py-2 rounded text-sm font-medium transition-all ${S==="text"?"bg-purple-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:n.social.textAnalyses})]}),s.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[s.jsx("button",{onClick:()=>j("all"),className:`px-4 py-2 rounded-lg font-medium transition-all ${b==="all"?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"bg-slate-800/50 text-slate-400 hover:text-slate-300"}`,children:n.library.all}),s.jsxs("button",{onClick:()=>j("favorites"),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-1 ${b==="favorites"?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"bg-slate-800/50 text-slate-400 hover:text-slate-300"}`,children:[s.jsx(dr,{size:14,className:b==="favorites"?"fill-current":""}),n.library.favorites]})]})]})]}),l.length===0?s.jsxs("div",{className:"text-center py-20",children:[s.jsx(_r,{className:"mx-auto mb-4 text-slate-600",size:64}),s.jsx("p",{className:"text-slate-400 text-lg mb-6",children:n.library.empty}),s.jsx("button",{onClick:()=>r("/analyze"),className:"px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300",children:n.library.analyzeFirst})]}):Xe.length===0?s.jsxs("div",{className:"text-center py-20",children:[s.jsx(Qa,{className:"mx-auto mb-4 text-slate-600",size:64}),s.jsx("p",{className:"text-slate-400 text-lg mb-6",children:n.library.noDreamsFound})]}):s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Xe.map(C=>s.jsx("div",{onClick:()=>{C.status==="completed"&&m(C)},className:`bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-xl p-6 hover:border-purple-500/40 transition-all duration-300 relative group overflow-hidden min-h-[400px] ${C.status==="completed"?"cursor-pointer":""}`,children:C.status==="pending"||C.status==="processing"?s.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-50 bg-slate-900/95 backdrop-blur-md rounded-xl h-full",children:s.jsxs("div",{className:"relative flex flex-col items-center justify-center gap-4 p-8",children:[s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:s.jsx("div",{className:"w-48 h-48 bg-gradient-to-br from-purple-500/70 via-pink-500/70 to-purple-500/70 rounded-full blur-3xl animate-pulse"})}),s.jsxs("div",{className:"relative w-32 h-32 flex items-center justify-center",children:[s.jsx(Ne,{size:80,className:"animate-spin text-purple-400 relative z-10",strokeWidth:3.5,style:{filter:"drop-shadow(0 0 20px rgba(196, 181, 253, 0.9)) drop-shadow(0 0 40px rgba(236, 72, 153, 0.7))",animationDuration:"1s"}}),s.jsx("div",{className:"absolute inset-0 -m-6 border-4 border-transparent border-t-purple-400/60 border-r-pink-400/60 rounded-full animate-spin",style:{animationDuration:"1.5s"}}),s.jsx("div",{className:"absolute inset-0 -m-8 border-4 border-transparent border-b-purple-400/40 border-l-pink-400/40 rounded-full animate-spin",style:{animationDuration:"2s",animationDirection:"reverse"}})]})]})}):s.jsxs("div",{children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/0 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),s.jsxs("div",{onClick:()=>m(C),className:"cursor-pointer relative z-10",children:[Se(C).length>0&&(()=>{const X=Se(C);if(X.length===0)return null;const ae=A[C.id]||0,fe=X[ae],te=Ie(C),N=fe;let T=te.findIndex(R=>R===N);return T===-1&&(T=0),C.primary_image_index,s.jsxs("div",{className:"overflow-hidden rounded-lg relative group/image",onTouchStart:rt,onTouchMove:st,onTouchEnd:()=>Nt(C.id,X),onClick:R=>{R.target.tagName==="IMG"&&(R.stopPropagation(),$(fe))},children:[s.jsx("img",{src:fe,alt:"Dream visualization",className:"w-full h-64 md:h-80 object-contain group-hover:scale-105 transition-transform duration-500 cursor-zoom-in"}),X.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex gap-1.5 z-10 pointer-events-none",children:X.map((R,le)=>s.jsx("div",{className:`h-1.5 rounded-full transition-all ${le===ae?"bg-white w-6":"bg-white/50 w-1.5"}`},le))}),s.jsx("button",{onClick:R=>{R.stopPropagation(),R.preventDefault(),ae>0&&M({...A,[C.id]:ae-1})},className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/60 hover:bg-black/80 text-white p-2 rounded-full transition-all z-20 md:block hidden",disabled:ae===0,onMouseDown:R=>{R.stopPropagation(),R.preventDefault()},children:s.jsx(Wa,{size:20})}),s.jsx("button",{onClick:R=>{R.stopPropagation(),R.preventDefault(),ae<X.length-1&&M({...A,[C.id]:ae+1})},className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/60 hover:bg-black/80 text-white p-2 rounded-full transition-all z-20 md:block hidden",disabled:ae===X.length-1,onMouseDown:R=>{R.stopPropagation(),R.preventDefault()},children:s.jsx(_s,{size:20})})]})]})})(),Se(C).length===0&&C.status==="completed"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm mb-3",children:[s.jsx(ya,{size:14}),L(C.created_at)]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-purple-400 mb-2",children:n.library.yourDream}),s.jsx("p",{className:"text-slate-300 text-sm leading-relaxed line-clamp-4 group-hover:text-slate-200 transition-colors",children:mn(C,i)})]}),Qr(C,i)&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-pink-400 mb-2",children:n.library.analysis}),s.jsx("p",{className:"text-slate-300 text-sm leading-relaxed line-clamp-4 group-hover:text-slate-200 transition-colors",children:Qr(C,i)})]})]}):null,C.status==="completed"&&s.jsxs("div",{className:"flex gap-1.5 mt-4 mb-4 justify-end flex-wrap",children:[(()=>{const X=Se(C);if(K&&X.length>1){const ae=Ie(C),fe=A[C.id]||0,te=X[fe];let N=ae.findIndex(R=>R===te);N===-1&&(N=0);const T=C.primary_image_index===N;return s.jsx("button",{onClick:R=>{T?R.stopPropagation():He(C.id,N,R)},className:`p-2 rounded-lg border transition-all duration-300 hover:scale-110 ${T?"bg-yellow-500/20 border-yellow-500/50 text-yellow-400 hover:bg-yellow-500/30":"bg-slate-800/80 border-slate-700/50 text-slate-400 hover:border-yellow-500/50 hover:text-yellow-400 hover:bg-slate-700/50"}`,title:T?"Kapak grseli":"Kapak grseli olarak ayarla",children:s.jsx(wn,{size:16,className:T?"fill-current":""})})}return null})(),Se(C).length>0&&s.jsx("button",{onClick:X=>{X.stopPropagation();const ae=Se(C),fe=A[C.id]||0,te=ae[fe];Ge(te,C.id,X)},className:"p-2 bg-purple-500/20 hover:bg-purple-500/30 border border-purple-500/40 rounded-lg text-purple-400 transition-all duration-300 hover:scale-110 hover:shadow-lg hover:shadow-purple-500/30",title:n.library.download,children:s.jsx(bc,{size:16})}),s.jsx("button",{onClick:X=>ke(C.id,C.is_public||!1,X),className:`p-2 rounded-lg border transition-all duration-300 hover:scale-110 ${C.is_public?"bg-cyan-500/20 border-cyan-500/50 text-cyan-400 hover:bg-cyan-500/30":"bg-slate-800/80 border-slate-700/50 text-slate-400 hover:border-cyan-500/50 hover:text-cyan-400 hover:bg-slate-700/50"}`,title:C.is_public?n.library.makePrivate:n.library.makePublic,children:C.is_public?s.jsx(Va,{size:16}):s.jsx(wt,{size:16})}),s.jsx("button",{onClick:X=>{X.stopPropagation(),de(C.id,X)},className:`p-2 rounded-lg border transition-all duration-300 hover:scale-110 ${C.is_favorite?"bg-pink-500/20 border-pink-500/50 text-pink-400 hover:bg-pink-500/30":"bg-slate-800/80 border-slate-700/50 text-slate-400 hover:border-pink-500/50 hover:text-pink-400 hover:bg-slate-700/50"}`,title:C.is_favorite?n.library.removeFromFavorites:n.library.addToFavorites,children:s.jsx(dr,{size:16,className:C.is_favorite?"fill-current":""})}),s.jsx("button",{onClick:X=>{X.stopPropagation(),se(C.id,X)},className:"p-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/40 rounded-lg text-red-400 transition-all duration-300 hover:scale-110 hover:shadow-lg hover:shadow-red-500/30",title:n.library.delete,children:s.jsx(Dr,{size:16})})]}),Se(C).length>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm mb-2",children:[s.jsx(ya,{size:14}),L(C.created_at)]}),s.jsx("p",{className:"text-slate-300 line-clamp-3 group-hover:text-slate-200 transition-colors",children:mn(C,i)})]}):null]})]})},C.id))})]}),u&&s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-6",onClick:()=>m(null),children:s.jsxs("div",{className:"bg-slate-900 border border-purple-500/30 rounded-2xl max-w-5xl w-full max-h-[75vh] sm:max-h-[85vh] overflow-hidden flex flex-col mx-2 sm:mx-0",onClick:C=>C.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-purple-500/20 flex-shrink-0",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm mb-1",children:[s.jsx(ya,{size:14}),L(u.created_at)]}),s.jsx("h2",{className:"text-xl font-semibold text-white",children:n.library.dreamEntry})]}),s.jsx("button",{onClick:()=>m(null),className:"text-slate-400 hover:text-white transition-colors text-xl",children:""})]}),s.jsxs("div",{className:`flex flex-col sm:flex-row flex-1 overflow-hidden ${Se(u).length===0,""}`,children:[Se(u).length>0&&s.jsx("div",{className:"w-full sm:w-1/2 h-64 sm:h-auto flex-shrink-0 bg-slate-950 overflow-hidden relative",children:(()=>{const C=Se(u);if(C.length===0)return s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-900/20 to-pink-900/20",children:s.jsx(_r,{className:"text-purple-400/50",size:64})});const X=A[`modal-${u.id}`]||0,ae=C[X],fe=Ie(u),te=ae;let N=fe.findIndex(T=>T===te);return N===-1&&(N=0),u.primary_image_index,s.jsxs("div",{className:"w-full h-full flex items-center justify-center relative",children:[s.jsx("img",{src:ae,alt:"Dream visualization",className:"max-w-full max-h-full object-contain cursor-zoom-in",onClick:()=>$(ae)}),C.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2 z-10",children:C.map((T,R)=>s.jsx("button",{onClick:le=>{le.stopPropagation(),M({...A,[`modal-${u.id}`]:R})},className:`h-2 rounded-full transition-all ${R===X?"bg-white w-8":"bg-white/50 w-2 hover:bg-white/75"}`},R))}),s.jsx("button",{onClick:T=>{T.stopPropagation(),X>0&&M({...A,[`modal-${u.id}`]:X-1})},className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black/70 hover:bg-black/90 text-white p-2 rounded-full transition-all disabled:opacity-50 disabled:cursor-not-allowed",disabled:X===0,children:s.jsx(Wa,{size:24})}),s.jsx("button",{onClick:T=>{T.stopPropagation(),X<C.length-1&&M({...A,[`modal-${u.id}`]:X+1})},className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black/70 hover:bg-black/90 text-white p-2 rounded-full transition-all disabled:opacity-50 disabled:cursor-not-allowed",disabled:X===C.length-1,children:s.jsx(_s,{size:24})})]})]})})()}),s.jsx("div",{className:`flex flex-col overflow-y-auto ${u.analysis_type==="basic"||u.analysis_type==="advanced"?"w-full":"flex-1"}`,children:s.jsxs("div",{className:"p-6 pb-24 sm:pb-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:n.library.yourDream}),s.jsx("p",{className:"text-slate-300 leading-relaxed whitespace-pre-wrap",children:mn(u,i)})]}),Qr(u,i)&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-pink-400 mb-2",children:n.library.analysis}),s.jsx("p",{className:"text-slate-300 leading-relaxed whitespace-pre-wrap",children:Qr(u,i)})]}),s.jsxs("div",{className:"pt-6 pb-24 sm:pb-6 border-t border-purple-500/20 flex gap-2 flex-wrap",children:[(()=>{const C=Se(u);if(K&&C.length>1){const X=A[`modal-${u.id}`]||0,ae=Ie(u),fe=C[X];let te=ae.findIndex(T=>T===fe);te===-1&&(te=0);const N=u.primary_image_index===te;return s.jsx("button",{onClick:T=>{N?T.stopPropagation():He(u.id,te,T)},className:`p-2.5 rounded-lg border transition-all duration-300 hover:scale-110 ${N?"bg-yellow-500/20 border-yellow-500/50 text-yellow-400 hover:bg-yellow-500/30":"bg-slate-800/80 border-slate-700/50 text-slate-400 hover:border-yellow-500/50 hover:text-yellow-400 hover:bg-slate-700/50"}`,title:N?"Kapak grseli":"Kapak grseli olarak ayarla",children:s.jsx(wn,{size:18,className:N?"fill-current":""})})}return null})(),(()=>{const C=Se(u);if(C.length>0){const X=A[`modal-${u.id}`]||0,ae=C[X];return s.jsx("button",{onClick:fe=>{fe.stopPropagation(),Ge(ae,u.id,fe)},className:"p-2.5 bg-purple-500/20 hover:bg-purple-500/30 border border-purple-500/40 rounded-lg text-purple-400 transition-all duration-300 hover:scale-110",title:n.library.download,children:s.jsx(bc,{size:18})})}return null})(),s.jsx("button",{onClick:C=>{C.stopPropagation(),ke(u.id,u.is_public||!1,C)},className:`p-2.5 rounded-lg border transition-all duration-300 hover:scale-110 ${u.is_public?"bg-cyan-500/20 border-cyan-500/50 text-cyan-400 hover:bg-cyan-500/30":"bg-slate-800/80 border-slate-700/50 text-slate-400 hover:border-cyan-500/50 hover:text-cyan-400 hover:bg-slate-700/50"}`,title:u.is_public?n.library.makePrivate:n.library.makePublic,children:u.is_public?s.jsx(Va,{size:18}):s.jsx(wt,{size:18})}),s.jsx("button",{onClick:C=>{C.stopPropagation(),de(u.id,C)},className:`p-2.5 rounded-lg border transition-all duration-300 hover:scale-110 ${u.is_favorite?"bg-pink-500/20 border-pink-500/50 text-pink-400 hover:bg-pink-500/30":"bg-slate-800/80 border-slate-700/50 text-slate-400 hover:border-pink-500/50 hover:text-pink-400 hover:bg-slate-700/50"}`,title:u.is_favorite?n.library.removeFromFavorites:n.library.addToFavorites,children:s.jsx(dr,{size:18,className:u.is_favorite?"fill-current":""})}),s.jsx("button",{onClick:C=>{C.stopPropagation(),se(u.id,C)},className:"p-2.5 bg-red-500/20 hover:bg-red-500/30 border border-red-500/40 rounded-lg text-red-400 transition-all duration-300 hover:scale-110 hover:shadow-lg hover:shadow-red-500/30",title:n.library.delete,children:s.jsx(Dr,{size:18})})]})]})})]})]})}),_&&s.jsxs("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-sm z-[60] flex items-center justify-center p-4",onClick:()=>$(null),children:[s.jsx("button",{onClick:()=>$(null),className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors z-10 bg-black/50 rounded-full p-2",children:s.jsx(pt,{size:24})}),s.jsx("img",{src:_,alt:"Dream visualization - full size",className:"max-w-full max-h-[90vh] object-contain rounded-lg",onClick:C=>C.stopPropagation()})]})]}):null}function yf({onTranscription:e,onAudioBlob:t,language:r,mode:n="transcribe",disabled:i=!1,showToast:a}){const[l,o]=x.useState(!1),[c,d]=x.useState(!1),u=x.useRef(null),m=x.useRef([]),f=async()=>{if(l&&u.current){u.current.stop(),o(!1);return}try{const p=await navigator.mediaDevices.getUserMedia({audio:!0}),b=new MediaRecorder(p,{mimeType:"audio/webm"});u.current=b,m.current=[],b.ondataavailable=j=>{j.data.size>0&&m.current.push(j.data)},b.onstop=async()=>{p.getTracks().forEach(S=>S.stop());const j=new Blob(m.current,{type:"audio/webm"});if(console.log("Audio recorded, size:",j.size),j.size<1e3){a(r==="tr"?"Ses kayd ok ksa":"Recording too short","error");return}if(n==="audio"&&t){t(j),a(r==="tr"?"Ses kaydedildi":"Audio recorded","success");return}d(!0);try{const S=new FormData;S.append("audio",j,"recording.webm"),S.append("language",r);const y=await fetch("https://soewlqmskqmpycaevhoc.supabase.co/functions/v1/whisper-transcribe",{method:"POST",body:S});if(!y.ok)throw new Error("Transcription failed");const h=await y.json();h.text?(e(h.text),a(r==="tr"?"Ses metne evrildi":"Voice transcribed","success")):a(r==="tr"?"Ses anlalamad":"Could not understand audio","error")}catch(S){console.error("Transcription error:",S),a(r==="tr"?"Ses evirme hatas":"Transcription error","error")}finally{d(!1)}},b.start(),o(!0),a(r==="tr"?"Kayt balad... Bitince tekrar tklayn":"Recording... Click again when done","info")}catch(p){console.error("Microphone access error:",p),a(r==="tr"?"Mikrofon eriimi reddedildi":"Microphone access denied","error")}};return s.jsx("button",{type:"button",onClick:f,disabled:i||c,className:`p-2 rounded-lg transition-all duration-300 ${c?"bg-blue-500/20 border border-blue-500/50 text-blue-400 animate-pulse":l?"bg-red-500/20 border border-red-500/50 text-red-400 animate-pulse":"bg-purple-500/20 border border-purple-500/30 text-purple-400 hover:border-purple-500/50 hover:bg-purple-500/30"} ${i||c?"opacity-50 cursor-not-allowed":""}`,title:c?r==="tr"?"evriliyor...":"Transcribing...":l?r==="tr"?"Kayd Durdur":"Stop Recording":r==="tr"?"Sesli Giri":"Voice Input",children:c?s.jsx(Ne,{size:18,className:"animate-spin"}):l?s.jsx(af,{size:18}):s.jsx(lf,{size:18})})}function Rb(){const{user:e,loading:t}=gt(),r=_t(),{t:n,language:i}=tt(),{showToast:a}=rr(),[l,o]=x.useState(!1),[c,d]=x.useState(!0),[u,m]=x.useState([]),[f,p]=x.useState([]),[b,j]=x.useState(null),[S,y]=x.useState(""),[h,g]=x.useState(!1),[_,$]=x.useState({}),[A,M]=x.useState(null);x.useEffect(()=>{if(t)return;if(!e){r("/signin");return}(async()=>{try{const{data:U}=await w.from("subscriptions").select("plan_type").eq("user_id",e.id).single(),k=(U==null?void 0:U.plan_type)==="premium"||(U==null?void 0:U.plan_type)==="ruyagezer";if(o(k),!k){d(!1);return}const{data:q,error:H}=await w.from("dreams").select("id, image_url, image_url_2, image_url_3, dream_text, created_at").eq("user_id",e.id).not("image_url","is",null).order("created_at",{ascending:!1});if(H)throw H;m(q||[]);const{data:O,error:L}=await w.from("dream_generations").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(L)throw L;p(O||[])}catch(U){console.error("Error loading data:",U),a("Error loading data","error")}finally{d(!1)}})()},[e,t,r]),x.useEffect(()=>{if(!e||!l)return;const P=w.channel("dream-generations-changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"dream_generations",filter:`user_id=eq.${e.id}`},U=>{console.log("Generation updated:",U);const k=U.new;p(q=>q.map(H=>H.id===k.id?k:H)),k.status==="completed"&&k.generated_image_url&&a("Image generation completed!","success")}).subscribe();return()=>{w.removeChannel(P)}},[e,l,a]);const I=async()=>{if(!b||!S.trim()){a("Please select an image and enter a prompt","error");return}g(!0);try{const{data:P,error:U}=await w.from("dream_generations").insert({user_id:e.id,source_image_url:b,generated_image_url:"",prompt:S.trim(),is_public:!1,status:"processing"}).select().single();if(U)throw console.error(" Insert error:",U),new Error(`Database error: ${U.message}`);if(!P)throw new Error("Failed to create generation record");console.log(" Generation record created:",P.id);const k="https://borablt.app.n8n.cloud/webhook/generator-webhook";if(k){console.log(" Calling webhook:",k);try{const L=await fetch(k,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e.id,source_image_url:b,prompt:S.trim(),generation_id:P.id})});L.ok?console.log(" Webhook called successfully"):console.warn(` Webhook request failed: ${L.status} ${L.statusText}`)}catch(L){console.warn(" Webhook call failed:",L)}}let q=0;const H=12,O=async()=>{const{data:L,error:se}=await w.from("dream_generations").select("*").eq("id",P.id).single();if(se)return null;if(L.status==="completed"&&L.generated_image_url)return L;if(L.status==="failed")throw new Error("Generation failed");return q<H?(q++,await new Promise(de=>setTimeout(de,5e3)),O()):null};p([P,...f]),y(""),j(null),a("Generation started! Processing in background...","success"),k&&O().then(L=>{L&&L.status==="completed"&&(p(se=>se.map(de=>de.id===L.id?L:de)),a("Image generation completed!","success"))}).catch(L=>{console.error("Polling error:",L)})}catch(P){console.error("Error generating image:",P);const U=P instanceof Error?P.message:"Unknown error occurred";a(`Generation failed: ${U}`,"error")}finally{g(!1)}},G=async(P,U)=>{try{const{error:k}=await w.from("dream_generations").update({is_public:!U}).eq("id",P);if(k)throw k;p(f.map(q=>q.id===P?{...q,is_public:!U}:q)),a(U?"Made private":"Made public","success")}catch(k){console.error("Error toggling public status:",k),a("Error updating status","error")}},K=async P=>{if(confirm(n.generator.deleteConfirm))try{const{error:U}=await w.from("dream_generations").delete().eq("id",P);if(U)throw U;p(f.filter(k=>k.id!==P)),a("Generation deleted","success")}catch(U){console.error("Error deleting generation:",U),a("Error deleting generation","error")}},E=async P=>{try{a("Downloading image...","info");const U=await fetch(P,{mode:"cors",credentials:"omit"});if(!U.ok)throw new Error(`HTTP error! status: ${U.status}`);const k=await U.blob(),q=window.URL.createObjectURL(k),H=document.createElement("a");H.style.display="none",H.href=q,H.download=`submirra-generation-${Date.now()}.png`,document.body.appendChild(H),H.click(),setTimeout(()=>{document.body.removeChild(H),window.URL.revokeObjectURL(q)},100),a("Image downloaded successfully!","success")}catch(U){console.error("Download error:",U);try{const k=document.createElement("a");k.href=P,k.download=`submirra-generation-${Date.now()}.png`,k.target="_blank",k.rel="noopener noreferrer",document.body.appendChild(k),k.click(),document.body.removeChild(k),a("Download started...","success")}catch(k){console.error("Fallback download error:",k),a("Opening image in new tab...","info"),window.open(P,"_blank")}}};if(t||c)return s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(Ne,{className:"animate-spin text-purple-400",size:48})});if(!l)return s.jsxs("div",{className:"min-h-screen relative pt-24 pb-24 sm:pb-16 px-4",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-40 right-10 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-40 left-10 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"})]}),s.jsxs("div",{className:"relative max-w-3xl mx-auto text-center",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-pink-500/10 to-purple-500/10 border border-pink-500/30 rounded-full mb-8",children:[s.jsx(wt,{className:"text-pink-400",size:20}),s.jsx("span",{className:"text-pink-400 font-semibold",children:n.generator.premiumOnly})]}),s.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6 pb-4 leading-tight bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 text-transparent bg-clip-text",children:n.generator.title}),s.jsx("p",{className:"text-xl text-slate-400 mb-12 max-w-2xl mx-auto",children:n.generator.subtitle}),s.jsxs("div",{className:"relative p-8 md:p-12 rounded-3xl bg-gradient-to-br from-slate-900/50 to-slate-800/30 border border-purple-500/20 backdrop-blur-sm overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-pink-500/5 to-purple-500/5"}),s.jsxs("div",{className:"relative",children:[s.jsx(Hs,{className:"mx-auto mb-6 text-purple-400",size:64}),s.jsx("p",{className:"text-slate-300 mb-8 text-lg",children:n.generator.lockMessage}),s.jsx("button",{onClick:()=>r("/pricing"),className:"px-8 py-4 bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold rounded-xl hover:from-pink-500 hover:to-purple-500 transition-all duration-300 hover:shadow-lg hover:shadow-pink-500/30 hover:scale-105",children:n.generator.upgradeToPremium})]})]})]})]});const W=[];return u.forEach(P=>{P.image_url&&W.push({url:P.image_url,dreamId:P.id,dreamText:P.dream_text}),P.image_url_2&&W.push({url:P.image_url_2,dreamId:P.id,dreamText:P.dream_text}),P.image_url_3&&W.push({url:P.image_url_3,dreamId:P.id,dreamText:P.dream_text})}),s.jsxs("div",{className:"min-h-screen relative pt-24 pb-24 sm:pb-16 px-4 overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-40 right-10 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse"}),s.jsx("div",{className:"absolute bottom-40 left-10 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-gradient-to-r from-yellow-500/5 via-purple-500/5 to-pink-500/5 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-purple-500/5 to-transparent"})]}),s.jsxs("div",{className:"relative max-w-7xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-yellow-500/20 via-amber-500/20 to-yellow-500/20 border border-yellow-500/40 rounded-full mb-8 shadow-lg shadow-yellow-500/20 animate-fade-in",children:[s.jsx(ut,{className:"text-yellow-300 drop-shadow-[0_0_8px_rgba(253,224,71,0.8)]",size:22}),s.jsx("span",{className:"text-yellow-300 font-bold text-sm tracking-wide drop-shadow-[0_0_4px_rgba(253,224,71,0.6)]",children:"Premium Feature"})]}),s.jsx("h1",{className:"text-5xl md:text-7xl font-extrabold mb-6 pb-6 leading-tight bg-gradient-to-r from-pink-400 via-purple-400 via-cyan-400 to-pink-400 text-transparent bg-clip-text animate-fade-in bg-[length:200%_auto] animate-gradient",children:n.generator.title}),s.jsx("p",{className:"text-xl md:text-2xl text-slate-300 max-w-3xl mx-auto leading-relaxed animate-fade-in",style:{animationDelay:"0.1s"},children:n.generator.subtitle})]}),s.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 mb-16 items-stretch",children:[s.jsxs("div",{className:"bg-gradient-to-br from-slate-900/80 via-slate-900/60 to-slate-900/80 backdrop-blur-xl border border-purple-500/30 rounded-3xl p-8 shadow-2xl shadow-purple-500/10 hover:shadow-purple-500/20 transition-all duration-500 hover:border-purple-500/50 flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-xl border border-purple-500/30",children:s.jsx(Ka,{className:"text-purple-400 drop-shadow-[0_0_8px_rgba(168,85,247,0.6)]",size:28})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:n.generator.selectImage}),s.jsx("p",{className:"text-slate-400 text-sm mt-1",children:n.generator.selectImageDesc})]})]}),W.length===0?s.jsxs("div",{className:"text-center py-16 bg-gradient-to-br from-slate-900/50 to-slate-800/30 rounded-2xl border border-purple-500/10",children:[s.jsx(Ka,{className:"mx-auto mb-4 text-slate-500",size:48}),s.jsx("p",{className:"text-slate-300 mb-2 font-medium",children:n.generator.noImages}),s.jsx("p",{className:"text-slate-500 text-sm",children:n.generator.analyzeFirst})]}):s.jsx("div",{className:"grid grid-cols-2 gap-4 overflow-y-auto pr-2 pb-2 scrollbar-hide custom-scrollbar flex-1",style:{maxHeight:"600px",gridAutoRows:"min-content"},children:W.map((P,U)=>s.jsx("div",{className:"w-full",style:{aspectRatio:"1 / 1"},children:s.jsxs("button",{onClick:()=>j(P.url),className:`relative group rounded-2xl overflow-hidden transition-all duration-500 w-full h-full ${b===P.url?"ring-4 ring-pink-500 ring-offset-2 ring-offset-slate-900 scale-[0.98] shadow-2xl shadow-pink-500/50":"hover:scale-105 hover:shadow-xl hover:shadow-purple-500/20"}`,style:{animationDelay:`${U*.05}s`},children:[_[`select-${U}`]&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/90 backdrop-blur-md z-10 rounded-2xl",children:s.jsx(Ne,{className:"animate-spin text-pink-400",size:28})}),s.jsx("img",{src:P.url,alt:"Dream",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onLoadStart:()=>$(k=>({...k,[`select-${U}`]:!0})),onLoad:()=>$(k=>({...k,[`select-${U}`]:!1})),onError:()=>$(k=>({...k,[`select-${U}`]:!1}))}),s.jsx("div",{className:`absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent transition-all duration-500 ${b===P.url?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:s.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:s.jsxs("p",{className:"text-white text-xs font-medium line-clamp-2 drop-shadow-lg",children:[P.dreamText.substring(0,60),"..."]})})}),b===P.url&&s.jsx("div",{className:"absolute top-3 right-3 bg-gradient-to-br from-pink-500 to-purple-500 text-white rounded-full p-2 shadow-lg shadow-pink-500/50 animate-pulse",children:s.jsx(ut,{size:18,className:"drop-shadow-[0_0_4px_rgba(255,255,255,0.8)]"})}),b===P.url&&s.jsx("div",{className:"absolute inset-0 border-2 border-pink-400/50 rounded-2xl animate-pulse"})]})},`${P.dreamId}-${U}`))})]}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-900/80 via-slate-900/60 to-slate-900/80 backdrop-blur-xl border border-pink-500/30 rounded-3xl p-8 shadow-2xl shadow-pink-500/10 hover:shadow-pink-500/20 transition-all duration-500 hover:border-pink-500/50 flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-pink-500/20 to-purple-500/20 rounded-xl border border-pink-500/30",children:s.jsx(Hs,{className:"text-pink-400 drop-shadow-[0_0_8px_rgba(236,72,153,0.6)]",size:28})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:n.generator.promptLabel}),s.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Describe your transformation"})]})]}),s.jsxs("div",{className:"relative mb-6",children:[s.jsx("textarea",{value:S,onChange:P=>y(P.target.value),onKeyDown:P=>{P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),!h&&b&&S.trim()&&I())},placeholder:n.generator.promptPlaceholder,className:"w-full flex-1 min-h-[200px] px-5 py-4 pr-14 bg-slate-950/70 border-2 border-purple-500/30 rounded-2xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/80 focus:ring-2 focus:ring-purple-500/30 resize-none transition-all duration-300 text-sm leading-relaxed shadow-lg shadow-purple-500/5",disabled:h}),s.jsx("div",{className:"absolute right-3 bottom-3",children:s.jsx(yf,{onTranscription:P=>y(U=>U+" "+P),language:i,mode:"transcribe",disabled:h,showToast:a})})]}),b&&s.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-br from-purple-500/10 to-pink-500/10 rounded-2xl border border-purple-500/20",children:[s.jsxs("p",{className:"text-slate-300 text-sm mb-3 font-medium flex items-center gap-2",children:[s.jsx(ut,{className:"text-pink-400",size:16}),"Selected Image:"]}),s.jsxs("div",{className:"relative bg-slate-900/50 rounded-xl overflow-hidden border-2 border-purple-500/30 shadow-lg",style:{aspectRatio:"1 / 1",maxWidth:"300px"},children:[_["selected-preview"]&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/90 backdrop-blur-md z-10 rounded-xl",children:s.jsx(Ne,{className:"animate-spin text-pink-400",size:32})}),s.jsx("img",{src:b,alt:"Selected",className:"w-full h-full object-cover",onLoadStart:()=>$(P=>({...P,"selected-preview":!0})),onLoad:()=>$(P=>({...P,"selected-preview":!1})),onError:()=>$(P=>({...P,"selected-preview":!1}))}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent pointer-events-none"})]})]}),s.jsx("button",{onClick:I,disabled:h||!b||!S.trim(),className:`w-full px-8 py-5 bg-gradient-to-r from-pink-600 via-purple-600 to-pink-600 text-white font-bold rounded-2xl transition-all duration-500 hover:from-pink-500 hover:via-purple-500 hover:to-pink-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 text-lg shadow-2xl shadow-pink-500/30 hover:shadow-pink-500/50 hover:scale-[1.02] active:scale-[0.98] ${!b||!S.trim()?"opacity-60 cursor-not-allowed":"hover:shadow-2xl"}`,children:h?s.jsxs(s.Fragment,{children:[s.jsx(Ne,{className:"animate-spin",size:24}),s.jsx("span",{children:n.generator.generating})]}):s.jsxs(s.Fragment,{children:[s.jsx(Hs,{size:24,className:"drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]"}),s.jsx("span",{children:n.generator.generateButton})]})})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-900/80 via-slate-900/60 to-slate-900/80 backdrop-blur-xl border border-purple-500/30 rounded-3xl p-8 shadow-2xl shadow-purple-500/10",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-yellow-500/20 to-amber-500/20 rounded-xl border border-yellow-500/30",children:s.jsx(ut,{className:"text-yellow-400 drop-shadow-[0_0_8px_rgba(250,204,21,0.6)]",size:28})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-white",children:n.generator.myGenerations}),s.jsxs("p",{className:"text-slate-400 text-sm mt-1",children:[f.length," ",f.length===1?"generation":"generations"]})]})]}),f.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Hs,{className:"mx-auto mb-4 text-slate-600",size:48}),s.jsx("p",{className:"text-slate-400 mb-2",children:n.generator.empty}),s.jsx("p",{className:"text-slate-500 text-sm",children:n.generator.startGenerating})]}):s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map((P,U)=>s.jsxs("div",{className:"group bg-gradient-to-br from-slate-950/50 to-slate-900/30 rounded-2xl overflow-hidden border border-purple-500/20 hover:border-purple-500/40 transition-all duration-500 hover:shadow-2xl hover:shadow-purple-500/20 hover:scale-[1.02]",style:{animationDelay:`${U*.1}s`},children:[s.jsxs("div",{className:"relative",children:[!P.generated_image_url||P.status==="processing"?s.jsxs("div",{className:"w-full aspect-square flex flex-col items-center justify-center bg-slate-900/50",children:[s.jsxs("div",{className:"relative w-20 h-20 mb-4",children:[s.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-purple-500/20"}),s.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-transparent border-t-purple-500 animate-spin"}),s.jsx("div",{className:"absolute inset-2 rounded-full border-4 border-transparent border-t-pink-500 animate-spin",style:{animationDirection:"reverse",animationDuration:"1s"}})]}),s.jsx("p",{className:"text-slate-400 text-sm",children:n.generator.processing}),s.jsx("p",{className:"text-slate-500 text-xs mt-1",children:n.generator.pleaseWait})]}):s.jsxs(s.Fragment,{children:[_[P.id]&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 backdrop-blur-sm z-10",children:s.jsx(Ne,{className:"animate-spin text-pink-400",size:32})}),s.jsxs("div",{className:"relative cursor-pointer group/image",onClick:()=>M({imageUrl:P.generated_image_url,prompt:P.prompt}),children:[s.jsx("img",{src:P.generated_image_url,alt:"Generated",className:"w-full aspect-square object-cover transition-transform group-hover/image:scale-105",onLoadStart:()=>$(k=>({...k,[P.id]:!0})),onLoad:()=>$(k=>({...k,[P.id]:!1})),onError:()=>$(k=>({...k,[P.id]:!1}))}),s.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover/image:bg-black/40 transition-colors flex items-center justify-center",children:s.jsx(Xv,{className:"text-white opacity-0 group-hover/image:opacity-100 transition-opacity",size:32})})]})]}),P.generated_image_url&&P.status!=="processing"&&s.jsx("div",{className:"absolute top-2 right-2 flex gap-2",children:s.jsx("button",{onClick:()=>G(P.id,P.is_public),className:"p-2 bg-slate-900/80 backdrop-blur-sm rounded-lg hover:bg-slate-800 transition-colors",title:P.is_public?n.generator.makePrivate:n.generator.makePublic,children:P.is_public?s.jsx(nf,{size:16,className:"text-green-400"}):s.jsx(Cv,{size:16,className:"text-slate-400"})})})]}),s.jsxs("div",{className:"p-5 bg-gradient-to-br from-slate-950/50 to-slate-900/30",children:[s.jsx("p",{className:"text-slate-200 text-sm mb-3 line-clamp-2 font-medium leading-relaxed",children:P.prompt}),s.jsxs("p",{className:"text-slate-400 text-xs mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-purple-400"}),n.generator.generatedAt,": ",new Date(P.created_at).toLocaleDateString()]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>E(P.generated_image_url),disabled:!P.generated_image_url||P.status==="processing",className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-purple-600/30 to-pink-600/30 hover:from-purple-600/40 hover:to-pink-600/40 text-purple-300 rounded-xl transition-all duration-300 flex items-center justify-center gap-2 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg hover:shadow-purple-500/20 border border-purple-500/20",children:[s.jsx(bc,{size:18}),n.generator.download]}),s.jsx("button",{onClick:()=>K(P.id),className:"px-4 py-2.5 bg-gradient-to-r from-red-600/20 to-red-500/20 hover:from-red-600/30 hover:to-red-500/30 text-red-400 rounded-xl transition-all duration-300 border border-red-500/20 hover:shadow-lg hover:shadow-red-500/20",children:s.jsx(Dr,{size:18})})]})]})]},P.id))})]})]}),A&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/95 backdrop-blur-sm p-4",onClick:()=>M(null),children:[s.jsx("button",{onClick:()=>M(null),className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors z-10 bg-black/50 rounded-full p-2","aria-label":"Close modal",children:s.jsx(pt,{className:"text-white",size:24})}),s.jsxs("div",{className:"max-w-4xl w-full",onClick:P=>P.stopPropagation(),children:[s.jsx("img",{src:A.imageUrl,alt:"Full size",className:"w-full max-h-[70vh] object-contain rounded-lg mb-4"}),s.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-sm rounded-lg p-6 border border-purple-500/30",children:[s.jsxs("h3",{className:"text-white font-semibold mb-2 flex items-center gap-2",children:[s.jsx(Hs,{size:18,className:"text-purple-400"}),"Generation Prompt"]}),s.jsx("p",{className:"text-slate-300 leading-relaxed",children:A.prompt})]})]})]})]})}function $b(){const[e,t]=x.useState(!1),[r,n]=x.useState(""),[i,a]=x.useState(""),[l,o]=x.useState(""),[c,d]=x.useState(""),[u,m]=x.useState(null),[f,p]=x.useState(!1),[b,j]=x.useState(!1),[S,y]=x.useState(!1),[h,g]=x.useState(!1),_=x.useRef(null),$=x.useRef(null),A=x.useRef(null),M=x.useRef(null),{signIn:I,signUp:G,user:K}=gt(),E=_t(),{t:W}=tt();if(x.useEffect(()=>{_.current&&(_.current.oninvalid=U=>{U.preventDefault();const k=U.target;k.validity.valueMissing?k.setCustomValidity(W.auth.validationRequired):k.validity.typeMismatch&&k.setCustomValidity(W.auth.validationEmail)},_.current.oninput=U=>{U.target.setCustomValidity("")}),$.current&&($.current.oninvalid=U=>{U.preventDefault(),U.target.setCustomValidity(W.auth.validationRequired)},$.current.oninput=U=>{U.target.setCustomValidity("")}),A.current&&(A.current.oninvalid=U=>{U.preventDefault(),U.target.setCustomValidity(W.auth.validationRequired)},A.current.oninput=U=>{U.target.setCustomValidity("")})},[W,e]),x.useEffect(()=>{K&&E("/")},[K,E]),K)return null;const P=async U=>{U.preventDefault(),m(null),p(!0);try{if(e){if(!l.trim())throw new Error("Please enter your full name");if(!c.trim())throw new Error("Please enter a username");if(c.length<3)throw new Error("Username must be at least 3 characters");if(!b){m(W.auth.mustAcceptTerms),p(!1);return}if(!S){m(W.auth.mustAcceptPrivacy),p(!1);return}if(!h){m(W.auth.mustAcceptAge||"18 yandan byk olduunuzu onaylamalsnz"),p(!1);return}const{error:k}=await G(r,i,l,c);if(k){console.error("SignUp UI Error:",k),console.error("Full error details:",{message:k.message,stack:k.stack,name:k.name});const q=k.message.toLowerCase();q.includes("already registered")||q.includes("already exists")||q.includes("duplicate")?m(W.auth.emailAlreadyExists):q.includes("configuration")?m("Supabase yaplandrmas eksik. .env dosyasn kontrol edin."):q.includes("email confirmations are required")?m('E-posta onay gerekli. Supabase Dashboard  Authentication  Settings  "Enable email confirmations" seeneini kapatn.'):q.includes("rate limit")?m("ok fazla kayt denemesi. Ltfen 5-10 dakika bekleyip tekrar deneyin."):m(k.message),p(!1);return}E("/analyze")}else{const{error:k}=await I(r,i);if(k){const q=k.message.toLowerCase();q.includes("invalid")||q.includes("credentials")?m(W.auth.invalidCredentials):m(k.message),p(!1);return}E("/analyze")}}catch(k){m(k instanceof Error?k.message:"An error occurred")}finally{p(!1)}};return s.jsxs("div",{className:"min-h-screen relative pt-20 md:pt-24 pb-24 sm:pb-16 px-4 md:px-6 flex items-center",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-40 left-20 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-40 right-20 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"})]}),s.jsxs("div",{className:"relative max-w-md mx-auto w-full z-10",children:[s.jsxs("div",{className:"text-center mb-6 md:mb-8 animate-fade-in",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",children:e?W.auth.createAccount:W.auth.welcomeBack}),s.jsx("p",{className:"text-slate-400 text-sm md:text-base px-2",children:e?W.auth.startJourney:W.auth.continueExploring})]}),s.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-5 md:p-8 hover:border-purple-500/30 transition-all duration-300 hover:shadow-xl hover:shadow-purple-500/10 animate-slide-down",children:[s.jsxs("div",{className:"flex gap-2 mb-6 md:mb-8",children:[s.jsx("button",{onClick:()=>{t(!1),m(null),j(!1),y(!1),g(!1)},className:`flex-1 py-2.5 md:py-3 rounded-lg font-medium transition-all duration-200 text-sm md:text-base ${e?"bg-slate-800/50 text-slate-400 hover:text-slate-300":"bg-gradient-to-r from-pink-600 to-purple-600 text-white"}`,children:W.auth.signIn}),s.jsx("button",{onClick:()=>{t(!0),m(null),j(!1),y(!1),g(!1)},className:`flex-1 py-2.5 md:py-3 rounded-lg font-medium transition-all duration-200 text-sm md:text-base ${e?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"bg-slate-800/50 text-slate-400 hover:text-slate-300"}`,children:W.auth.signUp})]}),u&&s.jsx("div",{className:"mb-5 md:mb-6 p-3 md:p-4 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400 text-xs md:text-sm",children:u}),s.jsxs("form",{onSubmit:P,className:"space-y-5 md:space-y-6",children:[e&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-slate-300 font-medium mb-2 text-sm md:text-base",children:W.auth.fullName}),s.jsx("input",{ref:A,type:"text",value:l,onChange:U=>o(U.target.value),className:"w-full px-3 md:px-4 py-2.5 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all text-sm md:text-base",placeholder:W.auth.enterFullName,required:e})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-slate-300 font-medium mb-2 text-sm md:text-base",children:"Username"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-3 md:left-4 top-1/2 transform -translate-y-1/2 text-slate-400 text-sm md:text-base",children:"@"}),s.jsx("input",{ref:M,type:"text",value:c,onChange:U=>{const k=U.target.value.replace(/[^a-zA-Z0-9_]/g,"");d(k)},className:"w-full pl-8 md:pl-10 pr-3 md:pr-4 py-2.5 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all text-sm md:text-base",placeholder:"username",required:e,minLength:3,maxLength:20})]}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Letters, numbers, and underscores only"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-slate-300 font-medium mb-2 text-sm md:text-base",children:W.auth.email}),s.jsx("input",{ref:_,type:"email",value:r,onChange:U=>n(U.target.value),className:"w-full px-3 md:px-4 py-2.5 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all text-sm md:text-base",placeholder:W.auth.enterEmail,required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-slate-300 font-medium mb-2 text-sm md:text-base",children:W.auth.password}),s.jsx("input",{ref:$,type:"password",value:i,onChange:U=>a(U.target.value),className:"w-full px-3 md:px-4 py-2.5 md:py-3 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/20 transition-all text-sm md:text-base",placeholder:W.auth.enterPassword,required:!0,minLength:6})]}),e&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",id:"acceptTerms",checked:b,onChange:U=>j(U.target.checked),className:"mt-1 w-4 h-4 rounded border-purple-500/30 bg-slate-950/50 text-purple-600 focus:ring-purple-500/50 focus:ring-2 cursor-pointer"}),s.jsxs("label",{htmlFor:"acceptTerms",className:"text-slate-300 text-sm md:text-base cursor-pointer flex-1",children:[W.auth.acceptTerms," ",s.jsxs("button",{type:"button",onClick:U=>{U.preventDefault(),E("/terms")},className:"text-purple-400 hover:text-purple-300 underline transition-colors",children:["(",W.auth.readTerms,")"]})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",id:"acceptPrivacy",checked:S,onChange:U=>y(U.target.checked),className:"mt-1 w-4 h-4 rounded border-purple-500/30 bg-slate-950/50 text-purple-600 focus:ring-purple-500/50 focus:ring-2 cursor-pointer"}),s.jsxs("label",{htmlFor:"acceptPrivacy",className:"text-slate-300 text-sm md:text-base cursor-pointer flex-1",children:[W.auth.acceptPrivacy," ",s.jsxs("button",{type:"button",onClick:U=>{U.preventDefault(),E("/privacy")},className:"text-purple-400 hover:text-purple-300 underline transition-colors",children:["(",W.auth.readPrivacy,")"]})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",id:"acceptAge",checked:h,onChange:U=>g(U.target.checked),className:"mt-1 w-4 h-4 rounded border-purple-500/30 bg-slate-950/50 text-purple-600 focus:ring-purple-500/50 focus:ring-2 cursor-pointer"}),s.jsx("label",{htmlFor:"acceptAge",className:"text-slate-300 text-sm md:text-base cursor-pointer flex-1",children:W.auth.acceptAge||"18 yandan byk olduumu onaylyorum"})]})]}),s.jsx("button",{type:"submit",disabled:f,className:"w-full px-5 md:px-6 py-3 md:py-4 rounded-xl bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300 hover:shadow-xl hover:shadow-pink-500/30 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm md:text-base",children:f?s.jsxs(s.Fragment,{children:[s.jsx(Ne,{className:"animate-spin",size:18}),e?W.auth.creatingAccount:W.auth.signingIn]}):s.jsxs(s.Fragment,{children:[e?s.jsx(si,{size:18}):s.jsx(Tv,{size:18}),e?W.auth.signUp:W.auth.signIn]})})]})]})]})]})}const xm={standard:{id:"733207",checkoutId:"5121ce40-a15d-47c0-bb71-1fd969e08a7b",name:"Standard Plan"},premium:{id:"733209",checkoutId:"366ec035-57f4-4277-b5cb-84cc73b0093f",name:"Premium Plan"}};function Ib(e,t,r){if(!e)throw console.error("Checkout ID is missing! Check your .env file."),new Error("Checkout ID is required");const n=new URL(`https://submirra.lemonsqueezy.com/buy/${e}`);return n.searchParams.set("checkout[email]",t),n.searchParams.set("checkout[custom][user_id]",r),console.log("Generated checkout URL:",n.toString()),n.toString()}function Lb(){const{user:e}=gt(),t=_t(),{t:r,language:n}=tt(),{showToast:i}=rr(),[a,l]=x.useState(null),[o,c]=x.useState(!1),[d,u]=x.useState(null);x.useEffect(()=>{if(!e)return;(async()=>{try{const{data:p,error:b}=await w.from("profiles").select("trial_used").eq("id",e.id).single();!b&&(p!=null&&p.trial_used)&&c(!0);const{data:j,error:S}=await w.from("subscriptions").select("plan_type").eq("user_id",e.id).single();!S&&j&&u(j.plan_type)}catch(p){console.error("Error checking status:",p)}})()},[e]);const m=async f=>{if(!e){t("/signin");return}if(d===f){i(n==="tr"?"Zaten bu plandasnz":"You are already on this plan","info");return}if(d==="premium"&&f==="standard"){i(n==="tr"?"Premium plandan Standard plana geemezsiniz. Ltfen aboneliinizi iptal edip yeni bir abonelik balatn.":"You cannot downgrade from Premium to Standard. Please cancel your subscription and start a new one.","error");return}if((d==="standard"||d==="premium")&&f==="free"){i(n==="tr"?"cretli plandan cretsiz plana gemek iin ayarlar blmnden aboneliinizi iptal edin.":"To downgrade to free plan, please cancel your subscription from settings.","info");return}l(f);try{if(f==="free"){const{error:p}=await w.rpc("update_subscription_plan",{p_user_id:e.id,p_plan_type:f});if(p)throw p;i("Free plan activated successfully! ","success"),setTimeout(()=>window.location.reload(),1500)}else{const p=e.email||"",b=f==="standard"?xm.standard.checkoutId:xm.premium.checkoutId,j=Ib(b,p,e.id);window.location.href=j}}catch(p){console.error("Error updating subscription:",p),i((p==null?void 0:p.message)||"Failed to update subscription. Please try again.","error")}finally{l(null)}};return s.jsxs("div",{className:"min-h-screen relative pt-20 md:pt-24 pb-24 sm:pb-16 px-4 md:px-6",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-40 left-20 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl animate-float"}),s.jsx("div",{className:"absolute bottom-40 right-20 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl animate-pulse-slow",style:{animationDelay:"2s"}})]}),s.jsxs("div",{className:"relative max-w-7xl mx-auto z-10",children:[s.jsxs("div",{className:"text-center mb-10 md:mb-16 animate-fade-in",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",children:r.pricing.title}),s.jsx("p",{className:"text-slate-400 text-base md:text-lg max-w-2xl mx-auto px-2",children:r.pricing.subtitle})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-7xl mx-auto items-start",children:[s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-slate-500/30 rounded-2xl p-5 md:p-6 hover:border-slate-500/50 transition-all duration-500 hover:shadow-xl hover:shadow-slate-500/10 hover:-translate-y-1 animate-fade-in-delay",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(be,{className:"text-slate-400",size:18}),s.jsx("h3",{className:"text-lg md:text-xl font-semibold text-white",children:r.pricing.freePlan.title})]}),s.jsx("div",{className:"mb-3 md:mb-4",children:s.jsx("span",{className:"text-2xl md:text-3xl font-bold text-white",children:r.pricing.freePlan.price})}),s.jsx("p",{className:"text-slate-400 text-sm mb-6",children:r.pricing.freePlan.description}),s.jsxs("ul",{className:"space-y-2 mb-6",children:[s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-slate-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.freePlan.feature1})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-slate-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.freePlan.feature2})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-slate-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.freePlan.feature3})]})]}),s.jsx("button",{onClick:()=>m("free"),disabled:a==="free"||d==="free",className:`w-full px-4 py-2.5 rounded-lg text-sm font-semibold transition-all duration-200 flex items-center justify-center gap-2 ${d==="free"?"bg-slate-700/50 text-slate-400 cursor-not-allowed opacity-50":"bg-slate-700 text-white hover:bg-slate-600"}`,children:a==="free"?s.jsxs(s.Fragment,{children:[s.jsx(Ne,{className:"animate-spin",size:16}),"Processing..."]}):d==="free"?n==="tr"?"Mevcut Plannz":"Current Plan":r.pricing.freePlan.cta})]}),s.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-green-500/30 rounded-2xl p-5 md:p-6 hover:border-green-500/50 transition-all duration-500 hover:shadow-xl hover:shadow-green-500/10 hover:-translate-y-1 animate-fade-in-delay",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(ut,{className:"text-green-400",size:18}),s.jsx("h3",{className:"text-lg md:text-xl font-semibold text-white",children:r.pricing.freeTrial.title})]}),s.jsx("div",{className:"mb-3 md:mb-4",children:s.jsx("span",{className:"text-2xl md:text-3xl font-bold text-white",children:r.pricing.freeTrial.price})}),s.jsx("p",{className:"text-slate-400 text-sm mb-6",children:r.pricing.freeTrial.description}),s.jsxs("ul",{className:"space-y-2 mb-6",children:[s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-green-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.freeTrial.feature1})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-green-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.freeTrial.feature2})]}),r.pricing.freeTrial.feature3&&s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-green-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.freeTrial.feature3})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-green-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.freeTrial.feature4})]})]}),s.jsx("button",{onClick:()=>{if(o){i("You have already used the free trial","info");return}t(e?"/activate-trial":"/signin")},disabled:o,className:`w-full px-4 py-2.5 rounded-lg text-white text-sm font-semibold transition-all duration-200 ${o?"bg-slate-700/50 text-slate-400 cursor-not-allowed":"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500"}`,children:o?r.pricing.freeTrial.alreadyUsed:e?r.pricing.freeTrial.cta:r.pricing.freeTrial.signUp})]})]}),s.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-cyan-500/20 rounded-2xl p-5 md:p-6 hover:border-cyan-500/40 transition-all duration-500 hover:shadow-xl hover:shadow-cyan-500/10 md:hover:-translate-y-2 animate-fade-in-delay-2 flex flex-col min-h-[600px] mt-16",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(be,{className:"text-cyan-400",size:18}),s.jsx("h3",{className:"text-lg md:text-xl font-semibold text-white",children:r.pricing.standard.title})]}),s.jsxs("div",{className:"mb-3 md:mb-4",children:[s.jsx("span",{className:"text-2xl md:text-3xl font-bold text-white",children:r.pricing.standard.price}),s.jsxs("span",{className:"text-slate-400 text-sm",children:["/",r.pricing.standard.period]})]}),s.jsx("p",{className:"text-slate-300 text-sm mb-4",children:r.pricing.standard.description}),s.jsxs("ul",{className:"space-y-3 mb-4 flex-grow",children:[s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-cyan-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.standard.feature1})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-cyan-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.standard.feature2})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-cyan-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.standard.feature3})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-cyan-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.standard.feature4})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-cyan-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.standard.feature5})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-cyan-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.standard.feature6})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-cyan-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.standard.feature7})]})]}),s.jsx("button",{onClick:()=>m("standard"),disabled:a==="standard"||d==="standard"||d==="premium",className:`w-full px-4 py-2.5 rounded-lg text-sm font-semibold transition-all duration-300 flex items-center justify-center gap-2 mt-auto ${d==="standard"||d==="premium"?"bg-gradient-to-r from-cyan-600/50 to-blue-600/50 text-white/50 opacity-50 cursor-not-allowed":"bg-gradient-to-r from-cyan-600 to-blue-600 text-white hover:from-cyan-500 hover:to-blue-500"}`,children:a==="standard"?s.jsxs(s.Fragment,{children:[s.jsx(Ne,{className:"animate-spin",size:16}),n==="tr"?"Ynlendiriliyor...":"Redirecting..."]}):d==="standard"?n==="tr"?"Mevcut Plannz":"Current Plan":d==="premium"?n==="tr"?"Premium Plandasnz":"You have Premium":r.pricing.standard.cta})]}),s.jsxs("div",{className:"bg-gradient-to-br from-pink-500/10 to-purple-500/10 backdrop-blur-sm border-2 border-pink-500/40 rounded-2xl p-5 md:p-6 hover:border-pink-500/60 transition-all duration-500 hover:shadow-2xl hover:shadow-pink-500/20 relative md:hover:-translate-y-3 animate-fade-in-delay-3 flex flex-col min-h-[600px] mt-16",children:[s.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:s.jsx("span",{className:"px-2 md:px-3 py-1 bg-gradient-to-r from-pink-600 to-purple-600 text-white text-xs font-semibold rounded-full whitespace-nowrap",children:r.pricing.premium.badge})}),s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(Sd,{className:"text-pink-400",size:18}),s.jsx("h3",{className:"text-lg md:text-xl font-semibold text-white",children:r.pricing.premium.title})]}),s.jsxs("div",{className:"mb-3 md:mb-4",children:[s.jsx("span",{className:"text-2xl md:text-3xl font-bold text-white",children:r.pricing.premium.price}),s.jsxs("span",{className:"text-slate-400 text-sm",children:["/",r.pricing.premium.period]})]}),s.jsx("p",{className:"text-slate-300 text-sm mb-4",children:r.pricing.premium.description}),s.jsxs("ul",{className:"space-y-3 mb-4 flex-grow",children:[s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-pink-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.premium.feature1})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-pink-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.premium.feature2})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-pink-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.premium.feature3})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-pink-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.premium.feature4})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-pink-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.premium.feature5})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-pink-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.premium.feature6})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-pink-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.premium.feature7})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-pink-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.premium.feature8})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-pink-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.premium.feature9})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[s.jsx(be,{className:"text-pink-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.premium.feature10})]})]}),s.jsx("button",{onClick:()=>m("premium"),disabled:a==="premium"||d==="premium",className:`w-full px-4 py-3 rounded-xl font-semibold transition-all duration-300 flex items-center justify-center gap-2 mt-auto ${d==="premium"?"bg-gradient-to-r from-pink-600/50 to-purple-600/50 text-white/50 opacity-50 cursor-not-allowed":"bg-gradient-to-r from-pink-600 to-purple-600 text-white hover:from-pink-500 hover:to-purple-500"}`,children:a==="premium"?s.jsxs(s.Fragment,{children:[s.jsx(Ne,{className:"animate-spin",size:18}),n==="tr"?"Ynlendiriliyor...":"Redirecting..."]}):d==="premium"?n==="tr"?"Mevcut Plannz":"Current Plan":r.pricing.premium.cta})]}),s.jsxs("div",{className:"bg-gradient-to-br from-yellow-500/20 via-amber-500/15 to-yellow-600/20 backdrop-blur-sm border-2 border-yellow-400/50 rounded-2xl p-5 md:p-6 relative overflow-hidden animate-fade-in-delay-3 hover:border-yellow-400/70 transition-all duration-500 hover:shadow-2xl hover:shadow-yellow-500/30 flex flex-col min-h-[600px] mt-16",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-400/10 to-amber-500/10 animate-pulse"}),s.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-yellow-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),s.jsx("div",{className:"absolute -bottom-10 -left-10 w-32 h-32 bg-amber-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),s.jsxs("div",{className:"relative z-10 flex flex-col flex-grow",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(wn,{className:"text-yellow-400",size:18,fill:"currentColor"}),s.jsx("h3",{className:"text-lg md:text-xl font-semibold text-white",children:r.pricing.ruyagezer.title})]}),s.jsx("div",{className:"mb-3",children:s.jsx("p",{className:"text-yellow-300/80 text-xs font-semibold",children:r.pricing.ruyagezer.badge})}),s.jsx("p",{className:"text-slate-200 text-sm mb-4",children:r.pricing.ruyagezer.description}),s.jsxs("ul",{className:"space-y-3 mb-4 flex-grow",children:[s.jsxs("li",{className:"flex items-start gap-2 text-slate-200 text-sm",children:[s.jsx(be,{className:"text-yellow-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.ruyagezer.feature1})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-200 text-sm",children:[s.jsx(be,{className:"text-yellow-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.ruyagezer.feature2})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-200 text-sm",children:[s.jsx(be,{className:"text-yellow-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.ruyagezer.feature3})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-200 text-sm",children:[s.jsx(be,{className:"text-yellow-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.ruyagezer.feature4})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-200 text-sm",children:[s.jsx(be,{className:"text-yellow-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.ruyagezer.feature5})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-200 text-sm",children:[s.jsx(be,{className:"text-yellow-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.ruyagezer.feature6})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-200 text-sm",children:[s.jsx(be,{className:"text-yellow-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.ruyagezer.feature7})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-200 text-sm",children:[s.jsx(be,{className:"text-yellow-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.ruyagezer.feature8})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-200 text-sm",children:[s.jsx(be,{className:"text-yellow-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.ruyagezer.feature9})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-200 text-sm",children:[s.jsx(be,{className:"text-yellow-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.ruyagezer.feature12})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-200 text-sm",children:[s.jsx(be,{className:"text-yellow-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.ruyagezer.feature10})]}),s.jsxs("li",{className:"flex items-start gap-2 text-slate-200 text-sm",children:[s.jsx(be,{className:"text-yellow-400 flex-shrink-0 mt-1",size:16}),s.jsx("span",{children:r.pricing.ruyagezer.feature11})]})]}),s.jsxs("button",{disabled:!0,className:"w-full px-4 py-3 rounded-xl bg-gradient-to-r from-yellow-600/50 to-amber-600/50 text-white/50 font-semibold transition-all duration-300 opacity-50 cursor-not-allowed flex items-center justify-center gap-2 mt-auto",children:[s.jsx(wt,{size:16}),r.pricing.ruyagezer.badge]})]})]})]}),s.jsxs("div",{className:"mt-16 text-center max-w-3xl mx-auto bg-slate-900/30 backdrop-blur-sm border border-cyan-500/20 rounded-2xl p-8 hover:border-cyan-500/30 transition-all duration-300 hover:shadow-xl hover:shadow-cyan-500/10 animate-fade-in",children:[s.jsx("h3",{className:"text-2xl font-semibold text-white mb-4",children:r.pricing.whySubmirra.title}),s.jsx("p",{className:"text-slate-300 leading-relaxed",children:r.pricing.whySubmirra.description})]})]})]})}function ym(){const{user:e,loading:t}=gt(),r=_t(),n=Ed(),{t:i,language:a}=tt(),{showToast:l}=rr(),[o,c]=x.useState(null),[d,u]=x.useState(null),[m,f]=x.useState(!0),[p,b]=x.useState(!1),[j,S]=x.useState(""),[y,h]=x.useState(""),[g,_]=x.useState(""),[$,A]=x.useState(!1),[M,I]=x.useState(""),[G,K]=x.useState(""),[E,W]=x.useState(""),[P,U]=x.useState(!1),[k,q]=x.useState({public_dreams_count:0,total_likes_received:0,total_comments_received:0,followers_count:0,following_count:0}),[H,O]=x.useState(!0),[L,se]=x.useState(!1),[de,ke]=x.useState(!0),[Ge,Ie]=x.useState([]),[Se,He]=x.useState(!1),[rt,st]=x.useState(!1),[Nt,Xe]=x.useState(!1),[C,X]=x.useState([]),[ae,fe]=x.useState([]),[te,N]=x.useState(!1),[T,R]=x.useState(!1),[le,oe]=x.useState(!1),[ye,ve]=x.useState(!1),[ue,je]=x.useState(!1),[ge,Ae]=x.useState(!1),[xt,Le]=x.useState(!1),[Ze,B]=x.useState(0),[Z,_e]=x.useState("low"),[St,It]=x.useState(!1),[us,Be]=x.useState(!1),pr=x.useRef(null),[gr,Nl]=x.useState(window.location.pathname);x.useEffect(()=>{const z=()=>{Nl(window.location.pathname)};window.addEventListener("popstate",z);const F=new MutationObserver(()=>{window.location.pathname!==gr&&z()}),J=setInterval(()=>{window.location.pathname!==gr&&z()},100);return()=>{window.removeEventListener("popstate",z),F.disconnect(),clearInterval(J)}},[gr]),x.useEffect(()=>{if(!d)return;const z=w.channel("profile-dreams-changes").on("postgres_changes",{event:"DELETE",schema:"public",table:"dreams",filter:`user_id=eq.${d}`},F=>{console.log("Dream deleted:",F),Ie(J=>J.filter(ne=>ne.id!==F.old.id))}).subscribe();return()=>{w.removeChannel(z)}},[d]),x.useEffect(()=>{const z=async()=>{try{const F=window.location.pathname;let J=null;if(F.startsWith("/profile/")&&(J=F.split("/")[2]||null),J){c(null),O(!0),q({public_dreams_count:0,total_likes_received:0,total_comments_received:0,followers_count:0,following_count:0}),Ie([]),se(!1),R(!1),oe(!1),ve(!1),B(0),_e("low"),u(J),ke(e?J===e.id:!1),await Promise.all([Ai(J),Cn(J),Pn(J),...e?[zl(J),Di(J),Rs(J),$s(J)]:[]]);const{data:ne}=await w.from("user_blocks").select("id").eq("blocker_id",J).eq("blocked_id",e==null?void 0:e.id).single();if(ne){l(a==="tr"?"Bu profil size kapal":"This profile is not accessible","error"),r("/");return}sr(J).catch(re=>console.error("Report info load error:",re))}else{if(t){f(!0);return}if(!e){r("/signin"),f(!1);return}u(e.id),ke(!0),O(!0),await Promise.all([Sl(),Li(),Pn(e.id)]),sr(e.id).catch(ne=>console.error("Report info load error:",ne))}}catch(F){console.error("Error loading profile data:",F),l("Failed to load profile data","error")}finally{f(!1)}};f(!0),z(),e&&Tb(e.id).then(It).catch(F=>{console.error("Error checking developer status:",F),It(!1)})},[e,t,n,gr]);const Sl=async()=>{var z;if(e)try{const[F,J]=await Promise.allSettled([w.from("profiles").select("id, full_name, avatar_url, bio, username, created_at, is_developer").eq("id",e.id).single(),w.from("subscriptions").select("plan_type").eq("user_id",e.id).single()]);if(F.status==="rejected"||F.value.error)throw F.status==="rejected"?F.reason:F.value.error;const ne=F.value.data;let re=null;J.status==="fulfilled"&&((z=J.value.data)!=null&&z.plan_type)&&(re=J.value.data.plan_type),c({full_name:ne.full_name||"",email:e.email||"",created_at:ne.created_at||e.created_at||"",avatar_url:ne.avatar_url||null,bio:ne.bio||null,username:ne.username||null,is_developer:ne.is_developer||!1,plan_type:re}),S(ne.full_name||""),h(ne.bio||""),_(ne.username||"")}catch(F){console.error("Error loading profile:",F),l("Failed to load profile","error")}finally{f(!1)}},Ai=async z=>{var F;try{f(!0);let J=w.from("profiles").select("id, full_name, avatar_url, bio, username, created_at, is_developer, is_public");const ne=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(z);ne?J=J.eq("id",z):J=J.eq("username",z);const[re,pe]=await Promise.allSettled([J.single(),ne?w.from("subscriptions").select("plan_type").eq("user_id",z).single():Promise.resolve({data:null,error:null})]);if(re.status==="rejected"||re.value.error)throw re.status==="rejected"?re.reason:re.value.error;const xe=re.value.data;let De=null;pe.status==="fulfilled"&&((F=pe.value.data)!=null&&F.plan_type)&&(De=pe.value.data.plan_type),c({full_name:xe.full_name||"",email:"",created_at:xe.created_at||"",avatar_url:xe.avatar_url||null,bio:xe.bio||null,username:xe.username||null,is_developer:xe.is_developer||!1,plan_type:De}),je(xe.is_public===!1),u(xe.id)}catch(J){console.error("Error loading other user profile:",J),l("Kullanc profili bulunamad","error"),r("/social")}finally{f(!1)}},Cn=async z=>{try{const{data:F,error:J}=await w.from("user_stats").select("*").eq("user_id",z).single();if(!J&&F){const ne={public_dreams_count:F.public_dreams_count||0,total_likes_received:F.total_likes_received||0,total_comments_received:F.total_comments_received||0,followers_count:F.followers_count||0,following_count:F.following_count||0};q(ne),O(!1);try{localStorage.setItem(`profile_stats_${z}`,JSON.stringify(ne))}catch{}}else{const{data:ne}=await w.from("dreams").select("id").eq("user_id",z).eq("is_public",!0),re=(ne||[]).map(Ce=>Ce.id),pe=re.length;let xe=0;if(re.length>0)try{const{data:Ce,error:he}=await w.from("dream_likes").select("id",{count:"exact",head:!0}).in("dream_id",re);if(!he&&Ce!==null)xe=Ce.length||0;else{const{count:at}=await w.from("dream_likes").select("*",{count:"exact",head:!0}).in("dream_id",re);xe=at||0}}catch(Ce){console.error("Error counting likes:",Ce)}let De=0;if(re.length>0)try{const{data:Ce,error:he}=await w.from("dream_comments").select("id",{count:"exact",head:!0}).in("dream_id",re);if(!he&&Ce!==null)De=Ce.length||0;else{const{count:at}=await w.from("dream_comments").select("*",{count:"exact",head:!0}).in("dream_id",re);De=at||0}}catch(Ce){console.error("Error counting comments:",Ce)}const[yt,Re]=await Promise.all([w.from("follows").select("id",{count:"exact",head:!0}).eq("following_id",z),w.from("follows").select("id",{count:"exact",head:!0}).eq("follower_id",z)]);q({public_dreams_count:pe,total_likes_received:xe,total_comments_received:De,followers_count:yt.count||0,following_count:Re.count||0}),O(!1)}}catch(F){console.error("Error loading stats:",F),O(!1)}},Pn=async z=>{try{He(!0);const{data:F,error:J}=await w.from("dreams").select("id, image_url, image_url_2, image_url_3, analysis_type, created_at, status, likes_count, dream_text, dream_text_tr, dream_text_en, analysis_text, analysis_text_tr, analysis_text_en").eq("user_id",z).eq("is_public",!0).eq("status","completed").order("created_at",{ascending:!1}).limit(12);if(J)throw console.error("Error loading dreams:",J),J;if(!F||F.length===0){Ie([]),He(!1);return}const ne=F.map(he=>he.id),[re,pe]=await Promise.allSettled([w.from("dream_likes").select("dream_id").in("dream_id",ne),w.from("dream_comments").select("dream_id").in("dream_id",ne)]);let xe=[],De=[];re.status==="fulfilled"&&!re.value.error&&(xe=re.value.data||[]),pe.status==="fulfilled"&&!pe.value.error&&(De=pe.value.data||[]);const yt=new Map,Re=new Map;xe.forEach(he=>{he&&he.dream_id&&yt.set(he.dream_id,(yt.get(he.dream_id)||0)+1)}),De.forEach(he=>{he&&he.dream_id&&Re.set(he.dream_id,(Re.get(he.dream_id)||0)+1)});const Ce=F.map(he=>{const at=yt.get(he.id)||0,Ye=Re.get(he.id)||0,nt=he.likes_count||0;return{...he,likes_count:Math.max(nt,at),comments_count:Ye,analysis_text:he.analysis_text||""}});Ie(Ce)}catch(F){console.error("Error loading public dreams:",F)}finally{He(!1)}},zl=async z=>{if(e)try{const{data:F}=await w.from("follows").select("id").eq("follower_id",e.id).eq("following_id",z).single();if(F){se(!0),Ae(!1);return}try{const{data:J}=await w.from("follow_requests").select("id").eq("requester_id",e.id).eq("target_id",z).eq("status","pending").maybeSingle();se(!1),Ae(!!J)}catch{se(!1),Ae(!1)}}catch{se(!1),Ae(!1)}},Di=async z=>{if(e)try{const{data:F,error:J}=await w.from("user_blocks").select("id").eq("blocker_id",e.id).eq("blocked_id",z).single();J&&J.code!=="PGRST116"&&console.error("Error checking block status:",J),R(!!F);const{data:ne,error:re}=await w.from("user_blocks").select("id").eq("blocker_id",z).eq("blocked_id",e.id).single();re&&re.code!=="PGRST116"&&console.error("Error checking blocked by status:",re),oe(!!ne)}catch(F){console.error("Error checking block status:",F)}},Rs=async z=>{if(e)try{const{data:F,error:J}=await w.from("user_favorites").select("id").eq("user_id",e.id).eq("favorite_user_id",z).single();J&&J.code!=="PGRST116"&&console.error("Error checking favorite status:",J),ve(!!F)}catch(F){console.error("Error checking favorite status:",F)}},$s=async z=>{if(e)try{const{data:F,error:J}=await w.from("user_reports").select("id").eq("reporter_id",e.id).eq("reported_user_id",z).single();J&&J.code!=="PGRST116"&&console.error("Error checking report status:",J),Be(!!F)}catch(F){console.error("Error checking report status:",F)}},El=async()=>{if(!(!e||!d)&&confirm(a==="tr"?"ikayetinizi geri ekmek istediinizden emin misiniz?":"Are you sure you want to withdraw your report?"))try{const{data:z,error:F}=await w.from("user_reports").select("id").eq("reporter_id",e.id).eq("reported_user_id",d).single();if(F||!z){console.error("Report not found:",F),l(a==="tr"?"ikayet bulunamad":"Report not found","error"),Be(!1);return}const{error:J}=await w.from("user_reports").delete().eq("id",z.id);if(J)throw console.error("Delete error:",J),J;const{data:ne}=await w.from("user_reports").select("id").eq("reporter_id",e.id).eq("reported_user_id",d).single();if(ne){console.error("Report still exists after deletion"),l(a==="tr"?"ikayet silinemedi, ltfen tekrar deneyin":"Could not delete report, please try again","error");return}Be(!1),Le(!1);const re=Math.max(0,Ze-1);B(re),re<5?_e("low"):re>=5&&re<10?_e("medium"):re>=10&&re<20?_e("high"):_e("critical"),l(a==="tr"?"ikayetiniz geri ekildi":"Report withdrawn","success")}catch(z){console.error("Error withdrawing report:",z),l(a==="tr"?"ikayet geri ekilemedi":"Failed to withdraw report","error")}},Ri=async()=>{if(!(!e||!d)&&confirm(a==="tr"?"Bu kullancy engellemek istediinizden emin misiniz?":"Are you sure you want to block this user?"))try{const{error:z}=await w.from("user_blocks").insert({blocker_id:e.id,blocked_id:d});if(z)throw z;await w.from("follows").delete().eq("follower_id",e.id).eq("following_id",d),await w.from("follows").delete().eq("follower_id",d).eq("following_id",e.id),R(!0),se(!1),Le(!1),k&&q({...k,followers_count:Math.max(0,k.followers_count-1)}),l(a==="tr"?"Kullanc engellendi ve takip kaldrld":"User blocked and unfollowed","success")}catch(z){console.error("Error blocking user:",z),l(a==="tr"?"Kullanc engellenemedi":"Failed to block user","error")}},Cl=async()=>{if(!(!e||!d))try{const{error:z}=await w.from("user_blocks").delete().eq("blocker_id",e.id).eq("blocked_id",d);if(z)throw z;R(!1),Le(!1),l(a==="tr"?"Kullancnn engeli kaldrld":"User unblocked","success")}catch(z){console.error("Error unblocking user:",z),l(a==="tr"?"Engel kaldrlamad":"Failed to unblock","error")}},$i=async()=>{if(!e||!d){console.log("Missing user or profileUserId:",{user:!!e,profileUserId:d});return}console.log("Toggling favorite for:",d,"Current status:",ye);try{if(ye){console.log("Removing from favorites...");const{error:z}=await w.from("user_favorites").delete().eq("user_id",e.id).eq("favorite_user_id",d);if(z)throw console.error("Error removing favorite:",z),z;ve(!1),l(a==="tr"?"Favori arkadalardan karld":"Removed from favorites","success"),console.log("Successfully removed from favorites")}else{console.log("Adding to favorites...");const{data:z,error:F}=await w.from("user_favorites").insert({user_id:e.id,favorite_user_id:d}).select();if(F)throw console.error("Error adding favorite:",F),F;console.log("Successfully added to favorites:",z),ve(!0),l(a==="tr"?"Favori arkadalara eklendi":"Added to favorites","success")}Le(!1)}catch(z){console.error("Error toggling favorite:",z),l(a==="tr"?`lem baarsz: ${z instanceof Error?z.message:"Bilinmeyen hata"}`:`Operation failed: ${z instanceof Error?z.message:"Unknown error"}`,"error")}},Ii=async()=>{var F,J,ne,re;if(!e||!d)return;const z=prompt(a==="tr"?"ikayet sebebinizi yazn (istee bal):":"Enter report reason (optional):");if(z!==null&&confirm(a==="tr"?"Bu kullancy ikayet etmek istediinizden emin misiniz?":"Are you sure you want to report this user?"))try{console.log("Reporting user:",d);const{data:pe}=await w.from("user_reports").select("id").eq("reporter_id",e.id).eq("reported_user_id",d).single();if(pe){l(a==="tr"?"Bu kullancy zaten ikayet etmisiniz":"You have already reported this user","error"),Le(!1);return}const{error:xe}=await w.from("user_reports").insert({reporter_id:e.id,reported_user_id:d,reason:z||null});if(xe)throw xe;const{data:De,error:yt}=await w.from("user_reports").select("id").eq("reported_user_id",d);if(yt)throw yt;const Re=(De==null?void 0:De.length)||0;console.log("Total reports for user:",Re);try{const[he,at]=await Promise.all([w.from("profiles").select("username, full_name").eq("id",d).single(),w.from("profiles").select("username, full_name").eq("id",e.id).single()]),Ye=((F=he.data)==null?void 0:F.username)||((J=he.data)==null?void 0:J.full_name)||"Unknown",nt=((ne=at.data)==null?void 0:ne.username)||((re=at.data)==null?void 0:re.full_name)||"Unknown";(await fetch("https://api.emailjs.com/api/v1.0/email/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service_id:"service_6btsv5d",template_id:"template_x7aji5u",user_id:"AdvA9XekMYHYYOhcF",template_params:{name:"Submirra Report System",email:"report@submirra.com",time:new Date().toLocaleString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),message:` YEN KAYET BLDRM

 ikayet Edilen: ${Ye}
 ikayet Eden: ${nt}
 Toplam ikayet Says: ${Re}
 ikayet Sebebi: ${z||"Belirtilmedi"}

 Risk Seviyesi: ${Re<5?"Dk":Re<10?"Orta":Re<20?"Yksek":"Kritik"}

 Profil: https://submirra.com/profile/${d}`}})})).ok?console.log("Report notification email sent successfully"):console.error("Failed to send report notification email")}catch(he){console.error("Error sending report email:",he)}if(Re>=20){const{error:he}=await w.from("profiles").update({is_suspended:!0,suspended_at:new Date().toISOString(),suspension_reason:"ok sayda ikayet nedeniyle otomatik askya alnd"}).eq("id",d);he?console.error("Error suspending user:",he):console.log("User suspended due to reports")}Le(!1),Be(!0);const Ce=Ze+1;B(Ce),Ce<5?_e("low"):Ce>=5&&Ce<10?_e("medium"):Ce>=10&&Ce<20?_e("high"):_e("critical"),l("ikayet gnderildi","success")}catch(pe){console.error("Error reporting user:",pe),l("ikayet gnderilemedi","error")}},sr=async z=>{try{const{data:F,error:J}=await w.from("user_reports").select("id").eq("reported_user_id",z);if(J)throw J;const ne=(F==null?void 0:F.length)||0;B(ne),ne<5?_e("low"):ne>=5&&ne<10?_e("medium"):ne>=10&&ne<20?_e("high"):_e("critical")}catch(F){console.error("Error loading report info:",F),B(0),_e("low")}},Li=async()=>{if(e)try{const{data:z,error:F}=await w.from("user_stats").select("*").eq("user_id",e.id).single();if(!F&&z){const J={public_dreams_count:z.public_dreams_count||0,total_likes_received:z.total_likes_received||0,total_comments_received:z.total_comments_received||0,followers_count:z.followers_count||0,following_count:z.following_count||0};q(J),O(!1);try{localStorage.setItem(`profile_stats_${e.id}`,JSON.stringify(J))}catch{}}else{const{data:J}=await w.from("dreams").select("id").eq("user_id",e.id).eq("is_public",!0),ne=(J||[]).map(Re=>Re.id),re=ne.length;let pe=0;if(ne.length>0)try{const{data:Re,error:Ce}=await w.from("dream_likes").select("id",{count:"exact",head:!0}).in("dream_id",ne);if(!Ce&&Re!==null)pe=Re.length||0;else{const{count:he}=await w.from("dream_likes").select("*",{count:"exact",head:!0}).in("dream_id",ne);pe=he||0}}catch(Re){console.error("Error counting likes:",Re)}let xe=0;if(ne.length>0)try{const{data:Re,error:Ce}=await w.from("dream_comments").select("id",{count:"exact",head:!0}).in("dream_id",ne);if(!Ce&&Re!==null)xe=Re.length||0;else{const{count:he}=await w.from("dream_comments").select("*",{count:"exact",head:!0}).in("dream_id",ne);xe=he||0}}catch(Re){console.error("Error counting comments:",Re)}const[De,yt]=await Promise.all([w.from("follows").select("id",{count:"exact",head:!0}).eq("following_id",e.id),w.from("follows").select("id",{count:"exact",head:!0}).eq("follower_id",e.id)]);console.log(`Stats for user ${e.id}:`,{public_dreams_count:re,total_likes_received:pe,total_comments_received:xe,followers_count:De.count||0,following_count:yt.count||0}),q({public_dreams_count:re,total_likes_received:pe,total_comments_received:xe,followers_count:De.count||0,following_count:yt.count||0}),O(!1)}}catch(z){console.error("Error loading stats:",z),O(!1)}},v=async()=>{var z;if(!e){l("You must be logged in to save","error");return}if(!j.trim()){l("Name cannot be empty","error");return}if(g.trim()){if(g.length<3){l("Username must be at least 3 characters","error");return}if(!/^[a-zA-Z0-9_]+$/.test(g)){l("Username can only contain letters, numbers, and underscores","error");return}}try{const F={full_name:j.trim(),updated_at:new Date().toISOString()};if(y!==void 0&&(F.bio=y.trim()||null),g.trim()&&g.toLowerCase()!==((z=o==null?void 0:o.username)==null?void 0:z.toLowerCase())){const{data:ne,error:re}=await w.from("profiles").select("id").ilike("username",g).neq("id",e.id).single();if(re&&re.code!=="PGRST116")throw console.error("Error checking username:",re),re;if(ne){l("This username is already taken","error");return}F.username=g.trim()}const{error:J}=await w.from("profiles").update(F).eq("id",e.id);if(J)throw console.error("Update error:",J),J;c(ne=>ne?{...ne,full_name:j.trim(),bio:y.trim()||null,username:g.trim()||(ne==null?void 0:ne.username)||null}:null),b(!1),_(""),A(!1),I(""),K(""),W(""),l(i.profile.profileSaved,"success")}catch(F){console.error("Error updating profile:",F),l(i.profile.profileSaveFailed,"error")}},D=async()=>{if(!e){l("You must be logged in to change password","error");return}if(!M||!G||!E){l("Please fill in all password fields","error");return}if(G.length<6){l("New password must be at least 6 characters","error");return}if(G!==E){l("New passwords do not match","error");return}try{const{error:z}=await w.auth.signInWithPassword({email:e.email||"",password:M});if(z){l("Current password is incorrect","error");return}const{error:F}=await w.auth.updateUser({password:G});if(F)throw console.error("Password update error:",F),F;I(""),K(""),W(""),A(!1),l("Password changed successfully","success")}catch(z){console.error("Error changing password:",z),l((z==null?void 0:z.message)||"Failed to change password","error")}},V=()=>{S((o==null?void 0:o.full_name)||""),h((o==null?void 0:o.bio)||""),_((o==null?void 0:o.username)||""),b(!1),A(!1),I(""),K(""),W("")},ee=async()=>{if(d){N(!0);try{const{data:z,error:F}=await w.from("follows").select("follower_id").eq("following_id",d);if(F)throw F;if(!z||z.length===0){X([]),st(!0);return}const J=z.map(pe=>pe.follower_id),{data:ne,error:re}=await w.from("profiles").select("id, full_name, username, avatar_url").in("id",J);if(re)throw re;X(ne||[]),st(!0)}catch(z){console.error("Error loading followers:",z),l("Failed to load followers","error")}finally{N(!1)}}},Y=async()=>{if(d){N(!0);try{const{data:z,error:F}=await w.from("follows").select("following_id").eq("follower_id",d);if(F)throw F;if(!z||z.length===0){fe([]),Xe(!0);return}const J=z.map(pe=>pe.following_id),{data:ne,error:re}=await w.from("profiles").select("id, full_name, username, avatar_url").in("id",J);if(re)throw re;fe(ne||[]),Xe(!0)}catch(z){console.error("Error loading following:",z),l("Failed to load following","error")}finally{N(!1)}}},me=async(z,F)=>{if(e&&confirm(a==="tr"?`${F} takipilerinizden karlsn m?`:`Remove ${F} from your followers?`))try{const{error:J}=await w.from("follows").delete().eq("follower_id",z).eq("following_id",e.id);if(J)throw J;X(ne=>ne.filter(re=>re.id!==z)),k&&q({...k,followers_count:Math.max(0,k.followers_count-1)}),l(a==="tr"?"Takipi karld":"Follower removed","success")}catch(J){console.error("Error removing follower:",J),l(a==="tr"?"Bir hata olutu":"An error occurred","error")}},Pe=async()=>{if(!e){r("/signin");return}if(d)try{if(L){const{error:z}=await w.from("follows").delete().eq("follower_id",e.id).eq("following_id",d);if(z)throw z;se(!1),k&&q({...k,followers_count:Math.max(0,k.followers_count-1)}),l(i.profile.unfollowSuccess,"info")}else if(ge){const{error:z}=await w.from("follow_requests").delete().eq("requester_id",e.id).eq("target_id",d);if(z)throw z;Ae(!1),l(a==="tr"?"Takip istei iptal edildi":"Follow request cancelled","info")}else{const{data:z}=await w.from("profiles").select("is_public").eq("id",d).single();if((z==null?void 0:z.is_public)===!1){const{data:J,error:ne}=await w.from("follow_requests").upsert({requester_id:e.id,target_id:d,status:"pending"},{onConflict:"requester_id,target_id"}).select();if(ne)throw console.error("Follow request error details:",ne),console.error("Error message:",ne.message),console.error("Error code:",ne.code),ne;console.log("Follow request created/updated:",J),Ae(!0),l(a==="tr"?"Takip istei gnderildi":"Follow request sent","success")}else{const{error:J}=await w.from("follows").insert({follower_id:e.id,following_id:d});if(J)throw J;se(!0),k&&q({...k,followers_count:k.followers_count+1}),l(i.profile.followSuccess,"success")}}}catch(z){console.error("Error toggling follow:",z),l(i.profile.followFailed,"error")}},mt=async z=>{var J,ne,re,pe;const F=(J=z.target.files)==null?void 0:J[0];if(!(!F||!e)){if(!F.type.startsWith("image/")){l("Please select an image file","error");return}if(F.size>5*1024*1024){l("Image size must be less than 5MB","error");return}try{if(U(!0),console.log("Skipping bucket check, proceeding with upload..."),o!=null&&o.avatar_url)try{let Ye="";if(o.avatar_url.includes("/avatars/")){const nt=o.avatar_url.split("/avatars/");Ye=nt[nt.length-1].split("?")[0]}else{const nt=o.avatar_url.split("/");Ye=nt[nt.length-1].split("?")[0]}if(Ye&&Ye.includes(".")){console.log("Attempting to delete old avatar:",Ye);const{error:nt}=await w.storage.from("avatars").remove([Ye]);nt?console.log("Could not delete old avatar (may not exist):",nt):console.log("Old avatar deleted successfully")}}catch(Ye){console.log("Could not delete old avatar:",Ye)}const xe=((ne=F.name.split(".").pop())==null?void 0:ne.toLowerCase())||"jpg",De=`${e.id}-${Date.now()}.${xe}`,yt=De;console.log("Uploading avatar:",{fileName:De,fileSize:F.size,fileType:F.type});const{data:Re,error:Ce}=await w.storage.from("avatars").upload(yt,F,{cacheControl:"3600",upsert:!0,contentType:F.type});if(Ce)throw console.error("Upload error:",Ce),(re=Ce.message)!=null&&re.includes("new row violates row-level security")?new Error("Permission denied. Please check RLS policies for avatars bucket. Make sure you ran the storage migration."):(pe=Ce.message)!=null&&pe.includes("Bucket not found")?new Error('Avatars bucket not found. Please create "avatars" bucket in Supabase Storage and make it public.'):new Error(Ce.message||"Failed to upload avatar. Error: "+JSON.stringify(Ce));console.log("Upload successful:",Re);const{data:{publicUrl:he}}=w.storage.from("avatars").getPublicUrl(yt);if(console.log("Public URL:",he),!he)throw new Error("Failed to get public URL for avatar");const{error:at}=await w.from("profiles").update({avatar_url:he}).eq("id",e.id);if(at)throw console.error("Update error details:",at),new Error(at.message||"Failed to update profile with new avatar");if(console.log("Profile updated successfully"),de){const{data:Ye,error:nt}=await w.from("profiles").select("*").eq("id",e.id).single();nt&&console.error("Error fetching updated profile:",nt),c(Ye||(Pl=>Pl?{...Pl,avatar_url:he}:null))}else c(Ye=>Ye?{...Ye,avatar_url:he}:null);l(i.profile.avatarUploaded,"success")}catch(xe){console.error("Error uploading avatar:",xe);const De=(xe==null?void 0:xe.message)||i.profile.avatarUploadFailed;l(De,"error"),console.error("Full error details:",{message:xe==null?void 0:xe.message,error:xe,user:e==null?void 0:e.id,file:F==null?void 0:F.name})}finally{U(!1),pr.current&&(pr.current.value="")}}};if(!(!de&&!e)){if(de&&!e)return null}return m?s.jsx("div",{className:"min-h-screen relative pt-24 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-400"})}):T&&!de?s.jsxs("div",{className:"min-h-screen relative pt-24 pb-24 sm:pb-16 px-4 md:px-6",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-40 right-10 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-40 left-10 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"})]}),s.jsx("div",{className:"relative max-w-4xl mx-auto z-10",children:s.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-8 text-center",children:[s.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-red-500/20 border border-red-500/30 flex items-center justify-center",children:s.jsx(Je,{className:"text-red-400",size:40})}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:a==="tr"?"Engellediiniz Kullanc":"Blocked User"}),s.jsx("p",{className:"text-slate-400 mb-6",children:a==="tr"?"Bu kullancy engellemisiniz. Profilini grntleyemezsiniz.":"You have blocked this user. You cannot view their profile."}),s.jsxs("div",{className:"flex gap-4 justify-center",children:[s.jsx("button",{onClick:()=>r("/social"),className:"px-6 py-3 rounded-lg bg-slate-800 text-white hover:bg-slate-700 transition-colors",children:a==="tr"?"Geri Dn":"Go Back"}),s.jsx("button",{onClick:async()=>{if(!(!e||!d))try{const{error:z}=await w.from("user_blocks").delete().eq("blocker_id",e.id).eq("blocked_id",d);if(z)throw z;R(!1),l(a==="tr"?"Kullancnn engeli kaldrld":"User unblocked","success"),window.location.reload()}catch(z){console.error("Error unblocking user:",z),l(a==="tr"?"Engel kaldrlamad":"Failed to unblock","error")}},className:"px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white hover:from-pink-500 hover:to-purple-500 transition-all",children:a==="tr"?"Engeli Kaldr":"Unblock"})]})]})})]}):s.jsxs("div",{className:"min-h-screen relative pt-24 pb-24 sm:pb-16 px-4 md:px-6",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-40 left-10 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-40 right-10 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"})]}),s.jsxs("div",{className:"relative max-w-4xl mx-auto z-10",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight",children:i.profile.title}),s.jsx("p",{className:"text-slate-400 text-lg",children:de?i.profile.manageAccount:i.profile.userProfile})]}),s.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-4 sm:p-8 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute top-4 right-4 z-10",children:[s.jsx("button",{onClick:()=>Le(!xt),className:"flex items-center justify-center w-8 h-8 rounded-full bg-slate-800/80 text-slate-400 hover:text-white hover:bg-slate-700 transition-all duration-200",children:s.jsx(jc,{size:16})}),xt&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>Le(!1)}),s.jsxs("div",{className:"absolute right-0 top-10 w-48 bg-slate-900 border border-purple-500/30 rounded-lg shadow-2xl z-50 overflow-hidden",onClick:z=>z.stopPropagation(),children:[!de&&e&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:$i,className:"w-full px-3 py-2.5 text-left hover:bg-slate-950/50 transition-colors flex items-center gap-2 text-white text-sm",children:ye?s.jsxs(s.Fragment,{children:[s.jsx(qv,{size:16,className:"text-yellow-400"}),s.jsx("span",{children:a==="tr"?"Favorilerden kar":"Remove from Favorites"})]}):s.jsxs(s.Fragment,{children:[s.jsx(wn,{size:16,className:"text-yellow-400"}),s.jsx("span",{children:a==="tr"?"Favorilere Ekle":"Add to Favorites"})]})}),T?s.jsxs("button",{onClick:Cl,className:"w-full px-3 py-2.5 text-left hover:bg-slate-950/50 transition-colors flex items-center gap-2 text-green-400 text-sm",children:[s.jsx(vc,{size:16}),s.jsx("span",{children:a==="tr"?"Engeli Kaldr":"Unblock"})]}):s.jsxs("button",{onClick:Ri,className:"w-full px-3 py-2.5 text-left hover:bg-slate-950/50 transition-colors flex items-center gap-2 text-red-400 text-sm",children:[s.jsx(vc,{size:16}),s.jsx("span",{children:a==="tr"?"Kullancy Engelle":"Block User"})]}),us?s.jsxs("button",{onClick:El,className:"w-full px-3 py-2.5 text-left hover:bg-slate-950/50 transition-colors flex items-center gap-2 text-green-400 text-sm border-t border-slate-700/50",children:[s.jsx(mo,{size:16}),s.jsx("span",{children:a==="tr"?"ikayeti Geri ek":"Withdraw Report"})]}):s.jsxs("button",{onClick:Ii,className:"w-full px-3 py-2.5 text-left hover:bg-slate-950/50 transition-colors flex items-center gap-2 text-orange-400 text-sm border-t border-slate-700/50",children:[s.jsx(mo,{size:16}),s.jsx("span",{children:a==="tr"?"ikayet Et":"Report User"})]})]}),d&&s.jsx("div",{className:"px-3 py-2 border-t border-slate-700/50",children:s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(mo,{className:Z==="low"?"text-green-400":Z==="medium"?"text-yellow-400":Z==="high"?"text-orange-400":"text-red-400",size:12}),s.jsx("span",{className:"text-xs text-slate-400",children:i.profile.reportCount})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-semibold text-white",children:Ze}),s.jsx("div",{className:"px-2 py-0.5 rounded-full text-[10px] font-semibold flex items-center justify-center",style:{backgroundColor:Z==="low"?"rgba(34, 197, 94, 0.2)":Z==="medium"?"rgba(234, 179, 8, 0.2)":Z==="high"?"rgba(249, 115, 22, 0.2)":"rgba(239, 68, 68, 0.2)",color:Z==="low"?"rgb(34, 197, 94)":Z==="medium"?"rgb(234, 179, 8)":Z==="high"?"rgb(249, 115, 22)":"rgb(239, 68, 68)",textAlign:"center",minHeight:"20px",lineHeight:"1.2"},children:Z==="low"?i.profile.dangerLow:Z==="medium"?i.profile.dangerMedium:Z==="high"?i.profile.dangerHigh:i.profile.dangerCritical})]})]})})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:`flex flex-col sm:flex-row items-center sm:items-start gap-6 pb-6 ${de||!ue||L?"border-b border-purple-500/20":""}`,children:[s.jsxs("div",{className:"relative group flex-shrink-0",children:[de?s.jsxs("button",{onClick:()=>{var z;return(z=pr.current)==null?void 0:z.click()},disabled:P,className:"relative w-32 h-32 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border-2 border-pink-500/40 flex items-center justify-center overflow-hidden cursor-pointer disabled:cursor-not-allowed transition-all hover:border-pink-500/60 hover:scale-105 shadow-lg",children:[o!=null&&o.avatar_url?s.jsx("img",{src:o.avatar_url,alt:"Profile",className:"w-full h-full object-cover rounded-full"}):s.jsx(Je,{className:"text-pink-400",size:40}),s.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity rounded-full flex items-center justify-center",children:P?s.jsx(Ne,{className:"animate-spin text-white",size:24}):s.jsx(Wv,{className:"text-white",size:24})})]}):s.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border-2 border-pink-500/40 flex items-center justify-center overflow-hidden shadow-lg",children:o!=null&&o.avatar_url?s.jsx("img",{src:o.avatar_url,alt:"Profile",className:"w-full h-full object-cover rounded-full"}):s.jsx(Je,{className:"text-pink-400",size:40})}),de&&s.jsx("input",{ref:pr,type:"file",accept:"image/*",onChange:mt,className:"hidden"})]}),s.jsxs("div",{className:"flex-1 w-full sm:pr-0",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 flex-wrap",children:[s.jsx("h2",{className:"text-2xl font-semibold text-white w-full sm:w-auto",children:p?s.jsx("input",{type:"text",value:j,onChange:z=>S(z.target.value),className:"w-full bg-slate-950/50 border border-purple-500/30 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500/60",autoFocus:!0}):(o==null?void 0:o.full_name)||(o==null?void 0:o.username)||"User"}),!p&&(o==null?void 0:o.username)&&s.jsxs("span",{className:"text-slate-500 text-sm",children:["@",o.username]}),!p&&(o==null?void 0:o.is_developer)&&s.jsxs("span",{className:"px-2.5 py-1 bg-gradient-to-r from-red-500/20 to-red-600/20 border border-red-500/40 rounded-lg text-red-400 text-xs font-semibold flex items-center gap-1.5",children:[s.jsx(ut,{size:12}),i.profile.developer]}),!p&&(o==null?void 0:o.plan_type)&&s.jsxs("span",{className:`px-2.5 py-1 rounded-lg text-xs font-semibold flex items-center gap-1.5 ${o.plan_type==="premium"?"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border border-yellow-500/40 text-yellow-400":o.plan_type==="trial"?"bg-gradient-to-r from-green-500/20 to-emerald-500/20 border border-green-500/40 text-green-400":o.plan_type==="free"?"bg-gradient-to-r from-slate-500/20 to-slate-600/20 border border-slate-500/40 text-slate-300":"bg-gradient-to-r from-blue-500/20 to-cyan-500/20 border border-blue-500/40 text-blue-400"}`,children:[s.jsx(Sd,{size:12}),o.plan_type==="premium"?"Premium":o.plan_type==="trial"?"Free Trial":o.plan_type==="free"?"Free Plan":"Standard"]})]}),p?s.jsx("textarea",{value:y,onChange:z=>h(z.target.value),placeholder:i.profile.bioPlaceholder,className:"w-full mt-2 bg-slate-950/50 border border-purple-500/30 rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 resize-none",rows:3}):(o==null?void 0:o.bio)&&s.jsx("p",{className:"text-slate-300 mb-2",children:o.bio})]})]}),k&&(de||!ue||L)&&s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6 pb-6 border-b border-purple-500/20",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-1",children:s.jsx(_r,{className:"text-purple-400",size:18})}),s.jsx("p",{className:"text-2xl font-bold text-white",children:H?"-":k.public_dreams_count}),s.jsx("p",{className:"text-slate-400 text-xs",children:i.profile.publicDreams})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-1",children:s.jsx(dr,{className:"text-pink-400",size:18})}),s.jsx("p",{className:"text-2xl font-bold text-white",children:H?"-":k.total_likes_received}),s.jsx("p",{className:"text-slate-400 text-xs",children:i.profile.likesReceived})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-1",children:s.jsx(wr,{className:"text-cyan-400",size:18})}),s.jsx("p",{className:"text-2xl font-bold text-white",children:H?"-":k.total_comments_received}),s.jsx("p",{className:"text-slate-400 text-xs",children:i.profile.comments})]}),s.jsxs("button",{onClick:ee,className:"text-center hover:bg-slate-950/30 rounded-lg transition-colors",children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-1",children:s.jsx(Ps,{className:"text-purple-400",size:18})}),s.jsx("p",{className:"text-2xl font-bold text-white",children:H?"-":k.followers_count}),s.jsx("p",{className:"text-slate-400 text-xs",children:i.profile.followers})]}),s.jsxs("button",{onClick:Y,className:"text-center hover:bg-slate-950/30 rounded-lg transition-colors",children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-1",children:s.jsx(Je,{className:"text-pink-400",size:18})}),s.jsx("p",{className:"text-2xl font-bold text-white",children:H?"-":k.following_count}),s.jsx("p",{className:"text-slate-400 text-xs",children:i.profile.following})]})]}),de&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-950/30 rounded-lg",children:[s.jsx(nn,{className:"text-purple-400",size:20}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-slate-400 text-sm",children:i.profile.email}),s.jsx("p",{className:"text-white",children:o==null?void 0:o.email})]})]}),s.jsx("div",{className:"p-4 bg-slate-950/30 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[s.jsx(im,{className:"text-cyan-400",size:20}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-slate-400 text-sm mb-2",children:"Username"}),p?s.jsx("input",{type:"text",value:g,onChange:z=>_(z.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")),placeholder:"username",className:"w-full bg-slate-900/50 border border-purple-500/30 rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60",maxLength:30}):s.jsxs("p",{className:"text-white",children:["@",(o==null?void 0:o.username)||"No username"]})]})]})}),de&&p&&s.jsxs("div",{className:"p-4 bg-slate-950/30 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Je,{className:"text-pink-400",size:20}),s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-400 text-sm",children:"Password"}),s.jsx("p",{className:"text-white text-sm",children:""})]})]}),$?s.jsx("button",{onClick:()=>{A(!1),I(""),K(""),W("")},className:"px-4 py-2 text-sm bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-lg text-slate-300 transition-all",children:"Cancel"}):s.jsx("button",{onClick:()=>A(!0),className:"px-4 py-2 text-sm bg-purple-500/20 hover:bg-purple-500/30 border border-purple-500/40 rounded-lg text-purple-400 transition-all",children:"Change Password"})]}),$&&s.jsxs("div",{className:"space-y-3 mt-4",children:[s.jsx("input",{type:"password",value:M,onChange:z=>I(z.target.value),placeholder:"Current password",className:"w-full bg-slate-900/50 border border-purple-500/30 rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60"}),s.jsx("input",{type:"password",value:G,onChange:z=>K(z.target.value),placeholder:"New password (min 6 characters)",className:"w-full bg-slate-900/50 border border-purple-500/30 rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60"}),s.jsx("input",{type:"password",value:E,onChange:z=>W(z.target.value),placeholder:"Confirm new password",className:"w-full bg-slate-900/50 border border-purple-500/30 rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60"}),s.jsx("button",{onClick:D,className:"w-full px-4 py-2 bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold rounded-lg hover:from-pink-500 hover:to-purple-500 transition-all",children:"Update Password"})]})]}),s.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-950/30 rounded-lg",children:[s.jsx(ya,{className:"text-pink-400",size:20}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-slate-400 text-sm",children:i.profile.memberSince}),s.jsx("p",{className:"text-white",children:o!=null&&o.created_at?new Date(o.created_at).toLocaleDateString(a==="tr"?"tr-TR":"en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]})]}),s.jsx("div",{className:"flex gap-4 pt-6 border-t border-purple-500/20",children:p?s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300",children:[s.jsx(Mv,{size:18}),i.profile.saveChanges]}),s.jsxs("button",{onClick:V,className:"flex items-center gap-2 px-6 py-3 rounded-lg bg-slate-800 text-slate-300 font-semibold hover:bg-slate-700 transition-all duration-300",children:[s.jsx(pt,{size:18}),i.profile.cancel]})]}):s.jsx(s.Fragment,{children:de?s.jsxs("button",{onClick:()=>{S((o==null?void 0:o.full_name)||""),h((o==null?void 0:o.bio)||""),_((o==null?void 0:o.username)||""),b(!0)},className:"flex items-center gap-2 px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600/20 to-purple-600/20 border border-pink-500/30 text-pink-300 hover:border-pink-400/50 hover:text-pink-200 transition-all duration-300",children:[s.jsx(Lv,{size:18}),i.profile.editProfile]}):s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:Pe,className:`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all duration-300 ${L?"bg-slate-800 text-slate-300 hover:bg-slate-700 border border-slate-700":ge?"bg-yellow-600/20 text-yellow-300 hover:bg-yellow-600/30 border border-yellow-500/30":"bg-gradient-to-r from-pink-600 to-purple-600 text-white hover:from-pink-500 hover:to-purple-500"}`,children:L?s.jsxs(s.Fragment,{children:[s.jsx(Vv,{size:18}),i.profile.followingButton]}):ge?s.jsxs(s.Fragment,{children:[s.jsx(Ne,{size:18}),a==="tr"?"stek Gnderildi":"Requested"]}):s.jsxs(s.Fragment,{children:[s.jsx(si,{size:18}),i.profile.follow]})}),s.jsxs("button",{onClick:()=>r(`/messages?user=${d}`),className:"flex items-center gap-2 px-6 py-3 rounded-lg bg-slate-800 text-white hover:bg-slate-700 border border-slate-700 transition-all duration-300",children:[s.jsx(wr,{size:18}),i.profile.message]})]})})})]})]}),!de&&s.jsxs("div",{className:"mt-12",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6 pb-4 border-b border-purple-500/20",children:[s.jsx(im,{className:"text-purple-400",size:20}),s.jsx("h2",{className:"text-2xl font-semibold text-white",children:i.profile.publicDreamsTitle})]}),ue&&!L?s.jsxs("div",{className:"text-center py-12 bg-slate-900/30 rounded-xl border border-purple-500/20",children:[s.jsx(wt,{className:"mx-auto mb-4 text-slate-500",size:48}),s.jsx("p",{className:"text-slate-400 font-medium",children:a==="tr"?"Bu profil gizlidir":"This profile is private"}),s.jsx("p",{className:"text-slate-500 text-sm mt-2",children:a==="tr"?"Bu kullancy takip ederek ieriklerini grebilirsiniz":"Follow this user to see their content"})]}):Se?s.jsx("div",{className:"flex justify-center py-12",children:s.jsx(Ne,{className:"animate-spin text-purple-400",size:32})}):Ge.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(_r,{className:"mx-auto mb-4 text-slate-600",size:48}),s.jsx("p",{className:"text-slate-400",children:i.profile.noPublicDreams})]}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:Ge.map(z=>s.jsxs("div",{onClick:()=>r(`/social?dream=${z.id}`),className:"group relative aspect-square bg-slate-900/50 border border-purple-500/20 rounded-xl overflow-hidden cursor-pointer hover:border-purple-500/40 transition-all",children:[z.analysis_type==="basic"||z.analysis_type==="advanced"?s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-900/20 to-pink-900/20",children:s.jsx(_r,{className:"text-purple-400/50",size:32})}):z.image_url?s.jsx("img",{src:z.image_url,alt:"Dream",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-900/20 to-pink-900/20",children:s.jsx(ut,{className:"text-purple-400/50",size:32})}),s.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/50 transition-all duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100",children:s.jsxs("div",{className:"flex items-center gap-6 text-white",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dr,{size:20}),s.jsx("span",{className:"font-semibold",children:z.likes_count})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wr,{size:20}),s.jsx("span",{className:"font-semibold",children:z.comments_count})]})]})}),z.status==="pending"&&s.jsx("div",{className:"absolute top-2 left-2",children:s.jsx("span",{className:"px-2 py-1 bg-yellow-500/90 text-yellow-900 text-xs font-semibold rounded backdrop-blur-sm",children:i.social.pending})})]},z.id))})]})]}),rt&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50",onClick:()=>st(!1)}),s.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-md bg-slate-900 border border-purple-500/30 rounded-2xl shadow-2xl z-50 max-h-[70vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"p-4 border-b border-purple-500/20 flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:i.profile.followers}),s.jsx("button",{onClick:()=>st(!1),className:"text-slate-400 hover:text-white transition-colors",children:s.jsx(pt,{size:20})})]}),s.jsx("div",{className:"overflow-y-auto flex-1 p-4 pb-24 sm:pb-4",children:te?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(Ne,{className:"animate-spin text-purple-400",size:32})}):C.length===0?s.jsx("p",{className:"text-slate-400 text-center py-8",children:i.profile.noFollowers}):s.jsx("div",{className:"space-y-3",children:C.map(z=>s.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-slate-950/50 rounded-lg transition-colors",children:[s.jsxs("button",{onClick:F=>{F.stopPropagation(),r(`/profile/${z.id}`),setTimeout(()=>st(!1),50)},className:"flex items-center gap-3 flex-1 cursor-pointer",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center overflow-hidden",children:z.avatar_url?s.jsx("img",{src:z.avatar_url,alt:"",className:"w-full h-full object-cover"}):s.jsx(Je,{size:24,className:"text-white"})}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("p",{className:"text-white font-medium",children:z.full_name}),z.username&&s.jsxs("p",{className:"text-slate-400 text-sm",children:["@",z.username]})]})]}),de&&s.jsx("button",{onClick:F=>{F.stopPropagation(),me(z.id,z.full_name)},className:"px-3 py-1.5 text-sm bg-red-600/20 text-red-400 hover:bg-red-600/30 rounded-lg transition-colors",children:a==="tr"?"kar":"Remove"})]},z.id))})})]})]}),Nt&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50",onClick:()=>Xe(!1)}),s.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-md bg-slate-900 border border-purple-500/30 rounded-2xl shadow-2xl z-50 max-h-[70vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"p-4 border-b border-purple-500/20 flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:i.profile.following}),s.jsx("button",{onClick:()=>Xe(!1),className:"text-slate-400 hover:text-white transition-colors",children:s.jsx(pt,{size:20})})]}),s.jsx("div",{className:"overflow-y-auto flex-1 p-4 pb-24 sm:pb-4",children:te?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(Ne,{className:"animate-spin text-purple-400",size:32})}):ae.length===0?s.jsx("p",{className:"text-slate-400 text-center py-8",children:i.profile.noFollowing}):s.jsx("div",{className:"space-y-3",children:ae.map(z=>s.jsxs("button",{onClick:F=>{F.stopPropagation(),r(`/profile/${z.id}`),setTimeout(()=>Xe(!1),50)},className:"w-full flex items-center gap-3 p-3 hover:bg-slate-950/50 rounded-lg transition-colors cursor-pointer",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center overflow-hidden",children:z.avatar_url?s.jsx("img",{src:z.avatar_url,alt:"",className:"w-full h-full object-cover"}):s.jsx(Je,{size:24,className:"text-white"})}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("p",{className:"text-white font-medium",children:z.full_name}),z.username&&s.jsxs("p",{className:"text-slate-400 text-sm",children:["@",z.username]})]})]},z.id))})})]})]})]})}function Ob(){return null}const vm={smileys:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],gestures:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],hearts:["","","","","","","","","","","","","","","","","","","",""],symbols:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],animals:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],food:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],objects:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],dreams:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]};function Nc({onEmojiSelect:e,position:t="top",inputRef:r}){const[n,i]=x.useState(!1),[a,l]=x.useState("smileys"),o={smileys:"",gestures:"",hearts:"",symbols:"",animals:"",food:"",objects:"",dreams:""},c=d=>{e(d),r!=null&&r.current&&r.current.focus()};return s.jsxs("div",{className:"relative",children:[s.jsx("button",{type:"button",onClick:()=>i(!n),className:"p-2 text-slate-400 hover:text-pink-400 transition-colors",title:"Emoji ekle",children:s.jsx(Bv,{size:20})}),n&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>i(!1)}),s.jsxs("div",{className:`absolute ${t==="top"?"bottom-full mb-2":"top-full mt-2"} left-0 z-50 bg-slate-800 border border-slate-700 rounded-xl shadow-2xl w-72 overflow-hidden`,children:[s.jsx("div",{className:"flex gap-1 p-2 border-b border-slate-700 overflow-x-auto scrollbar-hide",children:Object.keys(vm).map(d=>s.jsx("button",{onClick:()=>l(d),className:`p-1.5 rounded-lg transition-colors flex-shrink-0 ${a===d?"bg-pink-600/20 text-pink-400":"hover:bg-slate-700 text-slate-400"}`,children:s.jsx("span",{className:"text-lg",children:o[d]})},d))}),s.jsx("div",{className:"p-2 max-h-48 overflow-y-auto",children:s.jsx("div",{className:"grid grid-cols-8 gap-1",children:vm[a].map((d,u)=>s.jsx("button",{onClick:()=>c(d),className:"p-1.5 text-xl hover:bg-slate-700 rounded-lg transition-colors",children:d},u))})})]})]})]})}function Mb(){const{user:e}=gt(),t=_t(),{t:r,language:n}=tt(),{showToast:i}=rr(),[a,l]=x.useState([]),[o,c]=x.useState([]),[d,u]=x.useState(!0),[m,f]=x.useState(!1),[p,b]=x.useState(null),[j,S]=x.useState(null),[y,h]=x.useState([]),[g,_]=x.useState([]),[$,A]=x.useState(""),[M,I]=x.useState(""),[G,K]=x.useState(!1),[E,W]=x.useState(!1),[P,U]=x.useState(!1),[k,q]=x.useState(!1),[H,O]=x.useState("recent"),[L,se]=x.useState("all"),[de,ke]=x.useState("visual"),[Ge,Ie]=x.useState(""),[Se,He]=x.useState(""),[rt,st]=x.useState(new Set),[Nt,Xe]=x.useState(!1),[C,X]=x.useState([]),[ae,fe]=x.useState(!1),[te,N]=x.useState(""),[T,R]=x.useState({}),[le,oe]=x.useState(null),ye=x.useRef(null),ve=x.useRef(null),ue=x.useRef(null),je=x.useRef(null),ge=x.useRef(0),[Ae,xt]=x.useState(void 0),[Le,Ze]=x.useState(!0),B=v=>{const D=[];return v.image_url&&v.image_url.trim()!==""&&D.push(v.image_url),v.image_url_2&&v.image_url_2.trim()!==""&&D.push(v.image_url_2),v.image_url_3&&v.image_url_3.trim()!==""&&D.push(v.image_url_3),D},Z=v=>{const D=B(v);if(v.primary_image_index!==null&&v.primary_image_index!==void 0&&v.primary_image_index>=0&&v.primary_image_index<D.length){const V=D[v.primary_image_index];D.splice(v.primary_image_index,1),D.unshift(V)}return D},_e=v=>{ye.current=v.touches[0].clientX},St=v=>{ve.current=v.touches[0].clientX},It=(v,D)=>{if(!ye.current||!ve.current)return;const V=ye.current-ve.current;if(Math.abs(V)>50){const Y=T[v]||0;V>0&&Y<D.length-1?R({...T,[v]:Y+1}):V<0&&Y>0&&R({...T,[v]:Y-1})}ye.current=null,ve.current=null};x.useEffect(()=>{(async()=>{if(!e){Ze(!1);return}try{const{data:D,error:V}=await w.from("subscriptions").select("plan_type").eq("user_id",e.id).single();V?(console.error("Error checking subscription:",V),xt(null)):xt((D==null?void 0:D.plan_type)||null)}catch(D){console.error("Error checking plan:",D),xt(null)}finally{Ze(!1)}})()},[e]),x.useEffect(()=>{(async()=>{e&&L==="following"&&await us(),await Be()})()},[e,H,L,Se,de]),x.useEffect(()=>(p||j?(ge.current=window.scrollY,document.body.style.position="fixed",document.body.style.top=`-${ge.current}px`,document.body.style.left="0",document.body.style.right="0",document.body.style.width="100%",document.body.style.overflow="hidden"):(document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.width="",document.body.style.overflow="",ge.current>0&&window.scrollTo(0,ge.current)),()=>{document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.width="",document.body.style.overflow=""}),[p,j]),x.useEffect(()=>{const v=new URLSearchParams(window.location.search),D=v.get("dream"),V=v.get("comment");if(D&&a.length>0){const ee=a.find(Y=>Y.id===D);ee&&(b(ee),window.history.replaceState({},"",window.location.pathname),V&&setTimeout(()=>{const Y=document.getElementById(`comment-${V}`);Y&&(Y.scrollIntoView({behavior:"smooth",block:"center"}),Y.classList.add("bg-pink-500/20"),setTimeout(()=>{Y.classList.remove("bg-pink-500/20")},2e3))},1e3))}},[a]);const us=async()=>{if(!e){st(new Set);return}try{const{data:v,error:D}=await w.from("follows").select("following_id").eq("follower_id",e.id);if(D)throw D;st(new Set((v||[]).map(V=>V.following_id)))}catch(v){console.error("Error loading following users:",v),st(new Set)}},Be=async()=>{var v,D,V;try{u(!0),a.length===0&&l([]);let ee=w.from("dreams").select(`
          id,
          dream_text,
          dream_text_tr,
          dream_text_en,
          analysis_text,
          analysis_text_tr,
          analysis_text_en,
          image_url,
          image_url_2,
          image_url_3,
          primary_image_index,
          analysis_type,
          created_at,
          user_id,
          status,
          is_public
        `).eq("is_public",!0).in("status",["completed","pending","processing"]).order("created_at",{ascending:!1}).limit(50);if(L==="following"&&e){const re=Array.from(rt);if(re.length===0){l([]),u(!1);return}ee=ee.in("user_id",re)}Se.trim()&&(ee=ee.or(`dream_text.ilike.%${Se}%,analysis_text.ilike.%${Se}%`));let{data:Y,error:me}=await ee;if(me)if((v=me.message)!=null&&v.includes("is_public")||me.code==="42703"||me.code==="PGRST116"){console.warn("is_public column not found. Please run migration to enable public dreams feature.");let re=w.from("dreams").select(`
              id,
              dream_text,
              dream_text_tr,
              dream_text_en,
              analysis_text,
              analysis_text_tr,
              analysis_text_en,
              image_url,
              image_url_2,
              image_url_3,
              primary_image_index,
              analysis_type,
              created_at,
              user_id,
              status,
              is_public
            `).in("status",["completed","pending","processing"]).order("created_at",{ascending:!1}).limit(50);if(L==="following"&&e){const De=Array.from(rt);if(De.length===0){l([]),u(!1);return}re=re.in("user_id",De)}Se.trim()&&(re=re.or(`dream_text.ilike.%${Se}%,analysis_text.ilike.%${Se}%`));const{data:pe,error:xe}=await re;if(xe)throw console.error("Error loading dreams:",xe),xe;Y=pe,Y&&(Y=Y.filter(De=>De.is_public===!0||De.is_public===void 0))}else throw console.error("Error loading dreams:",me),me;const Pe=[...new Set((Y||[]).map(re=>re.user_id))];console.log(" User IDs to fetch:",Pe.length,Pe);let mt=[],z=[];if(Pe.length>0){const[re,pe]=await Promise.allSettled([w.from("profiles").select("id, full_name, avatar_url, username").in("id",Pe),w.from("subscriptions").select("user_id, plan_type").in("user_id",Pe)]);re.status==="fulfilled"&&re.value.data?(mt=re.value.data,console.log(" Loaded profiles:",mt.length,mt)):console.error(" Failed to load profiles:",re),pe.status==="fulfilled"&&pe.value.data&&(z=pe.value.data)}const F=(Y||[]).map(re=>re.id);let J=null,ne=null;if(F.length>0){const[re,pe]=await Promise.allSettled([w.from("dream_likes").select("dream_id, user_id").in("dream_id",F),w.from("dream_comments").select("dream_id").in("dream_id",F)]);re.status==="fulfilled"&&!re.value.error?J=re.value.data||[]:J=[],pe.status==="fulfilled"&&!pe.value.error?ne=pe.value.data||[]:ne=[];const xe=new Map,De=new Map,yt=new Set;(J||[]).forEach(he=>{xe.set(he.dream_id,(xe.get(he.dream_id)||0)+1),e&&he.user_id===e.id&&yt.add(he.dream_id)}),(ne||[]).forEach(he=>{De.set(he.dream_id,(De.get(he.dream_id)||0)+1)});const Re=(Y||[]).map(he=>{const at=mt.find(nt=>nt.id===he.user_id),Ye=z.find(nt=>nt.user_id===he.user_id);return{...he,likes_count:xe.get(he.id)||0,comments_count:De.get(he.id)||0,is_liked:yt.has(he.id),profiles:at||{full_name:"Anonymous",avatar_url:null,username:null},subscriptions:Ye||null}});H==="popular"&&Re.sort((he,at)=>{const Ye=he.likes_count+he.comments_count;return at.likes_count+at.comments_count-Ye});let Ce=Re;de==="visual"?Ce=Re.filter(he=>Z(he).length>0):de==="text"&&(Ce=Re.filter(he=>Z(he).length===0&&he.status==="completed")),l(Ce)}else l([])}catch(ee){console.error("Error loading public dreams:",ee),(D=ee==null?void 0:ee.message)!=null&&D.includes("is_public")||(ee==null?void 0:ee.code)==="42703"||(ee==null?void 0:ee.code)==="PGRST116"?i("Please run the database migration to enable social features","error"):(V=ee==null?void 0:ee.message)!=null&&V.includes("permission")||(ee==null?void 0:ee.code)==="42501"?i("Permission denied. Please check your database permissions.","error"):i("Failed to load dreams. Please try again later.","error")}finally{u(!1)}},pr=async v=>{if(!v.trim()||v.length<2){X([]);return}try{fe(!0);let D=[];if(e){const{data:me}=await w.from("user_blocks").select("blocked_id").eq("blocker_id",e.id),{data:Pe}=await w.from("user_blocks").select("blocker_id").eq("blocked_id",e.id),mt=(me||[]).map(F=>F.blocked_id),z=(Pe||[]).map(F=>F.blocker_id);D=[...mt,...z]}const{data:V,error:ee}=await w.from("profiles").select("id, full_name, username, avatar_url, bio").or(`full_name.ilike.%${v}%,username.ilike.%${v}%`).limit(10);if(ee)throw ee;const Y=(V||[]).filter(me=>me.id!==(e==null?void 0:e.id)&&!D.includes(me.id));X(Y)}catch(D){console.error("Error searching users:",D)}finally{fe(!1)}};x.useEffect(()=>{const v=setTimeout(()=>{Nt&&pr(te)},300);return()=>clearTimeout(v)},[te,Nt]);const gr=async()=>{try{f(!0);const{data:v,error:D}=await w.from("dream_generations").select("*").eq("is_public",!0).eq("status","completed").order("created_at",{ascending:!1}).limit(50);if(D)throw D;const V=[...new Set((v==null?void 0:v.map(pe=>pe.user_id))||[])],{data:ee}=await w.from("profiles").select("id, full_name, avatar_url, username").in("id",V),{data:Y}=await w.from("subscriptions").select("user_id, plan_type").in("user_id",V),me=(v==null?void 0:v.map(pe=>pe.id))||[],{data:Pe}=await w.from("generation_likes").select("generation_id").in("generation_id",me),{data:mt}=await w.from("generation_comments").select("generation_id").in("generation_id",me);let z=[];if(e){const{data:pe}=await w.from("generation_likes").select("generation_id").in("generation_id",me).eq("user_id",e.id);z=pe||[]}const F=(Pe||[]).reduce((pe,xe)=>(pe[xe.generation_id]=(pe[xe.generation_id]||0)+1,pe),{}),J=(mt||[]).reduce((pe,xe)=>(pe[xe.generation_id]=(pe[xe.generation_id]||0)+1,pe),{}),ne=new Set(z.map(pe=>pe.generation_id)),re=(v||[]).map(pe=>({...pe,profiles:(ee==null?void 0:ee.find(xe=>xe.id===pe.user_id))||null,subscriptions:(Y==null?void 0:Y.find(xe=>xe.user_id===pe.user_id))||null,likes_count:F[pe.id]||0,comments_count:J[pe.id]||0,is_liked:ne.has(pe.id)}));c(re)}catch(v){console.error("Error loading generations:",v),i(n==="tr"?"Grseller yklenemedi":"Failed to load generations","error")}finally{f(!1)}},Nl=async v=>{if(!e){t("/signin");return}try{const D=a.find(V=>V.id===v);if(!D)return;if(D.is_liked){const{error:V}=await w.from("dream_likes").delete().eq("dream_id",v).eq("user_id",e.id);if(V)throw V;l(ee=>ee.map(Y=>Y.id===v?{...Y,is_liked:!1,likes_count:Y.likes_count-1}:Y))}else{const{error:V}=await w.from("dream_likes").insert({dream_id:v,user_id:e.id});if(V)throw V;l(ee=>ee.map(Y=>Y.id===v?{...Y,is_liked:!0,likes_count:Y.likes_count+1}:Y))}}catch(D){console.error("Error toggling like:",D),i(n==="tr"?"Beeni gncellenemedi":"Failed to update like","error")}},Sl=async v=>{if(!e){t("/signin");return}try{const D=o.find(V=>V.id===v);if(!D)return;if(D.is_liked){const{error:V}=await w.from("generation_likes").delete().eq("generation_id",v).eq("user_id",e.id);if(V)throw V;c(ee=>ee.map(Y=>Y.id===v?{...Y,is_liked:!1,likes_count:Y.likes_count-1}:Y))}else{const{error:V}=await w.from("generation_likes").insert({generation_id:v,user_id:e.id});if(V)throw V;c(ee=>ee.map(Y=>Y.id===v?{...Y,is_liked:!0,likes_count:Y.likes_count+1}:Y))}}catch(D){console.error("Error toggling generation like:",D),i(n==="tr"?"Beeni gncellenemedi":"Failed to update like","error")}},Ai=async(v,D)=>{if(D.stopPropagation(),!e){t("/signin");return}if(confirm(r.social.deleteConfirm))try{try{await w.from("dream_likes").delete().eq("dream_id",v)}catch(Pe){console.log("Error deleting likes:",Pe)}try{await w.from("dream_comments").delete().eq("dream_id",v)}catch(Pe){console.log("Error deleting comments:",Pe)}const V=Yr(e.id);let ee=V;if(!V)try{const{data:Pe,error:mt}=await w.rpc("is_developer",{p_user_id:e.id});!mt&&Pe===!0&&(ee=!0)}catch(Pe){console.log("Error checking developer status with RPC, using sync check:",Pe)}console.log("Developer check:",{userId:e.id,isDevSync:V,isDev:ee});let Y=w.from("dreams").delete().eq("id",v);ee||(Y=Y.eq("user_id",e.id));const{error:me}=await Y;if(me)throw me;l(Pe=>Pe.filter(mt=>mt.id!==v)),(p==null?void 0:p.id)===v&&b(null),i(r.social.dreamDeleted,"success")}catch(V){console.error("Error deleting dream:",V),i(r.social.deleteFailed,"error")}},Cn=async v=>{try{K(!0);const{data:D,error:V}=await w.from("dream_comments").select(`
          *,
          profiles:user_id (
            full_name,
            avatar_url
          )
        `).eq("dream_id",v).order("created_at",{ascending:!0});if(V)throw V;let ee=[];if(e&&D&&D.length>0){const Y=D.map(Pe=>Pe.id),{data:me}=await w.from("comment_likes").select("comment_id, is_like").eq("user_id",e.id).in("comment_id",Y);ee=me||[]}h((D||[]).map(Y=>{const me=ee.find(Pe=>Pe.comment_id===Y.id);return{...Y,profiles:Y.profiles||{full_name:"Anonymous",avatar_url:null},likes_count:Y.likes_count||0,dislikes_count:Y.dislikes_count||0,user_like_status:me?me.is_like?"like":"dislike":null}}))}catch(D){console.error("Error loading comments:",D),i(n==="tr"?"Yorumlar yklenemedi":"Failed to load comments","error")}finally{K(!1)}},Pn=async()=>{if(!e){t("/signin");return}if(!(!p||!$.trim()))try{U(!0);const{error:v}=await w.from("dream_comments").insert({dream_id:p.id,user_id:e.id,comment_text:$.trim()});if(v)throw v;await Cn(p.id),l(D=>D.map(V=>V.id===p.id?{...V,comments_count:V.comments_count+1}:V)),A(""),i(r.social.commentAdded,"success")}catch(v){console.error("Error adding comment:",v),i(r.social.commentFailed,"error")}finally{U(!1)}},zl=async v=>{if(!(!e||!p))try{const{error:D}=await w.from("dream_comments").delete().eq("id",v).eq("user_id",e.id);if(D)throw D;await Cn(p.id),p&&(b({...p,comments_count:Math.max(0,p.comments_count-1)}),l(V=>V.map(ee=>ee.id===p.id?{...ee,comments_count:Math.max(0,ee.comments_count-1)}:ee))),i(r.social.commentDeleted,"success")}catch(D){console.error("Error deleting comment:",D),i(r.social.commentDeleteFailed,"error")}},Di=async(v,D)=>{if(!e){t("/signin");return}const V=y.find(ee=>ee.id===v);if(V)try{const ee=V.user_like_status;ee===(D?"like":"dislike")?(await w.from("comment_likes").delete().eq("comment_id",v).eq("user_id",e.id),h(Y=>Y.map(me=>me.id===v?{...me,likes_count:D?Math.max(0,me.likes_count-1):me.likes_count,dislikes_count:D?me.dislikes_count:Math.max(0,me.dislikes_count-1),user_like_status:null}:me))):ee===null?(await w.from("comment_likes").insert({comment_id:v,user_id:e.id,is_like:D}),h(Y=>Y.map(me=>me.id===v?{...me,likes_count:D?me.likes_count+1:me.likes_count,dislikes_count:D?me.dislikes_count:me.dislikes_count+1,user_like_status:D?"like":"dislike"}:me))):(await w.from("comment_likes").update({is_like:D}).eq("comment_id",v).eq("user_id",e.id),h(Y=>Y.map(me=>me.id===v?{...me,likes_count:D?me.likes_count+1:Math.max(0,me.likes_count-1),dislikes_count:D?Math.max(0,me.dislikes_count-1):me.dislikes_count+1,user_like_status:D?"like":"dislike"}:me)))}catch(ee){console.error("Error handling comment like:",ee)}},Rs=v=>{const D=new Date(v),V=new Date,ee=V.getTime()-D.getTime(),Y=Math.floor(ee/6e4),me=Math.floor(Y/60),Pe=Math.floor(me/24);if(Y<1)return r.social.justNow;if(Y<60)return`${Y}${r.social.minutesAgo}`;if(me<24)return`${me}${r.social.hoursAgo}`;if(Pe<7)return`${Pe}${r.social.daysAgo}`;const mt=n==="tr"?"tr-TR":"en-US";return D.toLocaleDateString(mt,{month:"long",day:"numeric",year:D.getFullYear()!==V.getFullYear()?"numeric":void 0})},$s=v=>{b(v),h([]),A(""),Cn(v.id)},El=async v=>{S(v),_([]),I("");try{W(!0);const{data:D,error:V}=await w.from("generation_comments").select("id, comment_text, created_at, user_id").eq("generation_id",v.id).order("created_at",{ascending:!0});if(V)throw V;if(D&&D.length>0){const ee=[...new Set(D.map(Pe=>Pe.user_id))],{data:Y}=await w.from("profiles").select("id, full_name, avatar_url").in("id",ee),me=D.map(Pe=>({...Pe,profiles:(Y==null?void 0:Y.find(mt=>mt.id===Pe.user_id))||null}));_(me)}else _([])}catch(D){console.error("Error loading generation comments:",D)}finally{W(!1)}},Ri=async()=>{if(!e){t("/signin");return}if(!(!M.trim()||!j))try{q(!0);const{data:v,error:D}=await w.from("generation_comments").insert({generation_id:j.id,user_id:e.id,comment_text:M.trim()}).select("id, comment_text, created_at, user_id").single();if(D)throw D;const{data:V}=await w.from("profiles").select("id, full_name, avatar_url").eq("id",e.id).single(),ee={...v,profiles:V||null};_([...g,ee]),I(""),c(Y=>Y.map(me=>me.id===j.id?{...me,comments_count:me.comments_count+1}:me)),i(n==="tr"?"Yorum eklendi!":"Comment posted!","success")}catch(v){console.error("Error posting comment:",v),i(n==="tr"?"Yorum eklenemedi":"Failed to post comment","error")}finally{q(!1)}},Cl=async v=>{if(e)try{const{error:D}=await w.from("generation_comments").delete().eq("id",v).eq("user_id",e.id);if(D)throw D;_(V=>V.filter(ee=>ee.id!==v)),j&&c(V=>V.map(ee=>ee.id===j.id?{...ee,comments_count:Math.max(0,ee.comments_count-1)}:ee)),i(n==="tr"?"Yorum silindi":"Comment deleted","success")}catch(D){console.error("Error deleting comment:",D),i(n==="tr"?"Yorum silinemedi":"Failed to delete comment","error")}};if(d||Le)return s.jsx("div",{className:"min-h-screen relative pt-24 flex items-center justify-center",children:s.jsx(Ne,{className:"animate-spin text-purple-400",size:48})});const $i=e?Yr(e.id):!1,Ii=e&&Ae===null&&!$i,sr=!e,Li=(Ii||sr)&&!$i;return s.jsxs("div",{className:"min-h-screen relative pt-24 pb-24 sm:pb-16 px-4 md:px-6",children:[Li&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-950/80 backdrop-blur-sm",children:s.jsxs("div",{className:"max-w-md mx-4 p-8 bg-gradient-to-br from-slate-900/90 to-purple-900/90 border border-purple-500/30 rounded-2xl shadow-2xl text-center",children:[s.jsx(wt,{className:"mx-auto mb-4 text-purple-400",size:48}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:sr?r.social.signIn:"Plan Gerekli"}),s.jsx("p",{className:"text-slate-300 mb-6",children:r.social.noPlanMessage}),s.jsx("button",{onClick:()=>t(sr?"/signin":"/pricing"),className:"w-full px-6 py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-semibold rounded-xl transition-all duration-300 hover:shadow-lg hover:shadow-pink-500/30",children:sr?r.social.signIn:"Planlar Grntle"})]})}),s.jsxs("div",{className:`${Li?"blur-lg pointer-events-none select-none":""} transition-all duration-300`,children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-40 right-10 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-40 left-10 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"})]}),s.jsxs("div",{className:"relative max-w-7xl mx-auto z-10",children:[s.jsxs("div",{className:"text-center mb-8 animate-fade-in",children:[s.jsx("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight",style:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility",fontFeatureSettings:'"kern" 1',WebkitTextStroke:"0.5px rgba(236, 72, 153, 0.3)"},children:r.social.title}),s.jsx("p",{className:"text-slate-400 text-lg",children:r.social.subtitle})]}),s.jsxs("div",{className:"mb-6 space-y-4",children:[s.jsxs("div",{className:"flex gap-2 border-b border-purple-500/20",children:[s.jsx("button",{onClick:()=>Xe(!1),className:`px-4 py-2 text-sm font-medium transition-colors ${Nt?"text-slate-400 hover:text-slate-300":"text-purple-400 border-b-2 border-purple-400"}`,children:r.social.searchDreams}),s.jsx("button",{onClick:()=>Xe(!0),className:`px-4 py-2 text-sm font-medium transition-colors ${Nt?"text-purple-400 border-b-2 border-purple-400":"text-slate-400 hover:text-slate-300"}`,children:r.social.searchUsers})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),Nt?s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"text",value:te,onChange:v=>N(v.target.value),placeholder:r.social.searchUsersPlaceholder,className:"w-full pl-10 pr-4 py-3 bg-slate-900/50 backdrop-blur-sm border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60"}),te&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-slate-900 border border-purple-500/30 rounded-lg shadow-2xl max-h-96 overflow-y-auto z-50",children:ae?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(Ne,{className:"animate-spin text-purple-400",size:24})}):C.length===0?s.jsx("div",{className:"text-center py-8 text-slate-400",children:s.jsx("p",{children:r.social.noUsersFound})}):s.jsx("div",{className:"divide-y divide-purple-500/10",children:C.map(v=>s.jsxs("button",{onClick:()=>{t(`/profile/${v.id}`),Xe(!1),N("")},className:"w-full p-4 text-left hover:bg-slate-950/50 transition-colors flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border border-pink-500/30 flex items-center justify-center overflow-hidden flex-shrink-0",children:v.avatar_url?s.jsx("img",{src:v.avatar_url,alt:v.full_name,className:"w-full h-full object-cover"}):s.jsx(Je,{className:"text-pink-400",size:20})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-white font-semibold truncate",children:v.full_name||v.username||r.social.anonymous}),v.username&&s.jsxs("p",{className:"text-slate-400 text-sm truncate",children:["@",v.username]}),v.bio&&s.jsx("p",{className:"text-slate-500 text-xs truncate mt-1",children:v.bio})]})]},v.id))})})]}):s.jsx("input",{type:"text",value:Ge,onChange:v=>Ie(v.target.value),onKeyPress:v=>{v.key==="Enter"&&He(Ge)},placeholder:r.social.searchDreamsPlaceholder,className:"w-full pl-10 pr-4 py-3 bg-slate-900/50 backdrop-blur-sm border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60"})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-lg p-1 mb-4",children:[s.jsx("button",{onClick:()=>{ke("visual")},className:`flex-1 px-4 py-2 rounded text-sm font-medium transition-all ${de==="visual"?"bg-purple-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:r.social.visualAnalyses}),s.jsx("button",{onClick:()=>{ke("text")},className:`flex-1 px-4 py-2 rounded text-sm font-medium transition-all ${de==="text"?"bg-purple-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:r.social.textAnalyses}),s.jsx("button",{onClick:()=>{if(Ae!=="premium"&&Ae!=="ruyagezer"){i(r.social.generatorsPremiumOnly,"error");return}ke("generators"),gr()},className:`flex-1 px-4 py-2 rounded text-sm font-medium transition-all relative group ${de==="generators"?"bg-gradient-to-r from-pink-600 to-yellow-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:s.jsxs("span",{className:"flex items-center justify-center gap-1.5",children:[Ae!=="premium"&&Ae!=="ruyagezer"&&s.jsx(wt,{size:14,className:"text-yellow-400"}),s.jsx(ut,{size:14,className:Ae==="premium"||Ae==="ruyagezer"?"text-yellow-400":""}),r.social.generators]})})]}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-lg p-2",children:[s.jsx(Pv,{size:18,className:"text-slate-400"}),s.jsx("button",{onClick:()=>{se("all"),Be()},className:`px-3 py-1 rounded text-sm font-medium transition-all ${L==="all"?"bg-purple-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:r.social.all}),e&&s.jsxs("button",{onClick:()=>{se("following"),Be()},className:`px-3 py-1 rounded text-sm font-medium transition-all flex items-center gap-1 ${L==="following"?"bg-purple-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:[s.jsx(Ps,{size:14}),r.social.following]})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-lg p-2",children:[s.jsxs("button",{onClick:()=>{O("recent"),Be()},className:`px-3 py-1 rounded text-sm font-medium transition-all flex items-center gap-1 ${H==="recent"?"bg-pink-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:[s.jsx(nm,{size:14}),r.social.recent]}),s.jsxs("button",{onClick:()=>{O("popular"),Be()},className:`px-3 py-1 rounded text-sm font-medium transition-all flex items-center gap-1 ${H==="popular"?"bg-pink-600 text-white":"text-slate-400 hover:text-slate-300"}`,children:[s.jsx(dr,{size:14}),r.social.popular]})]})]})]}),de==="generators"?s.jsx(s.Fragment,{children:Ae!=="premium"&&Ae!=="ruyagezer"?s.jsxs("div",{className:"text-center py-20",children:[s.jsxs("div",{className:"relative inline-block mb-8",children:[s.jsx(ut,{className:"mx-auto text-yellow-400 animate-pulse",size:64}),s.jsx(wt,{className:"absolute -top-2 -right-2 text-pink-400",size:32})]}),s.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:r.social.generatorsPremiumOnly}),s.jsx("p",{className:"text-slate-400 mb-8 max-w-md mx-auto",children:"Upgrade to Premium to view and create AI-generated dream art"}),s.jsx("button",{onClick:()=>t("/pricing"),className:"px-8 py-4 rounded-xl bg-gradient-to-r from-pink-600 to-yellow-600 text-white font-semibold hover:from-pink-500 hover:to-yellow-500 transition-all duration-300 hover:shadow-lg hover:shadow-pink-500/30 hover:scale-105",children:r.social.upgradeForGenerators})]}):m?s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsx(Ne,{className:"animate-spin text-purple-400",size:48})}):o.length===0?s.jsxs("div",{className:"text-center py-20",children:[s.jsx(Hs,{className:"mx-auto mb-4 text-slate-600",size:64}),s.jsx("p",{className:"text-slate-400 text-lg mb-6",children:r.social.noGenerations}),s.jsx("button",{onClick:()=>t("/generator"),className:"px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600 to-yellow-600 text-white font-semibold hover:from-pink-500 hover:to-yellow-500 transition-all duration-300",children:"Create Your First Generation"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:o.map(v=>{var D,V;return s.jsxs("div",{className:"group bg-slate-900/50 backdrop-blur-sm border border-yellow-500/20 rounded-2xl overflow-hidden hover:border-yellow-500/40 transition-all duration-300",children:[s.jsxs("div",{className:"relative aspect-square overflow-hidden bg-slate-950 cursor-pointer",children:[s.jsx("img",{src:v.generated_image_url,alt:"Generated dream",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",onClick:()=>oe(v.generated_image_url)}),s.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-all duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100 pointer-events-none",children:s.jsxs("div",{className:"flex items-center gap-6 text-white pointer-events-none",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dr,{size:24,className:v.is_liked?"fill-current text-pink-400":""}),s.jsx("span",{className:"font-semibold",children:v.likes_count})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wr,{size:24}),s.jsx("span",{className:"font-semibold",children:v.comments_count})]})]})})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border border-pink-500/30 flex items-center justify-center overflow-hidden cursor-pointer hover:border-pink-500/50 transition-all",onClick:()=>t(`/profile/${v.user_id}`),children:(D=v.profiles)!=null&&D.avatar_url?s.jsx("img",{src:v.profiles.avatar_url,alt:v.profiles.full_name,className:"w-full h-full object-cover"}):s.jsx(Je,{className:"text-pink-400",size:20})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-semibold text-white truncate cursor-pointer hover:text-pink-400 transition-colors",onClick:()=>t(`/profile/${v.user_id}`),children:((V=v.profiles)==null?void 0:V.full_name)||"Anonymous"}),s.jsx("p",{className:"text-xs text-slate-400",children:new Date(v.created_at).toLocaleDateString()})]})]}),s.jsx("div",{className:"flex items-center justify-between pt-3 border-t border-slate-800",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:ee=>{ee.stopPropagation(),Sl(v.id)},className:`flex items-center gap-1.5 transition-all hover:scale-110 ${v.is_liked?"text-pink-400":"text-slate-400 hover:text-pink-400"}`,children:[s.jsx(dr,{size:20,className:v.is_liked?"fill-current":""}),s.jsx("span",{className:"text-sm font-medium",children:v.likes_count})]}),s.jsxs("button",{onClick:ee=>{ee.stopPropagation(),El(v)},className:"flex items-center gap-1.5 text-slate-400 hover:text-purple-400 transition-all hover:scale-110",children:[s.jsx(wr,{size:20}),s.jsx("span",{className:"text-sm font-medium",children:v.comments_count})]})]})})]})]},v.id)})})}):a.length===0?s.jsxs("div",{className:"text-center py-20",children:[s.jsx(Je,{className:"mx-auto mb-4 text-slate-600",size:64}),s.jsx("p",{className:"text-slate-400 text-lg mb-6",children:r.social.noDreams}),s.jsx("button",{onClick:()=>t("/analyze"),className:"px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300",children:r.social.shareFirst})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:a.map(v=>s.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl overflow-hidden hover:border-purple-500/40 transition-all duration-300 group",children:[Z(v).length>0&&s.jsxs("div",{className:"relative aspect-square bg-slate-950 overflow-hidden group/image cursor-pointer",onTouchStart:_e,onTouchMove:St,onTouchEnd:()=>{const D=Z(v);It(v.id,D)},onClick:D=>{const V=D.target;V.closest("button")||V.tagName==="BUTTON"||$s(v)},children:[(()=>{const D=Z(v);if(D.length===0)return s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-900/20 to-pink-900/20",children:s.jsx(ut,{className:"text-purple-400/50",size:48})});const V=T[v.id]||0,ee=D[V];return s.jsxs(s.Fragment,{children:[s.jsx("img",{src:ee,alt:"Dream visualization",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500 image-clickable cursor-pointer",onClick:Y=>{Y.stopPropagation(),oe(ee)}}),D.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex gap-1.5 z-10 pointer-events-none",children:D.map((Y,me)=>s.jsx("div",{className:`h-1.5 rounded-full transition-all ${me===V?"bg-white w-6":"bg-white/50 w-1.5"}`},me))}),s.jsx("button",{onClick:Y=>{Y.stopPropagation(),Y.preventDefault(),V>0&&R({...T,[v.id]:V-1})},className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/60 hover:bg-black/80 text-white p-2 rounded-full transition-all z-20 md:block hidden",disabled:V===0,onMouseDown:Y=>{Y.stopPropagation(),Y.preventDefault()},title:r.social.previousImage||"Previous image","aria-label":r.social.previousImage||"Previous image",children:s.jsx(Wa,{size:20})}),s.jsx("button",{onClick:Y=>{Y.stopPropagation(),Y.preventDefault(),V<D.length-1&&R({...T,[v.id]:V+1})},className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/60 hover:bg-black/80 text-white p-2 rounded-full transition-all z-20 md:block hidden",title:r.social.nextImage,"aria-label":r.social.nextImage,disabled:V===D.length-1,onMouseDown:Y=>{Y.stopPropagation(),Y.preventDefault()},children:s.jsx(_s,{size:20})})]})]})})(),s.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-all duration-300 items-center justify-center opacity-0 group-hover:opacity-100 pointer-events-none hidden md:flex",children:s.jsxs("div",{className:"flex items-center gap-6 text-white pointer-events-none",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dr,{size:24,className:v.is_liked?"fill-current text-pink-400":""}),s.jsx("span",{className:"font-semibold",children:v.likes_count})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wr,{size:24}),s.jsx("span",{className:"font-semibold",children:v.comments_count})]})]})}),v.status==="pending"&&s.jsx("div",{className:"absolute top-3 left-3",children:s.jsx("span",{className:"px-3 py-1 bg-yellow-500/90 text-yellow-900 text-xs font-semibold rounded-full backdrop-blur-sm",children:r.social.pending})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:D=>{D.stopPropagation(),t(`/profile/${v.user_id}`)},className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border-2 border-white/30 flex items-center justify-center overflow-hidden hover:scale-110 transition-transform",children:v.profiles.avatar_url?s.jsx("img",{src:v.profiles.avatar_url,alt:v.profiles.full_name,className:"w-full h-full object-cover"}):s.jsx(Je,{className:"text-pink-400",size:16})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:s.jsx("button",{onClick:D=>{D.stopPropagation(),t(`/profile/${v.user_id}`)},className:"text-white font-semibold text-sm hover:text-purple-300 transition-colors truncate",children:v.profiles.full_name||v.profiles.username||r.social.anonymous})}),s.jsx("p",{className:"text-white/70 text-xs",children:Rs(v.created_at)})]})]})})]}),s.jsxs("div",{className:"p-4 bg-slate-900/50",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:D=>{D.stopPropagation(),Nl(v.id)},className:`transition-all hover:scale-110 ${v.is_liked?"text-pink-400":"text-slate-400 hover:text-pink-400"}`,title:v.is_liked?r.social.likes:r.social.like,"aria-label":v.is_liked?r.social.likes:r.social.like,children:s.jsx(dr,{size:24,className:v.is_liked?"fill-current":""})}),s.jsx("button",{onClick:D=>{D.stopPropagation(),$s(v)},className:"text-slate-400 hover:text-purple-400 transition-all hover:scale-110",title:r.social.comments,"aria-label":r.social.comments,children:s.jsx(wr,{size:24})}),s.jsx("button",{onClick:D=>{D.stopPropagation(),navigator.share?navigator.share({title:r.social.checkOutDream,text:v.dream_text.substring(0,100),url:window.location.href}):(navigator.clipboard.writeText(window.location.href),i(r.social.linkCopied,"success"))},className:"text-slate-400 hover:text-cyan-400 transition-all hover:scale-110",title:r.social.checkOutDream,"aria-label":r.social.checkOutDream,children:s.jsx(Uv,{size:24})}),e&&(v.user_id===e.id||Yr(e.id))&&s.jsx("button",{onClick:D=>{D.stopPropagation(),Ai(v.id,D)},className:"text-slate-400 hover:text-red-400 transition-all hover:scale-110 ml-auto",title:v.user_id===e.id?r.social.deleteDream:"Delete dream (Developer)","aria-label":v.user_id===e.id?r.social.deleteDream:"Delete dream (Developer)",children:s.jsx(Dr,{size:20})})]})}),s.jsx("div",{className:"mb-2",children:v.likes_count>0&&s.jsxs("p",{className:"text-white font-semibold text-sm",children:[v.likes_count," ",v.likes_count===1?r.social.like:r.social.likes]})}),Z(v).length===0&&v.status==="completed"?s.jsxs("div",{className:"p-4 cursor-pointer hover:bg-slate-800/30 transition-colors rounded-lg",onClick:()=>b(v),children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-3",children:[s.jsx("button",{onClick:V=>{V.stopPropagation(),t(`/profile/${v.user_id}`)},className:"w-6 h-6 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border-2 border-white/30 flex items-center justify-center overflow-hidden hover:scale-110 transition-transform flex-shrink-0",children:v.profiles.avatar_url?s.jsx("img",{src:v.profiles.avatar_url,alt:v.profiles.full_name,className:"w-full h-full object-cover"}):s.jsx(Je,{size:12,className:"text-white/60"})}),s.jsx("button",{onClick:V=>{V.stopPropagation(),t(`/profile/${v.user_id}`)},className:"text-white font-semibold text-sm hover:text-purple-300 transition-colors",children:v.profiles.full_name||v.profiles.username||r.social.anonymous}),s.jsx("span",{className:"text-white/50 text-xs",children:Rs(v.created_at)})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("h3",{className:"text-xs font-semibold text-purple-400 mb-1.5",children:r.library.yourDream}),s.jsx("p",{className:"text-white/80 text-sm leading-relaxed line-clamp-4",children:mn(v,n)})]}),Qr(v,n)&&s.jsxs("div",{className:"mb-3",children:[s.jsx("h3",{className:"text-xs font-semibold text-pink-400 mb-1.5",children:r.library.analysis}),s.jsx("p",{className:"text-white/80 text-sm leading-relaxed line-clamp-4",children:Qr(v,n)})]})]}):null,Z(v).length>0?s.jsxs("div",{className:"mb-2 cursor-pointer",onClick:V=>{V.stopPropagation(),$s(v)},children:[s.jsx("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:s.jsx("button",{onClick:V=>{V.stopPropagation(),t(`/profile/${v.user_id}`)},className:"text-white font-semibold text-sm hover:text-purple-300 transition-colors",children:v.profiles.full_name||v.profiles.username||r.social.anonymous})}),s.jsx("span",{className:"text-white/80 text-sm line-clamp-2",children:mn(v,n)})]}):null,v.comments_count>0&&s.jsxs("button",{onClick:D=>{D.stopPropagation(),$s(v)},className:"text-white/70 hover:text-white text-sm transition-colors",children:[r.social.viewAll," ",v.comments_count," ",v.comments_count===1?r.social.comment:r.social.comments]})]})]},v.id))})]}),p&&s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 md:p-6",onClick:()=>b(null),children:s.jsxs("div",{className:"bg-slate-900 border border-purple-500/30 rounded-xl sm:rounded-2xl w-full max-w-5xl max-h-[80vh] sm:max-h-[90vh] overflow-hidden flex flex-col mx-2 sm:mx-0 my-auto",onClick:v=>v.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-purple-500/20 flex-shrink-0",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm mb-1",children:[s.jsx(nm,{size:14}),Rs(p.created_at)]}),s.jsx("h2",{className:"text-xl font-semibold text-white",children:r.library.dreamEntry})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[e&&(p.user_id===e.id||Yr(e.id))&&s.jsx("button",{onClick:v=>{v.stopPropagation(),Ai(p.id,v)},className:"text-slate-400 hover:text-red-400 transition-colors p-2 hover:bg-red-500/10 rounded-lg",title:p.user_id===e.id?r.social.deleteDream:"Delete dream (Developer)","aria-label":p.user_id===e.id?r.social.deleteDream:"Delete dream (Developer)",children:s.jsx(Dr,{size:20})}),s.jsx("button",{onClick:()=>b(null),className:"text-slate-400 hover:text-white transition-colors text-xl",children:""})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row flex-1 overflow-hidden",children:[Z(p).length>0&&s.jsx("div",{className:"w-full md:w-1/2 h-48 sm:h-64 md:h-auto flex-shrink-0 bg-slate-950 overflow-hidden relative",children:(()=>{const v=Z(p);if(v.length===0)return s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-900/20 to-pink-900/20",children:s.jsx(ut,{className:"text-purple-400/50",size:64})});const D=T[`modal-${p.id}`]||0,V=v[D];return s.jsxs("div",{className:"w-full h-full flex items-center justify-center relative",children:[s.jsx("img",{src:V,alt:"Dream visualization",className:"max-w-full max-h-full object-contain cursor-zoom-in",onClick:()=>oe(V)}),v.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2 z-10",children:v.map((ee,Y)=>s.jsx("div",{className:`h-2 rounded-full transition-all ${Y===D?"bg-white w-8":"bg-white/50 w-2"}`},Y))}),s.jsx("button",{onClick:ee=>{ee.stopPropagation(),D>0&&R({...T,[`modal-${p.id}`]:D-1})},className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black/60 hover:bg-black/80 text-white p-2 rounded-full transition-opacity",disabled:D===0,title:r.social.previousImage,"aria-label":r.social.previousImage,children:s.jsx(Wa,{size:24})}),s.jsx("button",{onClick:ee=>{ee.stopPropagation(),D<v.length-1&&R({...T,[`modal-${p.id}`]:D+1})},className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black/60 hover:bg-black/80 text-white p-2 rounded-full transition-opacity",disabled:D===v.length-1,title:r.social.nextImage,"aria-label":r.social.nextImage,children:s.jsx(_s,{size:24})})]})]})})()}),s.jsxs("div",{className:`flex flex-col overflow-y-auto flex-1 ${p.analysis_type==="basic"||p.analysis_type==="advanced"?"w-full":"md:flex-1"}`,children:[s.jsxs("div",{className:"p-4 sm:p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:r.library.yourDream}),s.jsx("p",{className:"text-slate-300 leading-relaxed whitespace-pre-wrap",children:mn(p,n)})]}),Qr(p,n)&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-pink-400 mb-2",children:r.library.analysis}),s.jsx("p",{className:"text-slate-300 leading-relaxed whitespace-pre-wrap",children:Qr(p,n)})]})]}),s.jsxs("div",{className:"border-t border-purple-500/20 pt-6 px-6 pb-24 sm:pb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:r.social.comments}),e?s.jsxs("div",{className:"mb-6 flex items-center gap-2",children:[s.jsx(Nc,{onEmojiSelect:v=>A(D=>D+v),position:"top",inputRef:ue}),s.jsx("input",{ref:ue,type:"text",value:$,onChange:v=>A(v.target.value),onKeyPress:v=>v.key==="Enter"&&!v.shiftKey&&Pn(),placeholder:r.social.writeComment,className:"flex-1 px-3 sm:px-4 py-2 bg-slate-950/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 text-sm sm:text-base"}),s.jsx("button",{onClick:Pn,disabled:!$.trim()||P,className:"p-2 sm:px-4 sm:py-2 bg-gradient-to-r from-pink-600 to-purple-600 text-white rounded-lg hover:from-pink-500 hover:to-purple-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:P?s.jsx(Ne,{className:"animate-spin",size:18}):s.jsx(ur,{size:18})})]}):s.jsxs("div",{className:"mb-6 p-4 bg-slate-950/30 rounded-lg text-center",children:[s.jsx("p",{className:"text-slate-400 mb-2",children:r.social.signInToComment}),s.jsx("button",{onClick:()=>{b(null),t("/signin")},className:"text-purple-400 hover:text-purple-300",children:r.social.signIn})]}),G?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(Ne,{className:"animate-spin text-purple-400",size:24})}):y.length===0?s.jsx("p",{className:"text-slate-400 text-center py-8",children:r.social.noComments}):s.jsx("div",{className:"space-y-4",children:y.map(v=>s.jsxs("div",{id:`comment-${v.id}`,className:"flex gap-3 group transition-colors duration-300",children:[s.jsx("button",{onClick:()=>t(`/profile/${v.user_id}`),className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border border-pink-500/30 flex items-center justify-center overflow-hidden flex-shrink-0 hover:border-purple-400/50 transition-colors",children:v.profiles.avatar_url?s.jsx("img",{src:v.profiles.avatar_url,alt:v.profiles.full_name,className:"w-full h-full object-cover"}):s.jsx(Je,{className:"text-pink-400",size:16})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("button",{onClick:()=>t(`/profile/${v.user_id}`),className:"text-white font-semibold text-sm hover:text-purple-400 transition-colors",children:v.profiles.full_name||r.social.anonymous}),s.jsx("p",{className:"text-slate-500 text-xs",children:Rs(v.created_at)}),e&&v.user_id===e.id&&s.jsx("button",{onClick:()=>zl(v.id),className:"ml-auto opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity p-1 text-slate-500 hover:text-red-400",title:r.social.deleteComment,children:s.jsx(pt,{size:14})})]}),s.jsx("p",{className:"text-slate-300 text-sm",children:v.comment_text}),s.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[s.jsxs("button",{onClick:()=>Di(v.id,!0),className:`flex items-center gap-1 text-xs transition-colors ${v.user_like_status==="like"?"text-green-400":"text-slate-500 hover:text-green-400"}`,children:[s.jsx(Hv,{size:14,className:v.user_like_status==="like"?"fill-current":""}),v.likes_count>0&&s.jsx("span",{children:v.likes_count})]}),s.jsxs("button",{onClick:()=>Di(v.id,!1),className:`flex items-center gap-1 text-xs transition-colors ${v.user_like_status==="dislike"?"text-red-400":"text-slate-500 hover:text-red-400"}`,children:[s.jsx(Gv,{size:14,className:v.user_like_status==="dislike"?"fill-current":""}),v.dislikes_count>0&&s.jsx("span",{children:v.dislikes_count})]})]})]})]},v.id))})]})]})]})]})})]}),le&&s.jsxs("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-sm z-[60] flex items-center justify-center p-4",onClick:()=>oe(null),children:[s.jsx("button",{onClick:()=>oe(null),className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors z-10 bg-black/50 rounded-full p-2",title:r.social.close,"aria-label":r.social.close,children:s.jsx(pt,{size:24})}),s.jsx("img",{src:le,alt:"Dream visualization - full size",className:"max-w-full max-h-[90vh] object-contain rounded-lg",onClick:v=>v.stopPropagation()})]}),j&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:s.jsxs("div",{className:"bg-slate-900 border border-purple-500/30 rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-purple-500/20",children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"Comments"}),s.jsx("button",{onClick:()=>S(null),className:"text-slate-400 hover:text-white transition-colors",children:s.jsx(pt,{size:24})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:E?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(Ne,{className:"animate-spin text-purple-400",size:32})}):g.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(wr,{className:"mx-auto mb-4 text-slate-600",size:48}),s.jsx("p",{className:"text-slate-400",children:"No comments yet"}),s.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"Be the first to comment!"})]}):g.map(v=>{var D,V;return s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500/20 to-purple-500/20 border border-pink-500/30 flex items-center justify-center overflow-hidden flex-shrink-0",children:(D=v.profiles)!=null&&D.avatar_url?s.jsx("img",{src:v.profiles.avatar_url,alt:v.profiles.full_name,className:"w-full h-full object-cover"}):s.jsx(Je,{className:"text-pink-400",size:20})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("p",{className:"font-semibold text-white text-sm",children:((V=v.profiles)==null?void 0:V.full_name)||"Anonymous"}),s.jsx("p",{className:"text-slate-500 text-xs",children:new Date(v.created_at).toLocaleDateString()}),e&&v.user_id===e.id&&s.jsx("button",{onClick:()=>Cl(v.id),className:"ml-auto text-slate-400 hover:text-red-400 transition-colors",title:"Delete comment",children:s.jsx(Dr,{size:16})})]}),s.jsx("p",{className:"text-slate-300 text-sm",children:v.comment_text})]})]},v.id)})}),s.jsx("div",{className:"p-6 pb-24 sm:pb-6 border-t border-purple-500/20",children:e?s.jsxs("div",{className:"flex gap-3 items-start",children:[s.jsx(Nc,{onEmojiSelect:v=>I(D=>D+v),position:"top",inputRef:je}),s.jsx("textarea",{ref:je,value:M,onChange:v=>I(v.target.value),onKeyDown:v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),M.trim()&&Ri())},placeholder:"Write a comment...",className:"flex-1 px-4 py-3 bg-slate-950/50 border border-purple-500/30 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/60 resize-none",rows:2,disabled:k}),s.jsx("button",{onClick:Ri,disabled:!M.trim()||k,className:"px-6 py-3 bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold rounded-xl hover:from-pink-500 hover:to-purple-500 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:k?s.jsx(Ne,{className:"animate-spin",size:20}):s.jsx(ur,{size:20})})]}):s.jsxs("div",{className:"text-center py-4",children:[s.jsx("p",{className:"text-slate-400 mb-4",children:"Sign in to comment"}),s.jsx("button",{onClick:()=>t("/signin"),className:"px-6 py-2 bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold rounded-xl hover:from-pink-500 hover:to-purple-500 transition-all duration-300",children:"Sign In"})]})})]})}),(Ii||sr)&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:s.jsxs("div",{className:"bg-slate-900 border-2 border-purple-500/50 rounded-2xl p-8 max-w-md mx-4 text-center shadow-2xl",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx(wt,{className:"mx-auto text-purple-400 mb-4",size:48}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:sr?n==="tr"?"Giri Gerekli":"Login Required":n==="tr"?"Plan Gerekli":"Plan Required"}),s.jsx("p",{className:"text-slate-400",children:sr?n==="tr"?"Sosyal sayfasna eriim iin nce kaydolmanz veya giri yapmanz gerekmektedir.":"You must sign up or log in first to access the social page.":n==="tr"?"Sosyal ksmna eriim salayabilmek iin en azndan bedava plana sahip olmalsnz.":"You must have at least a free plan to access the social section."})]}),s.jsx("div",{className:"flex flex-col gap-3",children:sr?s.jsx("button",{onClick:()=>t("/signin"),className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105",children:n==="tr"?"Kaydol / Giri Yap":"Sign Up / Log In"}):s.jsx("button",{onClick:()=>t("/pricing"),className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105",children:n==="tr"?"Satn Al Sayfasna Git":"Go to Pricing Page"})})]})})]})}function Ub(){const{user:e,loading:t}=gt(),r=_t(),{t:n}=tt(),{showToast:i}=rr(),[a,l]=x.useState(!1),[o,c]=x.useState(!1),[d,u]=x.useState(!1);x.useEffect(()=>{if(!t){if(!e){r("/signin");return}m()}},[e,r]);const m=async()=>{if(e)try{const{data:b,error:j}=await w.from("profiles").select("trial_used, trial_start, trial_end").eq("id",e.id).single();if(j)throw j;b!=null&&b.trial_used&&u(!0)}catch(b){console.error("Error checking trial status:",b)}},f=async()=>{try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch(b){console.error("Error fetching IP address:",b);try{return(await(await fetch("https://api64.ipify.org?format=json")).json()).ip}catch(j){throw console.error("Error fetching IP from fallback service:",j),new Error("Could not determine IP address")}}},p=async()=>{if(!e||d){i("Kullanc bulunamad veya deneme zaten kullanlm.","error");return}l(!0);try{const b=await f(),{error:j}=await w.from("profiles").select("id").eq("id",e.id).single();if(j&&j.code==="PGRST116"){const{error:A}=await w.from("profiles").insert({id:e.id,email:e.email||"",full_name:"",trial_used:!1,trial_start:null,trial_end:null});if(A)throw console.error("Error creating profile:",A),A}else if(j)throw console.error("Error checking profile:",j),j;const S=new Date,y=new Date(S.getTime()+7*24*60*60*1e3);console.log("Activating trial for user:",e.id),console.log("Trial start:",S.toISOString()),console.log("Trial end:",y.toISOString());const{data:h,error:g}=await w.from("profiles").update({trial_used:!0,trial_start:S.toISOString(),trial_end:y.toISOString()}).eq("id",e.id).select();if(g)throw console.error("Supabase error:",g),console.error("Error code:",g.code),console.error("Error message:",g.message),console.error("Error details:",g.details),console.error("Error hint:",g.hint),g;if(!h||h.length===0)throw new Error("Profil gncellenemedi. Ltfen tekrar deneyin.");console.log("Trial activated successfully in profiles:",h);const{error:_}=await w.rpc("update_subscription_plan",{p_user_id:e.id,p_plan_type:"trial"});_?console.error("Error updating subscription:",_):console.log("Subscription updated successfully to trial");const{error:$}=await w.rpc("record_trial_activation",{p_ip_address:b,p_user_id:e.id});$&&console.error("Error recording trial activation:",$),c(!0),i(n.trial.activated,"success"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}catch(b){console.error("Error activating trial:",b);let j="cretsiz deneme balatlamad. Ltfen tekrar deneyin.";b!=null&&b.message?j=b.message:(b==null?void 0:b.code)==="PGRST301"?j="Yetkiniz yok. Ltfen giri yapn.":(b==null?void 0:b.code)==="23505"&&(j="Bu ilem zaten yaplm."),i(j,"error")}finally{l(!1)}};return e?s.jsxs("div",{className:"min-h-screen relative pt-24 pb-24 sm:pb-16 px-4 md:px-6",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-40 right-10 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-40 left-10 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"})]}),s.jsx("div",{className:"relative max-w-2xl mx-auto z-10",children:d?s.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-yellow-500/20 rounded-2xl p-8 text-center animate-fade-in",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-yellow-500/20 flex items-center justify-center mx-auto mb-6",children:s.jsx(ut,{className:"text-yellow-400",size:32})}),s.jsx("h1",{className:"text-3xl font-bold mb-4 text-white",children:n.trial.alreadyUsed}),s.jsx("p",{className:"text-slate-400 mb-8",children:n.trial.alreadyUsedDesc}),s.jsx("button",{onClick:()=>r("/pricing"),className:"px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300",children:n.trial.viewPlans})]}):o?s.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-green-500/20 rounded-2xl p-8 text-center animate-fade-in",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center mx-auto mb-6",children:s.jsx(be,{className:"text-green-400",size:32})}),s.jsx("h1",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-green-400 to-cyan-400 bg-clip-text text-transparent",children:n.trial.activated}),s.jsx("p",{className:"text-slate-300 text-lg mb-2",children:n.trial.activatedDesc}),s.jsx("p",{className:"text-slate-400 mb-8",children:n.trial.enjoy3Days}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[s.jsxs("div",{className:"bg-slate-950/50 rounded-lg p-4",children:[s.jsx("p",{className:"text-slate-400 text-sm mb-1",children:n.trial.duration}),s.jsx("p",{className:"text-white font-semibold",children:n.trial.threeDays})]}),s.jsxs("div",{className:"bg-slate-950/50 rounded-lg p-4",children:[s.jsx("p",{className:"text-slate-400 text-sm mb-1",children:n.trial.analyses}),s.jsx("p",{className:"text-white font-semibold",children:n.trial.threeAnalyses})]}),s.jsxs("div",{className:"bg-slate-950/50 rounded-lg p-4",children:[s.jsx("p",{className:"text-slate-400 text-sm mb-1",children:n.trial.features}),s.jsx("p",{className:"text-white font-semibold",children:n.trial.fullAccess})]})]}),s.jsxs("button",{onClick:()=>r("/analyze"),className:"px-6 py-3 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300 inline-flex items-center gap-2",children:[n.trial.startAnalyzing,s.jsx(Nd,{size:20})]})]}):s.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-8 text-center animate-fade-in",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-500/20 flex items-center justify-center mx-auto mb-6",children:s.jsx(ut,{className:"text-purple-400",size:32})}),s.jsx("h1",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent",children:n.trial.activateTitle}),s.jsx("p",{className:"text-slate-300 text-lg mb-8",children:n.trial.activateDesc}),s.jsxs("div",{className:"bg-slate-950/50 rounded-lg p-6 mb-8 text-left",children:[s.jsx("h3",{className:"text-white font-semibold mb-4",children:n.trial.whatsIncluded}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(be,{className:"text-green-400 flex-shrink-0 mt-0.5",size:20}),s.jsx("span",{className:"text-slate-300",children:n.trial.feature1})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(be,{className:"text-green-400 flex-shrink-0 mt-0.5",size:20}),s.jsx("span",{className:"text-slate-300",children:n.trial.feature2})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(be,{className:"text-green-400 flex-shrink-0 mt-0.5",size:20}),s.jsx("span",{className:"text-slate-300",children:n.trial.feature3})]})]})]}),s.jsx("button",{onClick:p,disabled:a,className:"w-full px-6 py-4 rounded-lg bg-gradient-to-r from-pink-600 to-purple-600 text-white font-semibold hover:from-pink-500 hover:to-purple-500 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:a?n.trial.activating:n.trial.activateNow})]})})]}):null}function Fb({src:e,isMine:t=!1}){const[r,n]=x.useState(!1),[i,a]=x.useState(0),[l,o]=x.useState(0),[c,d]=x.useState(1),[u,m]=x.useState(!1),f=x.useRef(null);x.useEffect(()=>{const h=f.current;if(!h)return;const g=()=>{o(h.duration)},_=()=>{a(h.currentTime)},$=()=>{n(!1),a(0)};return h.addEventListener("loadedmetadata",g),h.addEventListener("timeupdate",_),h.addEventListener("ended",$),()=>{h.removeEventListener("loadedmetadata",g),h.removeEventListener("timeupdate",_),h.removeEventListener("ended",$)}},[]);const p=()=>{const h=f.current;h&&(r?h.pause():h.play(),n(!r))},b=h=>{const g=f.current;if(!g)return;const _=parseFloat(h.target.value);g.currentTime=_,a(_)},j=h=>{if(isNaN(h))return"0:00";const g=Math.floor(h/60),_=Math.floor(h%60);return`${g}:${_.toString().padStart(2,"0")}`},S=h=>{const g=f.current;if(!g)return;const _=parseFloat(h.target.value);g.volume=_,d(_)},y=l>0?i/l*100:0;return s.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-xl min-w-[200px] ${t?"bg-white/10 backdrop-blur-sm":"bg-gradient-to-r from-pink-500/20 to-purple-500/20 backdrop-blur-sm"}`,children:[s.jsx("audio",{ref:f,src:e,preload:"metadata"}),s.jsx("button",{onClick:p,className:`flex-shrink-0 w-9 h-9 rounded-full flex items-center justify-center transition-all ${t?"bg-white/20 hover:bg-white/30 text-white":"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white shadow-lg shadow-pink-500/30"}`,children:r?s.jsx(Iv,{size:16}):s.jsx(Ov,{size:16,className:"ml-0.5"})}),s.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[s.jsxs("div",{className:"relative w-full h-1.5 group",children:[s.jsx("div",{className:`absolute inset-0 rounded-full ${t?"bg-white/20":"bg-slate-600/50"}`}),s.jsx("div",{className:`absolute left-0 top-0 h-full rounded-full transition-all ${t?"bg-white/70":"bg-gradient-to-r from-pink-500 to-purple-500"}`,style:{width:`${y}%`}}),s.jsx("input",{type:"range",min:"0",max:l||0,value:i,onChange:b,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),s.jsx("div",{className:`absolute top-1/2 -translate-y-1/2 w-3 h-3 rounded-full transition-all opacity-0 group-hover:opacity-100 ${t?"bg-white":"bg-white shadow-lg"}`,style:{left:`calc(${y}% - 6px)`}})]}),s.jsxs("div",{className:"flex justify-between text-[10px]",children:[s.jsx("span",{className:t?"text-white/60":"text-slate-400",children:j(i)}),s.jsx("span",{className:t?"text-white/60":"text-slate-400",children:j(l)})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>m(!u),className:`flex-shrink-0 p-1.5 rounded-full transition-all ${t?"hover:bg-white/20 text-white/70 hover:text-white":"hover:bg-slate-600/50 text-slate-400 hover:text-white"}`,children:c===0?s.jsx(Qv,{size:16}):s.jsx(Yv,{size:16})}),u&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>m(!1)}),s.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 p-2 rounded-lg z-50 bg-slate-800/90 backdrop-blur-sm shadow-xl",children:s.jsxs("div",{className:"flex flex-col items-center gap-2 h-20",children:[s.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:c,onChange:S,className:"w-1.5 h-16 appearance-none bg-slate-600 rounded-full cursor-pointer",style:{writingMode:"vertical-lr",direction:"rtl"}}),s.jsxs("span",{className:"text-[10px] text-slate-400",children:[Math.round(c*100),"%"]})]})})]})]})]})}function Bb(){const{user:e,loading:t}=gt(),{navigate:r,getUrlParam:n}=rb(),{language:i}=tt(),{showToast:a}=rr(),{refreshMessages:l}=zd(),[o,c]=x.useState([]),[d,u]=x.useState(null),[m,f]=x.useState(null),[p,b]=x.useState([]),[j,S]=x.useState(""),[y,h]=x.useState(""),[g,_]=x.useState([]),[$,A]=x.useState(!0),[M,I]=x.useState(!1),[G,K]=x.useState(null),[E,W]=x.useState(null),[P,U]=x.useState(!1),k=x.useRef(null),q=x.useRef(null),H=x.useRef(0),O=x.useRef(null),L=x.useRef(null),se=x.useRef(null);x.useEffect(()=>{!t&&!e&&r("/signin")},[e,t,r]),x.useEffect(()=>(window.innerWidth<640&&e&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.height="100%"),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.height=""}),[e]),x.useEffect(()=>{if(e){const N=n("user");N&&(u(N),window.history.replaceState({},"","/messages"))}},[e,n]),x.useEffect(()=>(e&&(ke(),de(!0)),()=>{e&&de(!1)}),[e]),x.useEffect(()=>{d&&e?(Ge(d),Ie(d),(async()=>{try{const{data:T,error:R}=await w.from("profiles").select("id, full_name, username, avatar_url, is_online, show_online_status, last_seen").eq("id",d).single();!R&&T&&f(T)}catch(T){console.error("Error fetching user profile:",T)}})()):f(null)},[d,e]),x.useEffect(()=>{if(!e)return;const N=w.channel(`messages-${e.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`sender_id=eq.${e.id}`},T=>{const R=T.new;d&&R.receiver_id===d&&(b(le=>le.find(oe=>oe.id===R.id)?le:[...le,R]),ae())}).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`receiver_id=eq.${e.id}`},T=>{const R=T.new;d&&R.sender_id===d?(b(le=>le.find(oe=>oe.id===R.id)?le:[...le,R]),Ie(R.sender_id),ae()):ke()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages"},T=>{const R=T.new;b(le=>le.map(oe=>oe.id===R.id?R:oe))}).subscribe();return()=>{w.removeChannel(N)}},[e,d]),x.useEffect(()=>{const N=q.current;if(!N)return;const T=N.scrollHeight-N.scrollTop-N.clientHeight<100;p.length>H.current&&T&&ae(),H.current=p.length},[p]),x.useEffect(()=>{const T=setTimeout(async()=>{if(!y.trim()||!e){_([]);return}try{const{data:R}=await w.from("user_blocks").select("blocked_id, blocker_id").or(`blocker_id.eq.${e.id},blocked_id.eq.${e.id}`),le=new Set;R==null||R.forEach(ue=>{ue.blocker_id===e.id?le.add(ue.blocked_id):le.add(ue.blocker_id)});const{data:oe,error:ye}=await w.from("profiles").select("id, full_name, username, avatar_url, is_online, show_online_status, last_seen").neq("id",e.id).or(`full_name.ilike.%${y}%,username.ilike.%${y}%`).limit(10);if(ye)throw ye;const ve=(oe||[]).filter(ue=>!le.has(ue.id));_(ve)}catch(R){console.error("Search error:",R)}},300);return()=>clearTimeout(T)},[y,e]);const de=async N=>{if(e)try{await w.from("profiles").update({is_online:N,last_seen:new Date().toISOString()}).eq("id",e.id)}catch(T){console.error("Error updating online status:",T)}},ke=async()=>{if(e)try{const N=`deleted_conversations_${e.id}`,T=new Set(JSON.parse(localStorage.getItem(N)||"[]")),{data:R}=await w.from("user_blocks").select("blocked_id, blocker_id").or(`blocker_id.eq.${e.id},blocked_id.eq.${e.id}`),le=new Set;R==null||R.forEach(ge=>{ge.blocker_id===e.id?le.add(ge.blocked_id):le.add(ge.blocker_id)});const{data:oe,error:ye}=await w.from("messages").select("*").or(`sender_id.eq.${e.id},receiver_id.eq.${e.id}`).order("created_at",{ascending:!1});if(ye)throw ye;const{data:ve}=await w.from("conversation_cleared").select("partner_id, cleared_at").eq("user_id",e.id),ue=new Map;ve==null||ve.forEach(ge=>ue.set(ge.partner_id,ge.cleared_at));const je=new Map;for(const ge of oe||[]){const Ae=ge.sender_id===e.id?ge.receiver_id:ge.sender_id,xt=ge.sender_id===e.id;if(le.has(Ae)||ge.deleted_for_everyone||xt&&ge.deleted_for_sender||!xt&&ge.deleted_for_receiver)continue;const Le=ue.get(Ae);if(!(Le&&new Date(ge.created_at)<new Date(Le))&&!je.has(Ae)){const{data:Ze}=await w.from("profiles").select("id, full_name, username, avatar_url, is_online, show_online_status, last_seen").eq("id",Ae).single();if(Ze){let B=w.from("messages").select("*",{count:"exact",head:!0}).eq("sender_id",Ae).eq("receiver_id",e.id).is("read_at",null);Le&&(B=B.gt("created_at",Le));const{count:Z}=await B;je.set(Ae,{...Ze,last_message:ge.message_text,last_message_time:ge.created_at,unread_count:Z||0}),T.has(Ae)&&(T.delete(Ae),localStorage.setItem(N,JSON.stringify(Array.from(T))))}}}c(Array.from(je.values())),A(!1)}catch(N){console.error("Error loading conversations:",N),A(!1)}},Ge=async N=>{if(e)try{const{data:T}=await w.from("conversation_cleared").select("cleared_at").eq("user_id",e.id).eq("partner_id",N).single(),R=T==null?void 0:T.cleared_at,{data:le,error:oe}=await w.from("messages").select(`
          *,
          reply_message:reply_to (
            id,
            message_text,
            sender_id
          )
        `).or(`and(sender_id.eq.${e.id},receiver_id.eq.${N}),and(sender_id.eq.${N},receiver_id.eq.${e.id})`).order("created_at",{ascending:!0});if(oe)throw oe;const ve=(le||[]).filter(ue=>!(ue.deleted_for_everyone||ue.sender_id===e.id&&ue.deleted_for_sender||ue.receiver_id===e.id&&ue.deleted_for_receiver||R&&new Date(ue.created_at)<new Date(R))).map(ue=>({...ue,reply_message:Array.isArray(ue.reply_message)?ue.reply_message[0]:ue.reply_message}));b(ve),O.current!==N&&(O.current=N,setTimeout(()=>{q.current&&(q.current.scrollTop=q.current.scrollHeight)},150))}catch(T){console.error("Error loading messages:",T)}},Ie=async N=>{if(e)try{await w.from("messages").update({read_at:new Date().toISOString()}).eq("sender_id",N).eq("receiver_id",e.id).is("read_at",null),l()}catch(T){console.error("Error marking as read:",T)}},Se=async()=>{const N=j.trim();if(!N||!d||!e)return;const T=(G==null?void 0:G.id)||null;S(""),K(null);try{const{data:R}=await w.from("profiles").select("allow_messages_from").eq("id",d).maybeSingle();if((R==null?void 0:R.allow_messages_from)==="following"){const{data:oe}=await w.from("follows").select("id").eq("follower_id",e.id).eq("following_id",d).maybeSingle();if(!oe){a(i==="tr"?"Bu kullanc sadece takipilerinden mesaj alyor":"This user only accepts messages from followers","error"),S(N);return}}else if((R==null?void 0:R.allow_messages_from)==="nobody"){a(i==="tr"?"Bu kullanc mesaj almyor":"This user does not accept messages","error"),S(N);return}const{error:le}=await w.from("messages").insert({sender_id:e.id,receiver_id:d,message_text:N,message_type:"text",reply_to:T});le?(console.error("Error sending message:",le),a(i==="tr"?"Mesaj gnderilemedi":"Failed to send message","error"),S(N)):ke()}catch(R){console.error("Error sending message:",R),a(i==="tr"?"Mesaj gnderilemedi":"Failed to send message","error"),S(N)}},He=async N=>{if(!(!d||!e))try{const T=`audio_${e.id}_${Date.now()}.webm`,{error:R}=await w.storage.from("audio-messages").upload(T,N,{contentType:"audio/webm",cacheControl:"3600"});if(R){console.error("Upload error:",R);const{error:ye}=await w.from("messages").insert({sender_id:e.id,receiver_id:d,message_text:" "+(i==="tr"?"Sesli mesaj gnderildi":"Voice message sent"),message_type:"text",reply_to:(G==null?void 0:G.id)||null});if(ye)throw ye;K(null);return}const{data:le}=w.storage.from("audio-messages").getPublicUrl(T),{error:oe}=await w.from("messages").insert({sender_id:e.id,receiver_id:d,message_text:i==="tr"?"Sesli mesaj":"Voice message",message_type:"audio",audio_url:le.publicUrl,reply_to:(G==null?void 0:G.id)||null});if(oe)throw oe;K(null),a(i==="tr"?"Sesli mesaj gnderildi":"Voice message sent","success")}catch(T){console.error("Error sending audio message:",T),a(i==="tr"?"Sesli mesaj gnderilemedi":"Failed to send voice message","error")}},rt=async N=>{var ye;const T=(ye=N.target.files)==null?void 0:ye[0];if(!T||!d||!e)return;const R=T.type.startsWith("image/"),le=T.type.startsWith("video/");if(!R&&!le){a(i==="tr"?"Sadece grsel ve video ykleyebilirsiniz":"Only images and videos allowed","error");return}const oe=le?50*1024*1024:10*1024*1024;if(T.size>oe){a(i==="tr"?`Dosya ok byk (max ${le?"50MB":"10MB"})`:`File too large (max ${le?"50MB":"10MB"})`,"error");return}U(!0);try{const ve=T.name.split(".").pop(),ue=`${R?"image":"video"}_${e.id}_${Date.now()}.${ve}`,je=R?"message-images":"message-videos",{error:ge}=await w.storage.from(je).upload(ue,T,{contentType:T.type,cacheControl:"3600"});if(ge){console.error("Upload error:",ge),a(i==="tr"?`Ykleme baarsz: ${ge.message}`:`Upload failed: ${ge.message}`,"error");return}const{data:Ae}=w.storage.from(je).getPublicUrl(ue),{error:xt}=await w.from("messages").insert({sender_id:e.id,receiver_id:d,message_text:R?i==="tr"?" Grsel":" Image":" Video",message_type:R?"image":"video",image_url:R?Ae.publicUrl:null,video_url:le?Ae.publicUrl:null,reply_to:(G==null?void 0:G.id)||null});if(xt)throw xt;K(null),a(i==="tr"?R?"Grsel gnderildi":"Video gnderildi":R?"Image sent":"Video sent","success")}catch(ve){console.error("Error sending media:",ve),a(i==="tr"?"Medya gnderilemedi":"Failed to send media","error")}finally{U(!1),se.current&&(se.current.value="")}},st=async()=>{if(!(!e||!d))try{await w.from("conversation_cleared").upsert({user_id:e.id,partner_id:d,cleared_at:new Date().toISOString()},{onConflict:"user_id,partner_id"});const N=`deleted_conversations_${e.id}`,T=new Set(JSON.parse(localStorage.getItem(N)||"[]"));T.add(d),localStorage.setItem(N,JSON.stringify(Array.from(T))),u(null),I(!1),ke()}catch(N){console.error("Error deleting conversation:",N)}},Nt=async(N,T)=>{if(e)try{const R=T?"deleted_for_sender":"deleted_for_receiver";await w.from("messages").update({[R]:!0}).eq("id",N),b(le=>le.filter(oe=>oe.id!==N))}catch(R){console.error("Error deleting message for me:",R)}},Xe=async N=>{if(e)try{await w.from("messages").update({deleted_for_everyone:!0}).eq("id",N).eq("sender_id",e.id),b(T=>T.filter(R=>R.id!==N))}catch(T){console.error("Error deleting message for everyone:",T)}},C=async()=>{if(!(!e||!d))try{await w.from("user_blocks").insert({blocker_id:e.id,blocked_id:d}),u(null),I(!1),ke()}catch(N){console.error("Error blocking user:",N)}},X=N=>{u(N),h(""),_([]);const T=`deleted_conversations_${e.id}`,R=new Set(JSON.parse(localStorage.getItem(T)||"[]"));R.has(N)&&(R.delete(N),localStorage.setItem(T,JSON.stringify(Array.from(R))))},ae=()=>{setTimeout(()=>{q.current&&(q.current.scrollTop=q.current.scrollHeight)},100)};x.useEffect(()=>{if(d&&o.length>0){const N=o.find(T=>T.id===d);N&&f(N)}},[o,d]);const fe=N=>{const T=new Date(N),le=new Date().getTime()-T.getTime(),oe=Math.floor(le/6e4),ye=Math.floor(le/36e5),ve=Math.floor(le/864e5);return oe<1?"imdi":oe<60?`${oe}d nce`:ye<24?`${ye}s nce`:ve<7?`${ve}g nce`:T.toLocaleDateString("tr-TR",{day:"numeric",month:"short"})},te=N=>{if(!N)return null;const T=new Date(N),le=new Date().getTime()-T.getTime(),oe=Math.floor(le/6e4),ye=Math.floor(le/36e5),ve=Math.floor(le/864e5);return i==="tr"?oe<1?"Az nce evrimiiydi":oe<60?`${oe} dakika nce evrimiiydi`:ye<24?`${ye} saat nce evrimiiydi`:ve<7?`${ve} gn nce evrimiiydi`:`${T.toLocaleDateString("tr-TR",{day:"numeric",month:"short"})} tarihinde evrimiiydi`:oe<1?"Last seen just now":oe<60?`Last seen ${oe} min ago`:ye<24?`Last seen ${ye} hours ago`:ve<7?`Last seen ${ve} days ago`:`Last seen on ${T.toLocaleDateString("en-US",{day:"numeric",month:"short"})}`};return t?s.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-pink-500 border-t-transparent"})}):e?s.jsx("div",{className:"min-h-screen bg-slate-950 pt-20 sm:pt-20 pb-32 sm:pb-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 h-full",children:s.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-xl sm:rounded-2xl overflow-hidden h-[calc(100vh-180px)] sm:h-[calc(100vh-140px)] flex",children:[s.jsxs("div",{className:`${d?"hidden md:flex":"flex"} w-full md:w-96 flex-col border-r border-slate-800`,children:[s.jsxs("div",{className:"p-4 border-b border-slate-800",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:i==="tr"?"Mesajlar":"Messages"}),s.jsxs("div",{className:"relative",children:[s.jsx(Qa,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),s.jsx("input",{type:"text",value:y,onChange:N=>h(N.target.value),placeholder:i==="tr"?"Kullanc ara...":"Search users...",className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg pl-10 pr-4 py-2.5 text-white placeholder-slate-400 focus:outline-none focus:border-pink-500/50"})]})]}),g.length>0&&s.jsxs("div",{className:"p-2 border-b border-slate-800",children:[s.jsx("p",{className:"text-xs text-slate-400 px-2 mb-2",children:i==="tr"?"Arama Sonular":"Search Results"}),g.map(N=>s.jsxs("button",{onClick:()=>X(N.id),className:"w-full flex items-center gap-3 p-3 hover:bg-slate-800/50 rounded-lg transition-colors",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center text-white font-semibold",children:N.avatar_url?s.jsx("img",{src:N.avatar_url,alt:"",className:"w-full h-full rounded-full object-cover"}):N.full_name.charAt(0).toUpperCase()}),N.is_online&&N.show_online_status!==!1&&s.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-slate-900 rounded-full"})]}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("p",{className:"text-white font-medium",children:N.full_name}),N.username&&s.jsxs("p",{className:"text-sm text-slate-400",children:["@",N.username]})]})]},N.id))]}),s.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain",children:$?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-pink-500 border-t-transparent"})}):o.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-800/50 flex items-center justify-center mb-4",children:s.jsx(ur,{className:"text-slate-400",size:24})}),s.jsx("p",{className:"text-slate-400",children:i==="tr"?"Henz mesajnz yok":"No messages yet"}),s.jsx("p",{className:"text-sm text-slate-500 mt-2",children:i==="tr"?"Kullanc arayarak sohbet balatn":"Search for a user to start a conversation"})]}):o.map(N=>s.jsxs("button",{onClick:()=>u(N.id),className:`w-full flex items-center gap-3 p-4 border-b border-slate-800/50 hover:bg-slate-800/30 transition-colors ${d===N.id?"bg-slate-800/50":""}`,children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center text-white font-semibold",children:N.avatar_url?s.jsx("img",{src:N.avatar_url,alt:"",className:"w-full h-full rounded-full object-cover"}):N.full_name.charAt(0).toUpperCase()}),N.is_online&&N.show_online_status!==!1&&s.jsx("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-green-500 border-2 border-slate-900 rounded-full"}),N.unread_count>0&&s.jsx("div",{className:"absolute -top-1 -right-1 min-w-[20px] h-[20px] bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center font-bold px-1 border-2 border-slate-900",children:N.unread_count>99?"99+":N.unread_count})]}),s.jsxs("div",{className:"flex-1 text-left min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:`font-medium truncate ${N.unread_count>0,"text-white"}`,children:N.full_name}),N.last_message_time&&s.jsx("span",{className:`text-xs ml-2 flex-shrink-0 ${N.unread_count>0?"text-pink-400 font-medium":"text-slate-400"}`,children:fe(N.last_message_time)})]}),s.jsx("p",{className:`text-sm truncate ${N.unread_count>0?"text-slate-300 font-medium":"text-slate-400"}`,children:N.last_message||(i==="tr"?"Mesaj yok":"No messages")})]})]},N.id))})]}),s.jsx("div",{className:`${d?"flex":"hidden md:flex"} flex-1 flex-col relative`,children:d&&m?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-4 border-b border-slate-800 flex items-center gap-3",children:[s.jsx("button",{onClick:()=>u(null),className:"md:hidden text-slate-400 hover:text-white",children:s.jsx(_v,{size:20})}),s.jsxs("button",{onClick:()=>r(`/profile/${m.id}`),className:"relative hover:opacity-80 transition-opacity",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center text-white font-semibold",children:m.avatar_url?s.jsx("img",{src:m.avatar_url,alt:"",className:"w-full h-full rounded-full object-cover"}):m.full_name.charAt(0).toUpperCase()}),m.is_online&&m.show_online_status!==!1&&s.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-slate-900 rounded-full"})]}),s.jsxs("button",{onClick:()=>r(`/profile/${m.id}`),className:"flex-1 text-left hover:opacity-80 transition-opacity",children:[s.jsx("p",{className:"text-white font-medium",children:m.full_name}),m.is_online&&m.show_online_status!==!1?s.jsx("p",{className:"text-xs text-green-400",children:i==="tr"?"evrimii":"Online"}):m.show_online_status!==!1&&m.last_seen?s.jsx("p",{className:"text-xs text-slate-400",children:te(m.last_seen)}):m.username&&s.jsxs("p",{className:"text-sm text-slate-400",children:["@",m.username]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>I(!M),className:"text-slate-400 hover:text-white",children:s.jsx(jc,{size:20})}),M&&s.jsxs("div",{className:"absolute right-0 top-full mt-2 bg-slate-800 border border-slate-700 rounded-lg shadow-xl z-50 min-w-[200px]",children:[s.jsxs("button",{onClick:st,className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-slate-700 text-slate-300 hover:text-white transition-colors",children:[s.jsx(Dr,{size:16}),i==="tr"?"Sohbeti Sil":"Delete Chat"]}),s.jsxs("button",{onClick:C,className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-slate-700 text-red-400 hover:text-red-300 transition-colors",children:[s.jsx(vc,{size:16}),i==="tr"?"Kullancy Engelle":"Block User"]})]})]})]}),s.jsxs("div",{ref:q,className:"flex-1 overflow-y-auto overscroll-contain p-4 space-y-4",children:[p.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-800/50 flex items-center justify-center mb-4",children:s.jsx(ur,{className:"text-slate-400",size:24})}),s.jsx("p",{className:"text-slate-400",children:i==="tr"?"Henz mesaj yok":"No messages yet"}),s.jsx("p",{className:"text-sm text-slate-500 mt-2",children:i==="tr"?"lk mesaj gnderin":"Send the first message"})]}):p.map(N=>{const T=N.sender_id===e.id;return s.jsx("div",{className:`flex ${T?"justify-end":"justify-start"} group`,children:s.jsxs("div",{className:`max-w-[70%] ${T?"items-end":"items-start"} flex flex-col gap-1`,children:[N.reply_message&&s.jsxs("div",{className:`text-xs px-3 py-2 rounded-lg ${T?"bg-slate-800/50":"bg-slate-700/50"} text-slate-300 mb-1`,children:[s.jsx(ho,{size:12,className:"inline mr-1"}),N.reply_message.message_text]}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:`rounded-2xl px-4 py-2.5 ${T?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"bg-slate-800 text-white"}`,children:[N.message_type==="image"&&N.image_url&&s.jsx("img",{src:N.image_url,alt:"Sent image",className:"max-w-full max-h-64 rounded-lg mb-2 cursor-pointer object-cover",onClick:()=>window.open(N.image_url,"_blank")}),N.message_type==="video"&&N.video_url&&s.jsxs("video",{controls:!0,className:"max-w-full max-h-64 rounded-lg mb-2",preload:"metadata",children:[s.jsx("source",{src:N.video_url,type:"video/mp4"}),s.jsx("source",{src:N.video_url,type:"video/webm"}),i==="tr"?"Taraycnz video desteklemiyor":"Your browser does not support video"]}),N.message_type==="audio"&&N.audio_url&&s.jsx(Fb,{src:N.audio_url,isMine:T}),N.message_type!=="audio"&&N.message_type!=="image"&&N.message_type!=="video"&&s.jsx("p",{className:"break-words",children:N.message_text}),s.jsxs("div",{className:`flex items-center gap-1 mt-1 ${T?"justify-end":"justify-start"}`,children:[s.jsx("span",{className:`text-xs ${T?"text-white/70":"text-slate-400"}`,children:fe(N.created_at)}),T&&s.jsx("span",{children:N.read_at?s.jsx(Nv,{size:14,className:"text-blue-300"}):s.jsx(be,{size:14,className:"text-white/70"})})]})]}),s.jsx("button",{onClick:()=>W(E===N.id?null:N.id),className:`absolute ${T?"-left-6":"-right-6"} top-1/2 -translate-y-1/2 text-slate-400 hover:text-white opacity-0 group-hover:opacity-100 transition-opacity p-1`,children:s.jsx(jc,{size:14})}),E===N.id&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>W(null)}),s.jsxs("div",{className:`absolute ${T?"right-0 sm:right-full sm:mr-2":"left-0 sm:left-full sm:ml-2"} top-full mt-1 sm:top-0 sm:mt-0 bg-slate-800 border border-slate-700 rounded-lg shadow-xl z-50 min-w-[160px]`,children:[T&&s.jsxs("button",{onClick:()=>{Xe(N.id),W(null)},className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-slate-700 text-red-400 hover:text-red-300 text-sm transition-colors",children:[s.jsx(Dr,{size:14}),i==="tr"?"Herkesten Sil":"Delete for Everyone"]}),s.jsxs("button",{onClick:()=>{Nt(N.id,T),W(null)},className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-slate-700 text-slate-300 hover:text-white text-sm transition-colors",children:[s.jsx(pt,{size:14}),i==="tr"?"Benden Sil":"Delete for Me"]})]})]})]}),!T&&s.jsxs("button",{onClick:()=>K(N),className:"text-xs text-slate-400 hover:text-pink-400 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1",children:[s.jsx(ho,{size:12}),i==="tr"?"Yantla":"Reply"]})]})},N.id)}),s.jsx("div",{ref:k})]}),s.jsxs("div",{className:"p-2 sm:p-4 border-t border-slate-800",children:[G&&s.jsxs("div",{className:"mb-2 bg-slate-800/50 rounded-lg p-2 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-300",children:[s.jsx(ho,{size:14}),s.jsx("span",{children:G.message_text})]}),s.jsx("button",{onClick:()=>K(null),className:"text-slate-400 hover:text-white",children:s.jsx(pt,{size:16})})]}),s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(Nc,{onEmojiSelect:N=>S(T=>T+N),position:"top",inputRef:L}),s.jsx(yf,{onTranscription:N=>S(T=>T+N),onAudioBlob:He,language:i,mode:"audio",showToast:a}),s.jsx("input",{ref:se,type:"file",accept:"image/*,video/*",onChange:rt,className:"hidden"}),s.jsx("button",{type:"button",onClick:()=>{var N;return(N=se.current)==null?void 0:N.click()},disabled:P,className:`p-2 rounded-lg transition-all duration-300 ${P?"bg-blue-500/20 border border-blue-500/50 text-blue-400 animate-pulse":"bg-purple-500/20 border border-purple-500/30 text-purple-400 hover:border-purple-500/50 hover:bg-purple-500/30"}`,title:i==="tr"?"Grsel/Video Gnder":"Send Image/Video",children:P?s.jsx(Ne,{size:18,className:"animate-spin"}):s.jsx($v,{size:18})}),s.jsx("input",{ref:L,type:"text",value:j,onChange:N=>S(N.target.value),onKeyDown:N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),Se())},placeholder:i==="tr"?"Mesaj yazn...":"Type a message...",className:"flex-1 min-w-0 bg-slate-800/50 border border-slate-700 rounded-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base text-white placeholder-slate-400 focus:outline-none focus:border-pink-500/50"}),s.jsx("button",{onClick:Se,disabled:!j.trim()||P,className:"flex-shrink-0 bg-gradient-to-r from-pink-600 to-purple-600 text-white rounded-full p-2 sm:p-2.5 hover:shadow-lg hover:shadow-pink-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(ur,{size:18,className:"sm:w-5 sm:h-5"})})]})]})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-slate-800/50 flex items-center justify-center mx-auto mb-4",children:s.jsx(ur,{className:"text-slate-400",size:32})}),s.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:i==="tr"?"Mesajlarnz":"Your Messages"}),s.jsx("p",{className:"text-slate-400",children:i==="tr"?"Bir sohbet sein veya yeni bir sohbet balatn":"Select a chat or start a new conversation"})]})})})]})})}):null}function qb(){const{user:e,loading:t}=gt(),r=_t(),{t:n,language:i}=tt(),{showToast:a}=rr(),[l,o]=x.useState("subscription"),[c,d]=x.useState(!0),[u,m]=x.useState(null),[f,p]=x.useState(null),[b,j]=x.useState(!1),[S,y]=x.useState([]),[h,g]=x.useState([]),[_,$]=x.useState(!1),[A,M]=x.useState(!1),[I,G]=x.useState(!0),[K,E]=x.useState(!1),[W,P]=x.useState(!0),[U,k]=x.useState(!1),[q,H]=x.useState(!0),[O,L]=x.useState(!1),[se,de]=x.useState("everyone"),[ke,Ge]=x.useState(!1),[Ie,Se]=x.useState(null),[He,rt]=x.useState(!1),[st,Nt]=x.useState(!1),[Xe,C]=x.useState(!1),[X,ae]=x.useState(!1);x.useEffect(()=>{t||!e||oe()},[e,t]),x.useEffect(()=>{if(!t){if(!e){r("/signin");return}T(),fe(),te(),l==="blocked"?R():l==="favorites"&&le()}},[e,t,r,l]);const fe=async()=>{if(e)try{const{data:B,error:Z}=await w.from("profiles").select("is_developer").eq("id",e.id).single();!Z&&B&&Nt(B.is_developer===!0)}catch(B){console.error("Error checking developer status:",B)}},te=async()=>{try{const{data:B,error:Z}=await w.from("site_settings").select("maintenance_mode").eq("id","global").single();!Z&&B&&C(B.maintenance_mode)}catch(B){console.error("Error loading maintenance status:",B)}},N=async()=>{if(st){ae(!0);try{const B=!Xe,{error:Z}=await w.from("site_settings").update({maintenance_mode:B,maintenance_started_at:B?new Date().toISOString():null,maintenance_started_by:B?e==null?void 0:e.id:null,updated_at:new Date().toISOString()}).eq("id","global");if(Z)throw Z;C(B),a(B?i==="tr"?"Bakm modu aktif edildi":"Maintenance mode enabled":i==="tr"?"Bakm modu devre d brakld":"Maintenance mode disabled","success")}catch(B){console.error("Error toggling maintenance mode:",B),a(i==="tr"?"lem baarsz":"Operation failed","error")}finally{ae(!1)}}},T=async()=>{if(e)try{const{data:B,error:Z}=await w.from("subscriptions").select("plan_type, trial_end_date, lemon_squeezy_subscription_id, payment_failed").eq("user_id",e.id).single();if(Z&&Z.code!=="PGRST116"){console.error("Error loading subscription:",Z);return}B&&(m(B.plan_type),p(B.trial_end_date),Se(B.lemon_squeezy_subscription_id),rt(B.payment_failed||!1))}catch(B){console.error("Error in loadSubscriptionData:",B)}finally{d(!1)}},R=async()=>{if(e){$(!0);try{const{data:B,error:Z}=await w.from("user_blocks").select("id, blocked_id").eq("blocker_id",e.id);if(Z)throw Z;if(!B||B.length===0){y([]);return}const _e=B.map(Be=>Be.blocked_id),{data:St,error:It}=await w.from("profiles").select("id, full_name, username, avatar_url").in("id",_e);if(It)throw It;const us=B.map(Be=>{const pr=St==null?void 0:St.find(gr=>gr.id===Be.blocked_id);return{id:Be.id,blocked_id:Be.blocked_id,blocked_user:pr||{id:Be.blocked_id,full_name:"Unknown User",username:null,avatar_url:null}}});y(us)}catch(B){console.error("Error loading blocked users:",B),a("Failed to load blocked users","error")}finally{$(!1)}}},le=async()=>{if(e){M(!0);try{const{data:B,error:Z}=await w.from("user_favorites").select("id, favorite_user_id").eq("user_id",e.id);if(Z)throw Z;if(!B||B.length===0){g([]);return}const _e=B.map(Be=>Be.favorite_user_id),{data:St,error:It}=await w.from("profiles").select("id, full_name, username, avatar_url").in("id",_e);if(It)throw It;const us=B.map(Be=>{const pr=St==null?void 0:St.find(gr=>gr.id===Be.favorite_user_id);return{id:Be.id,favorite_user_id:Be.favorite_user_id,favorite_user:pr||{id:Be.favorite_user_id,full_name:"Unknown User",username:null,avatar_url:null}}});g(us)}catch(B){console.error("Error loading favorite users:",B),a("Failed to load favorite users","error")}finally{M(!1)}}},oe=async()=>{if(e)try{const{data:B}=await w.from("profiles").select("show_read_receipts, show_online_status").eq("id",e.id).single();B&&(G(B.show_read_receipts!==!1),P(B.show_online_status!==!1));const{data:Z}=await w.from("profiles").select("is_public, allow_messages_from").eq("id",e.id).single();if(Z){console.log("Privacy data:",Z);const _e=Z.is_public!==!1;H(_e),de(Z.allow_messages_from==="following"?"following":"everyone")}}catch(B){console.error("Error loading privacy settings:",B)}},ye=async B=>{if(e){L(!0);try{const{error:Z}=await w.from("profiles").update({is_public:B}).eq("id",e.id);if(Z)throw Z;H(B),a(i==="tr"?B?"Profiliniz herkese ak":"Profiliniz gizli":B?"Your profile is public":"Your profile is private","success")}catch(Z){console.error("Error updating profile visibility:",Z),a(i==="tr"?"Gncelleme baarsz":"Update failed","error")}finally{L(!1)}}},ve=async B=>{if(e){Ge(!0);try{const{error:Z}=await w.from("profiles").update({allow_messages_from:B}).eq("id",e.id);if(Z)throw Z;de(B),a(i==="tr"?B==="everyone"?"Herkes size mesaj atabilir":"Sadece takipileriniz mesaj atabilir":B==="everyone"?"Everyone can message you":"Only followers can message you","success")}catch(Z){console.error("Error updating messages setting:",Z),a(i==="tr"?"Gncelleme baarsz":"Update failed","error")}finally{Ge(!1)}}},ue=async(B,Z)=>{if(e&&confirm(`${n.settings.unblockConfirm} ${Z}?`))try{const{error:_e}=await w.from("user_blocks").delete().eq("id",B);if(_e)throw _e;y(St=>St.filter(It=>It.id!==B)),a(`${Z} ${n.settings.unblockSuccess}`,"success")}catch(_e){console.error("Error unblocking user:",_e),a("Failed to unblock user","error")}},je=async(B,Z)=>{if(e&&confirm(i==="tr"?`${Z} kullancsn favorilerden karmak istediinizden emin misiniz?`:`Are you sure you want to remove ${Z} from favorites?`))try{const{error:_e}=await w.from("user_favorites").delete().eq("id",B);if(_e)throw _e;g(St=>St.filter(It=>It.id!==B)),a(i==="tr"?`${Z} favorilerden karld`:`${Z} removed from favorites`,"success")}catch(_e){console.error("Error removing favorite:",_e),a("Favori kaldrlamad","error")}},ge=async B=>{if(e){E(!0);try{const{error:Z}=await w.from("profiles").update({show_read_receipts:B}).eq("id",e.id);if(Z)throw Z;G(B),a(B?n.settings.readReceiptsEnabled||"Read receipts enabled":n.settings.readReceiptsDisabled||"Read receipts disabled","success")}catch(Z){console.error("Error updating read receipts:",Z),a(n.settings.readReceiptsUpdateError||"Failed to update read receipts","error")}finally{E(!1)}}},Ae=async B=>{if(e){k(!0);try{const{error:Z}=await w.from("profiles").update({show_online_status:B}).eq("id",e.id);if(Z)throw Z;P(B),a(B?"Online durumu gsteriliyor":"Online durumu gizleniyor","success")}catch(Z){console.error("Error updating online status:",Z),a("Online durumu gncellenemedi","error")}finally{k(!1)}}},xt=async()=>{if(!e||!u)return;const B=i==="tr"?`${u==="premium"?"Premium":u==="standard"?"Standard":"Trial"} plannz iptal etmek istediinizden emin misiniz? Bu ilem geri alnamaz.`:`Are you sure you want to cancel your ${u} plan? This action cannot be undone.`;if(confirm(B)){j(!0);try{const{data:{session:Z}}=await w.auth.getSession();if(!Z)throw new Error("No session");const _e=await fetch("https://soewlqmskqmpycaevhoc.supabase.co/functions/v1/cancel-subscription",{method:"POST",headers:{Authorization:`Bearer ${Z.access_token}`,"Content-Type":"application/json"}}),St=await _e.json();if(!_e.ok)throw new Error(St.error||"Failed to cancel subscription");m("free"),Se(null),rt(!1),a(i==="tr"?"Aboneliiniz iptal edildi. Artk Free plandasnz.":"Your subscription has been cancelled. You are now on the Free plan.","success")}catch(Z){console.error("Error canceling subscription:",Z),a(i==="tr"?"Abonelik iptal edilirken bir hata olutu.":"An error occurred while canceling your subscription.","error")}finally{j(!1)}}},Le=B=>{var _e;return B?((_e={free:{tr:"cretsiz Plan",en:"Free Plan"},trial:{tr:"Deneme Plan",en:"Trial Plan"},standard:{tr:"Standart Plan",en:"Standard Plan"},premium:{tr:"Premium Plan",en:"Premium Plan"}}[B])==null?void 0:_e[i])||B:i==="tr"?"Ykleniyor...":"Loading..."},Ze=B=>{switch(B){case"premium":return"from-pink-500 to-purple-500";case"standard":return"from-cyan-500 to-blue-500";case"trial":return"from-green-500 to-emerald-500";default:return"from-slate-500 to-slate-600"}};return t||c?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(Ne,{className:"animate-spin text-purple-400",size:40})}):s.jsxs("div",{className:"min-h-screen relative pt-24 pb-24 sm:pb-16 px-4 md:px-6",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-20 left-10 w-96 h-96 bg-pink-500/10 rounded-full filter blur-3xl animate-pulse"}),s.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-purple-500/10 rounded-full filter blur-3xl animate-pulse delay-1000"})]}),s.jsxs("div",{className:"relative max-w-4xl mx-auto z-10",children:[s.jsx("div",{className:"text-center mb-8 animate-fade-in",children:s.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight",children:i==="tr"?"Ayarlar":"Settings"})}),s.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6 animate-fade-in-delay-1",children:[s.jsxs("div",{className:"flex gap-2 mb-6 border-b border-purple-500/20 pb-4 overflow-x-auto",children:[s.jsxs("button",{onClick:()=>o("subscription"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-all duration-300 whitespace-nowrap text-sm ${l==="subscription"?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"text-slate-400 hover:text-white hover:bg-slate-800/50"}`,children:[s.jsx(Sv,{size:16}),s.jsx("span",{children:i==="tr"?"Abonelik":"Subscription"})]}),s.jsxs("button",{onClick:()=>o("blocked"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-all duration-300 whitespace-nowrap text-sm ${l==="blocked"?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"text-slate-400 hover:text-white hover:bg-slate-800/50"}`,children:[s.jsx(Xa,{size:16}),s.jsx("span",{children:i==="tr"?"Engellenenler":"Blocked"})]}),s.jsxs("button",{onClick:()=>o("favorites"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-all duration-300 whitespace-nowrap text-sm ${l==="favorites"?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"text-slate-400 hover:text-white hover:bg-slate-800/50"}`,children:[s.jsx(wn,{size:16}),s.jsx("span",{children:i==="tr"?"Favoriler":"Favorites"})]}),s.jsxs("button",{onClick:()=>o("privacy"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-all duration-300 whitespace-nowrap text-sm ${l==="privacy"?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"text-slate-400 hover:text-white hover:bg-slate-800/50"}`,children:[s.jsx(wt,{size:16}),s.jsx("span",{children:i==="tr"?"Gizlilik":"Privacy"})]}),s.jsxs("button",{onClick:()=>o("notifications"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-all duration-300 whitespace-nowrap text-sm ${l==="notifications"?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"text-slate-400 hover:text-white hover:bg-slate-800/50"}`,children:[s.jsx(Gs,{size:16}),s.jsx("span",{children:i==="tr"?"Bildirimler":"Notifications"})]})]}),l==="subscription"&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-slate-950/50 rounded-xl p-6 border border-purple-500/20",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[s.jsx(Je,{size:20,className:"text-purple-400"}),i==="tr"?"Mevcut Plannz":"Current Plan"]}),s.jsxs("div",{className:`bg-gradient-to-r ${Ze(u)} p-6 rounded-lg mb-4`,children:[s.jsx("h4",{className:"text-2xl font-bold text-white mb-2",children:Le(u)}),u==="trial"&&f&&s.jsxs("p",{className:"text-white/80 text-sm",children:[i==="tr"?"Biti Tarihi: ":"Ends on: ",new Date(f).toLocaleDateString(i==="tr"?"tr-TR":"en-US")]}),u==="free"&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-white/80 text-sm mb-3",children:i==="tr"?"Daha fazla zellik iin standart/premium plana ykseltin":"Upgrade to standard/premium plan for more features"}),s.jsxs("button",{onClick:()=>r("/pricing"),className:"w-full px-6 py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white rounded-lg transition-all duration-300 font-semibold flex items-center justify-center gap-2",children:[s.jsx(Nr,{size:18}),i==="tr"?"Plan Ykselt":"Upgrade Plan"]})]})]}),He&&s.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-500/10 border border-red-500/30 rounded-lg mb-4",children:[s.jsx(ys,{className:"text-red-400 flex-shrink-0 mt-0.5",size:20}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-medium mb-1",children:i==="tr"?"deme Baarsz!":"Payment Failed!"}),s.jsx("p",{className:"text-slate-300 text-sm",children:i==="tr"?"Son demeniz baarsz oldu. Ltfen deme bilgilerinizi gncelleyin veya aboneliiniz iptal edilecektir.":"Your last payment failed. Please update your payment information or your subscription will be cancelled."})]})]}),u&&u!=="free"&&s.jsxs("div",{className:"space-y-4",children:[u==="standard"&&s.jsxs("button",{onClick:()=>r("/pricing"),className:"w-full px-6 py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white rounded-lg transition-all duration-300 font-semibold flex items-center justify-center gap-2",children:[s.jsx(Nr,{size:18}),i==="tr"?"Premium Plana Ykselt":"Upgrade to Premium"]}),s.jsxs("div",{className:"flex items-start gap-3 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:[s.jsx(ys,{className:"text-yellow-400 flex-shrink-0 mt-0.5",size:20}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-medium mb-1",children:i==="tr"?"Dikkat!":"Warning!"}),s.jsx("p",{className:"text-slate-300 text-sm",children:i==="tr"?"Aboneliinizi iptal ettiinizde, zelliklerinize eriiminizi kaybedeceksiniz ve hesabnz cretsiz plana dntrlecektir.":"When you cancel your subscription, you will lose access to your features and your account will be downgraded to the free plan."})]})]}),s.jsx("button",{onClick:xt,disabled:b,className:"w-full px-6 py-3 bg-red-600 hover:bg-red-500 disabled:bg-red-600/50 disabled:cursor-not-allowed text-white rounded-lg transition-all duration-300 font-semibold flex items-center justify-center gap-2",children:b?s.jsxs(s.Fragment,{children:[s.jsx(Ne,{className:"animate-spin",size:18}),i==="tr"?"ptal Ediliyor...":"Canceling..."]}):s.jsx(s.Fragment,{children:i==="tr"?"Abonelii ptal Et":"Cancel Subscription"})})]})]})}),l==="blocked"&&s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-400 text-sm mb-4",children:n.settings.blockedUsersDesc}),_?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(Ne,{className:"animate-spin text-purple-400",size:24})}):S.length===0?s.jsxs("div",{className:"text-center py-8 bg-slate-950/30 rounded-xl",children:[s.jsx(Xa,{className:"mx-auto mb-3 text-slate-600",size:40}),s.jsx("p",{className:"text-slate-400",children:n.settings.noBlockedUsers})]}):s.jsx("div",{className:"space-y-3",children:S.map(B=>s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-950/30 rounded-xl border border-purple-500/10",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center overflow-hidden",children:B.blocked_user.avatar_url?s.jsx("img",{src:B.blocked_user.avatar_url,alt:"",className:"w-full h-full object-cover"}):s.jsx(Je,{size:24,className:"text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white font-medium",children:B.blocked_user.full_name}),B.blocked_user.username&&s.jsxs("p",{className:"text-slate-400 text-sm",children:["@",B.blocked_user.username]})]}),s.jsx("button",{onClick:()=>ue(B.id,B.blocked_user.full_name),className:"px-4 py-2 rounded-lg bg-purple-600 hover:bg-purple-500 text-white text-sm font-medium transition-colors",children:n.settings.unblock})]},B.id))})]}),l==="favorites"&&s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-400 text-sm mb-4",children:n.settings.favoritesDesc}),A?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(Ne,{className:"animate-spin text-purple-400",size:24})}):h.length===0?s.jsxs("div",{className:"text-center py-8 bg-slate-950/30 rounded-xl",children:[s.jsx(wn,{className:"mx-auto mb-3 text-slate-600",size:40}),s.jsx("p",{className:"text-slate-400",children:n.settings.noFavorites})]}):s.jsx("div",{className:"space-y-3",children:h.map(B=>s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-950/30 rounded-xl border border-purple-500/10",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center overflow-hidden",children:B.favorite_user.avatar_url?s.jsx("img",{src:B.favorite_user.avatar_url,alt:"",className:"w-full h-full object-cover"}):s.jsx(Je,{size:24,className:"text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white font-medium",children:B.favorite_user.full_name}),B.favorite_user.username&&s.jsxs("p",{className:"text-slate-400 text-sm",children:["@",B.favorite_user.username]})]}),s.jsx("button",{onClick:()=>je(B.id,B.favorite_user.full_name),className:"px-4 py-2 rounded-lg bg-red-600 hover:bg-red-500 text-white text-sm font-medium transition-colors",children:n.settings.remove})]},B.id))})]}),l==="privacy"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-slate-400 text-sm mb-4",children:n.settings.privacyDesc}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"p-4 bg-slate-950/30 rounded-xl border border-purple-500/10",children:s.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-white font-medium",children:n.settings.showReadReceipts||"Show Read Receipts"}),s.jsx("p",{className:"text-slate-400 text-sm mt-1",children:n.settings.showReadReceiptsDesc||"Let others know when you've seen their messages"})]}),K?s.jsx(Ne,{className:"animate-spin text-purple-400 ml-4",size:20}):s.jsx("button",{onClick:()=>ge(!I),className:`relative ml-4 w-14 h-8 rounded-full transition-all duration-300 ${I?"bg-green-500":"bg-slate-600"}`,children:s.jsx("div",{className:`absolute top-1 w-6 h-6 rounded-full bg-white shadow-md transition-all duration-300 flex items-center justify-center ${I?"left-7":"left-1"}`,children:I?s.jsx(Nr,{className:"text-green-500",size:14}):s.jsx(pt,{className:"text-slate-400",size:14})})})]})}),s.jsx("div",{className:"p-4 bg-slate-950/30 rounded-xl border border-purple-500/10",children:s.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-white font-medium",children:i==="tr"?"Online Durumunu Gster":"Show Online Status"}),s.jsx("p",{className:"text-slate-400 text-sm mt-1",children:i==="tr"?"Dier kullanclar online olup olmadnz grebilsin":"Let others see when you are online"})]}),U?s.jsx(Ne,{className:"animate-spin text-purple-400 ml-4",size:20}):s.jsx("button",{onClick:()=>Ae(!W),className:`relative ml-4 w-14 h-8 rounded-full transition-all duration-300 ${W?"bg-green-500":"bg-slate-600"}`,children:s.jsx("div",{className:`absolute top-1 w-6 h-6 rounded-full bg-white shadow-md transition-all duration-300 flex items-center justify-center ${W?"left-7":"left-1"}`,children:W?s.jsx(Nr,{className:"text-green-500",size:14}):s.jsx(pt,{className:"text-slate-400",size:14})})})]})}),s.jsxs("div",{className:"p-4 bg-slate-950/30 rounded-xl border border-purple-500/10",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("span",{className:"text-white font-medium",children:n.settings.profileVisibility}),s.jsx("p",{className:"text-slate-400 text-sm mt-1",children:i==="tr"?"Profiliniz gizli mi olsun?":"Make your profile private?"})]}),O?s.jsx(Ne,{className:"animate-spin text-purple-400 ml-4",size:20}):s.jsx("button",{onClick:()=>ye(!q),className:`relative ml-4 w-14 h-8 rounded-full transition-all duration-300 ${q?"bg-slate-600":"bg-green-500"}`,children:s.jsx("div",{className:`absolute top-1 w-6 h-6 rounded-full bg-white shadow-md transition-all duration-300 flex items-center justify-center ${q?"left-1":"left-7"}`,children:q?s.jsx(Je,{className:"text-slate-400",size:12}):s.jsx(wt,{className:"text-green-500",size:12})})})]}),s.jsx("p",{className:"text-xs mt-2 text-slate-500",children:q?i==="tr"?" Profiliniz herkese ak":" Your profile is public":i==="tr"?" Profiliniz gizli - sadece takipileriniz grebilir":" Your profile is private - only followers can see"})]}),s.jsxs("div",{className:"p-4 bg-slate-950/30 rounded-xl border border-purple-500/10",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("span",{className:"text-white font-medium",children:n.settings.allowMessagesFrom}),s.jsx("p",{className:"text-slate-400 text-sm mt-1",children:i==="tr"?"Sadece takipilerim mesaj atabilsin":"Only followers can message me"})]}),ke?s.jsx(Ne,{className:"animate-spin text-purple-400 ml-4",size:20}):s.jsx("button",{onClick:()=>ve(se==="everyone"?"following":"everyone"),className:`relative ml-4 w-14 h-8 rounded-full transition-all duration-300 ${se==="following"?"bg-green-500":"bg-slate-600"}`,children:s.jsx("div",{className:`absolute top-1 w-6 h-6 rounded-full bg-white shadow-md transition-all duration-300 flex items-center justify-center ${se==="following"?"left-7":"left-1"}`,children:se==="following"?s.jsx(Nr,{className:"text-green-500",size:14}):s.jsx(pt,{className:"text-slate-400",size:14})})})]}),s.jsx("p",{className:"text-xs mt-2 text-slate-500",children:se==="following"?i==="tr"?" Sadece takipileriniz mesaj atabilir":" Only your followers can message you":i==="tr"?" Herkes size mesaj atabilir":" Everyone can message you"})]}),s.jsx("div",{className:"p-6 bg-red-500/10 rounded-xl border border-red-500/30 mt-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 bg-red-500/20 rounded-xl",children:s.jsx(ys,{className:"text-red-400",size:24})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:n.settings.deleteAccount}),s.jsx("p",{className:"text-slate-300 text-sm mb-4",children:n.settings.deleteAccountDesc}),s.jsxs("button",{onClick:async()=>{if(!(!e||!window.confirm(n.settings.deleteAccountConfirm)))try{const{error:Z}=await w.from("profiles").delete().eq("id",e.id);if(Z)throw Z;const{error:_e}=await w.auth.admin.deleteUser(e.id);await w.auth.signOut(),a(n.settings.deleteAccountSuccess,"success"),r("/")}catch(Z){console.error("Error deleting account:",Z),a(n.settings.deleteAccountError,"error")}},className:"px-6 py-3 bg-red-600 hover:bg-red-500 text-white rounded-xl font-semibold transition-all duration-300 flex items-center gap-2",children:[s.jsx(ys,{size:20}),n.settings.deleteAccountButton]})]})]})})]})]}),l==="notifications"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-slate-400 text-sm mb-4",children:n.settings.notificationsDesc}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-950/30 rounded-xl border border-purple-500/10",children:[s.jsx("span",{className:"text-white font-medium",children:n.settings.likesOnDreams}),s.jsx("button",{className:"relative w-14 h-8 rounded-full transition-all duration-300 bg-green-500",children:s.jsx("div",{className:"absolute top-1 left-7 w-6 h-6 rounded-full bg-white shadow-md transition-all duration-300 flex items-center justify-center",children:s.jsx(Nr,{className:"text-green-500",size:14})})})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-950/30 rounded-xl border border-purple-500/10",children:[s.jsx("span",{className:"text-white font-medium",children:n.settings.comments}),s.jsx("button",{className:"relative w-14 h-8 rounded-full transition-all duration-300 bg-green-500",children:s.jsx("div",{className:"absolute top-1 left-7 w-6 h-6 rounded-full bg-white shadow-md transition-all duration-300 flex items-center justify-center",children:s.jsx(Nr,{className:"text-green-500",size:14})})})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-950/30 rounded-xl border border-purple-500/10",children:[s.jsx("span",{className:"text-white font-medium",children:n.settings.newFollowers}),s.jsx("button",{className:"relative w-14 h-8 rounded-full transition-all duration-300 bg-green-500",children:s.jsx("div",{className:"absolute top-1 left-7 w-6 h-6 rounded-full bg-white shadow-md transition-all duration-300 flex items-center justify-center",children:s.jsx(Nr,{className:"text-green-500",size:14})})})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-950/30 rounded-xl border border-purple-500/10",children:[s.jsx("span",{className:"text-white font-medium",children:n.settings.directMessages}),s.jsx("button",{className:"relative w-14 h-8 rounded-full transition-all duration-300 bg-green-500",children:s.jsx("div",{className:"absolute top-1 left-7 w-6 h-6 rounded-full bg-white shadow-md transition-all duration-300 flex items-center justify-center",children:s.jsx(Nr,{className:"text-green-500",size:14})})})]})]})]}),st&&s.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-br from-red-500/10 to-orange-500/10 rounded-2xl border border-red-500/30",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"p-2 bg-red-500/20 rounded-lg",children:s.jsx(Jv,{className:"text-red-400",size:24})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-white",children:i==="tr"?"Gelitirici Paneli":"Developer Panel"}),s.jsx("p",{className:"text-slate-400 text-sm",children:i==="tr"?"Sadece developer yetkisine sahip kullanclar grebilir":"Only visible to users with developer privileges"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"p-4 bg-slate-950/50 rounded-xl border border-slate-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-white font-medium",children:i==="tr"?"Bakm Modu":"Maintenance Mode"}),Xe&&s.jsx("span",{className:"px-2 py-0.5 bg-yellow-500/20 text-yellow-400 text-xs rounded-full",children:i==="tr"?"AKTF":"ACTIVE"})]}),s.jsx("p",{className:"text-slate-400 text-sm mt-1",children:i==="tr"?"Aktif edildiinde, developer olmayan tm kullanclar siteye eriemez":"When enabled, all non-developer users cannot access the site"})]}),s.jsx("button",{onClick:N,disabled:X,className:`px-6 py-3 rounded-xl font-semibold transition-all ${Xe?"bg-green-600 hover:bg-green-500 text-white":"bg-red-600 hover:bg-red-500 text-white"} disabled:opacity-50`,children:X?s.jsx(Ne,{className:"animate-spin",size:20}):Xe?i==="tr"?"Bakmdan kar":"End Maintenance":i==="tr"?"Bakma Al":"Start Maintenance"})]})}),s.jsxs("div",{className:"flex items-start gap-3 p-4 bg-yellow-500/10 rounded-xl border border-yellow-500/30",children:[s.jsx(ys,{className:"text-yellow-400 flex-shrink-0 mt-0.5",size:20}),s.jsx("p",{className:"text-yellow-200 text-sm",children:i==="tr"?"DKKAT: Bakm modu aktif edildiinde, sadece Developer nvanna sahip kullanclar siteye eriebilir. Dier tm kullanclar bakm sayfasn grecektir.":"WARNING: When maintenance mode is enabled, only users with Developer title can access the site. All other users will see the maintenance page."})]})]})]}),s.jsxs("div",{className:"mt-8 p-6 bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl md:hidden",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:i==="tr"?"Yasal & Destek":"Legal & Support"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>r("/terms"),className:"w-full flex items-center justify-between p-3 bg-slate-800/50 hover:bg-slate-800 rounded-xl transition-colors group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500/20 flex items-center justify-center",children:s.jsx(wc,{className:"text-purple-400",size:20})}),s.jsx("span",{className:"text-white font-medium",children:i==="tr"?"Kullanm Koullar":"Terms of Service"})]}),s.jsx(_s,{className:"text-slate-500 group-hover:text-purple-400 transition-colors",size:20})]}),s.jsxs("button",{onClick:()=>r("/privacy"),className:"w-full flex items-center justify-between p-3 bg-slate-800/50 hover:bg-slate-800 rounded-xl transition-colors group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-pink-500/20 flex items-center justify-center",children:s.jsx(Fv,{className:"text-pink-400",size:20})}),s.jsx("span",{className:"text-white font-medium",children:i==="tr"?"Gizlilik Politikas":"Privacy Policy"})]}),s.jsx(_s,{className:"text-slate-500 group-hover:text-pink-400 transition-colors",size:20})]}),s.jsxs("button",{onClick:()=>r("/feedback"),className:"w-full flex items-center justify-between p-3 bg-slate-800/50 hover:bg-slate-800 rounded-xl transition-colors group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-cyan-500/20 flex items-center justify-center",children:s.jsx(Ya,{className:"text-cyan-400",size:20})}),s.jsx("span",{className:"text-white font-medium",children:i==="tr"?"Geri Bildirim":"Feedback"})]}),s.jsx(_s,{className:"text-slate-500 group-hover:text-cyan-400 transition-colors",size:20})]})]}),s.jsx("p",{className:"text-center text-slate-500 text-xs mt-6",children:" 2025 Submirra. All rights reserved."})]})]})]})]})}function Gb(){const{t:e}=tt(),t=_t();return s.jsxs("div",{className:"min-h-screen relative pt-20 md:pt-24 pb-24 sm:pb-16 px-4 md:px-6",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-40 left-20 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-40 right-20 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"})]}),s.jsxs("div",{className:"relative max-w-4xl mx-auto z-10",children:[s.jsx("div",{className:"text-center mb-10 md:mb-16 animate-fade-in",children:s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",children:e.terms.title})}),s.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6 md:p-8 space-y-6 md:space-y-8 animate-fade-in-delay",children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.terms.acceptanceTitle}),s.jsx("p",{className:"text-slate-300 leading-relaxed",children:e.terms.acceptanceText})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.terms.serviceTitle}),s.jsx("p",{className:"text-slate-300 leading-relaxed mb-4",children:e.terms.serviceText}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-300 ml-4",children:[s.jsx("li",{children:e.terms.serviceFeature1}),s.jsx("li",{children:e.terms.serviceFeature2}),s.jsx("li",{children:e.terms.serviceFeature3})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.terms.userAccountTitle}),s.jsx("p",{className:"text-slate-300 leading-relaxed mb-4",children:e.terms.userAccountText}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-300 ml-4",children:[s.jsx("li",{children:e.terms.userAccountFeature1}),s.jsx("li",{children:e.terms.userAccountFeature2}),s.jsx("li",{children:e.terms.userAccountFeature3})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.terms.contentTitle}),s.jsx("p",{className:"text-slate-300 leading-relaxed mb-4",children:e.terms.contentText}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-300 ml-4",children:[s.jsx("li",{children:e.terms.contentFeature1}),s.jsx("li",{children:e.terms.contentFeature2}),s.jsx("li",{children:e.terms.contentFeature3})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.terms.privacyTitle}),s.jsx("p",{className:"text-slate-300 leading-relaxed",children:e.terms.privacyText.includes("Privacy Policy")?s.jsxs(s.Fragment,{children:["Your privacy is important to us. Please review our"," ",s.jsx("button",{onClick:()=>t("/privacy"),className:"text-purple-400 hover:text-purple-300 transition-colors underline",children:"Privacy Policy"}),", which also governs your use of the service, to understand our practices."]}):s.jsxs(s.Fragment,{children:["Gizliliiniz bizim iin nemlidir. Uygulamalarmz anlamak iin ltfen hizmetin kullanmnz da yneten"," ",s.jsx("button",{onClick:()=>t("/privacy"),className:"text-purple-400 hover:text-purple-300 transition-colors underline",children:"Gizlilik Politikamz"})," ","inceleyin."]})})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.terms.paymentTitle}),s.jsx("p",{className:"text-slate-300 leading-relaxed mb-4",children:e.terms.paymentText}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-300 ml-4",children:[s.jsx("li",{children:e.terms.paymentFeature1}),s.jsx("li",{children:e.terms.paymentFeature2}),s.jsx("li",{children:e.terms.paymentFeature3})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.terms.terminationTitle}),s.jsx("p",{className:"text-slate-300 leading-relaxed",children:e.terms.terminationText})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.terms.contactTitle}),s.jsxs("p",{className:"text-slate-300 leading-relaxed",children:[e.terms.contactText," ",s.jsx("button",{onClick:()=>t("/contact"),className:"text-purple-400 hover:text-purple-300 transition-colors underline",children:e.terms.contactLink})]})]})]})]})]})}function Hb(){const{t:e}=tt(),t=_t();return s.jsxs("div",{className:"min-h-screen relative pt-20 md:pt-24 pb-24 sm:pb-16 px-4 md:px-6",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-40 left-20 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-40 right-20 w-96 h-96 bg-pink-500/5 rounded-full blur-3xl"})]}),s.jsxs("div",{className:"relative max-w-4xl mx-auto z-10",children:[s.jsx("div",{className:"text-center mb-10 md:mb-16 animate-fade-in",children:s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",children:e.privacy.title})}),s.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6 md:p-8 space-y-6 md:space-y-8 animate-fade-in-delay",children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.privacy.introductionTitle}),s.jsx("p",{className:"text-slate-300 leading-relaxed",children:e.privacy.introductionText})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.privacy.dataCollectionTitle}),s.jsx("p",{className:"text-slate-300 leading-relaxed mb-4",children:e.privacy.dataCollectionText}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-300 ml-4",children:[s.jsx("li",{children:e.privacy.dataCollectionItem1}),s.jsx("li",{children:e.privacy.dataCollectionItem2}),s.jsx("li",{children:e.privacy.dataCollectionItem3}),s.jsx("li",{children:e.privacy.dataCollectionItem4})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.privacy.dataUsageTitle}),s.jsx("p",{className:"text-slate-300 leading-relaxed mb-4",children:e.privacy.dataUsageText}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-300 ml-4",children:[s.jsx("li",{children:e.privacy.dataUsageItem1}),s.jsx("li",{children:e.privacy.dataUsageItem2}),s.jsx("li",{children:e.privacy.dataUsageItem3}),s.jsx("li",{children:e.privacy.dataUsageItem4})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.privacy.dataStorageTitle}),s.jsx("p",{className:"text-slate-300 leading-relaxed",children:e.privacy.dataStorageText})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.privacy.dataSecurityTitle}),s.jsx("p",{className:"text-slate-300 leading-relaxed mb-4",children:e.privacy.dataSecurityText}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-300 ml-4",children:[s.jsx("li",{children:e.privacy.dataSecurityItem1}),s.jsx("li",{children:e.privacy.dataSecurityItem2}),s.jsx("li",{children:e.privacy.dataSecurityItem3})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.privacy.userRightsTitle}),s.jsx("p",{className:"text-slate-300 leading-relaxed mb-4",children:e.privacy.userRightsText}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-300 ml-4",children:[s.jsx("li",{children:e.privacy.userRightsItem1}),s.jsx("li",{children:e.privacy.userRightsItem2}),s.jsx("li",{children:e.privacy.userRightsItem3}),s.jsx("li",{children:e.privacy.userRightsItem4})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.privacy.cookiesTitle}),s.jsx("p",{className:"text-slate-300 leading-relaxed",children:e.privacy.cookiesText})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.privacy.thirdPartyTitle}),s.jsx("p",{className:"text-slate-300 leading-relaxed",children:e.privacy.thirdPartyText})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.privacy.changesTitle}),s.jsx("p",{className:"text-slate-300 leading-relaxed",children:e.privacy.changesText})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.privacy.contactTitle}),s.jsxs("p",{className:"text-slate-300 leading-relaxed",children:[e.privacy.contactText," ",s.jsx("button",{onClick:()=>t("/contact"),className:"text-purple-400 hover:text-purple-300 transition-colors underline",children:e.privacy.contactLink})]})]})]})]})]})}function Wb(){const{t:e}=tt(),{user:t}=gt(),{showToast:r}=rr(),[n,i]=x.useState(""),[a,l]=x.useState("other"),[o,c]=x.useState(!1),[d,u]=x.useState(!1),m="AdvA9XekMYHYYOhcF";x.useEffect(()=>{ni.init(m)},[]);const f=async p=>{if(p.preventDefault(),!n.trim()){r(e.feedback.emptyError,"error");return}c(!0);try{const{error:b}=await w.from("feedback").insert({user_id:(t==null?void 0:t.id)||null,category:a,message:n.trim(),user_email:(t==null?void 0:t.email)||null});if(b)throw b;try{const j={name:(t==null?void 0:t.email)||"Anonymous User",email:(t==null?void 0:t.email)||"no-reply@submirra.ai",time:new Date().toLocaleString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),message:`Kategori: ${a}

${n.trim()}`};if(await ni.send("service_6btsv5d","template_x7aji5u",j),console.log(" Feedback email sent successfully"),t)try{const h="ded2c1c6-7064-499f-a1e7-a8f90c95904a",g=` Feedback: ${a}

Kullanc: ${t.email||"Anonymous"}
Kategori: ${a}

Mesaj:
${n.trim()}`,{error:_}=await w.from("messages").insert({sender_id:t.id,receiver_id:h,message_text:g});_?console.error(" Feedback mesaj kaydetme hatas:",_):console.log(" Feedback mesaj site ii mesajlama sistemine kaydedildi")}catch(h){console.error(" Feedback mesaj kaydetme hatas:",h)}}catch(j){console.error(" EmailJS Error (feedback):",j)}u(!0),i(""),r(e.feedback.successMessage,"success"),setTimeout(()=>{u(!1)},3e3)}catch(b){console.error("Error submitting feedback:",b),r(e.feedback.errorMessage,"error")}finally{c(!1)}};return s.jsxs("div",{className:"min-h-screen relative pt-20 md:pt-24 pb-24 sm:pb-16 px-4 md:px-6",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-40 left-20 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse"}),s.jsx("div",{className:"absolute bottom-40 right-20 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),s.jsx("div",{className:"absolute top-1/2 left-1/2 w-[400px] h-[400px] bg-cyan-500/5 rounded-full blur-3xl"})]}),s.jsxs("div",{className:"relative max-w-2xl mx-auto z-10",children:[s.jsxs("div",{className:"text-center mb-8 md:mb-12 animate-fade-in",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent py-2 leading-tight px-2",children:e.feedback.title}),s.jsx("p",{className:"text-slate-400 text-base md:text-lg px-2",children:e.feedback.subtitle})]}),s.jsx("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6 md:p-8 hover:border-purple-500/30 transition-all duration-300 animate-fade-in-delay",children:d?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(kl,{className:"text-green-400 mx-auto mb-4",size:48}),s.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:e.feedback.thankYou}),s.jsx("p",{className:"text-slate-400",children:e.feedback.thankYouMessage})]}):s.jsxs("form",{onSubmit:f,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-slate-300 mb-2",children:e.feedback.categoryLabel}),s.jsxs("select",{id:"category",value:a,onChange:p=>l(p.target.value),className:"w-full px-4 py-3 bg-slate-800/50 border border-purple-500/30 rounded-lg text-white focus:outline-none focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all",children:[s.jsx("option",{value:"bug",children:e.feedback.categoryBug}),s.jsx("option",{value:"feature",children:e.feedback.categoryFeature}),s.jsx("option",{value:"improvement",children:e.feedback.categoryImprovement}),s.jsx("option",{value:"other",children:e.feedback.categoryOther})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"feedback",className:"block text-sm font-medium text-slate-300 mb-2",children:e.feedback.messageLabel}),s.jsx("textarea",{id:"feedback",value:n,onChange:p=>i(p.target.value),rows:8,placeholder:e.feedback.placeholder,className:"w-full px-4 py-3 bg-slate-800/50 border border-purple-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all resize-none",required:!0})]}),s.jsx("button",{type:"submit",disabled:o||!n.trim(),className:"w-full px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white font-semibold rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:o?s.jsxs(s.Fragment,{children:[s.jsx(Ne,{className:"animate-spin",size:20}),s.jsx("span",{children:e.feedback.submitting})]}):s.jsxs(s.Fragment,{children:[s.jsx(ur,{size:20}),s.jsx("span",{children:e.feedback.submitButton})]})})]})}),s.jsx("div",{className:"mt-6 text-center text-sm text-slate-500",children:s.jsx("p",{children:e.feedback.privacyNote})})]})]})}function Vb({message:e}){const{language:t,setLanguage:r}=tt(),{user:n}=gt(),[i,a]=x.useState(!1),[l,o]=x.useState(!1),[c,d]=x.useState(!0);x.useEffect(()=>{u()},[n]);const u=async()=>{if(!n){d(!1);return}try{const{data:p}=await w.from("profiles").select("is_developer").eq("id",n.id).single();p&&a(p.is_developer===!0)}catch(p){console.error("Error checking developer status:",p)}finally{d(!1)}},m=async()=>{o(!0);try{const{error:p}=await w.from("site_settings").update({maintenance_mode:!1,maintenance_started_at:null,maintenance_started_by:null,updated_at:new Date().toISOString()}).eq("id","global");if(p)throw p;window.location.reload()}catch(p){console.error("Error ending maintenance:",p),o(!1)}},f=t==="tr"?"Sitemiz u an bakm aamasndadr. En yakn zamanda hizmetinize alacaktr.":"Our site is currently under maintenance. It will be available soon.";return s.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[[...Array(50)].map((p,b)=>s.jsx("div",{className:"absolute w-1 h-1 bg-white rounded-full animate-twinkle",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,opacity:Math.random()*.7+.3}},b)),s.jsx("div",{className:"absolute top-1/4 left-1/4 w-[500px] h-[500px] bg-purple-600/10 rounded-full blur-[120px] animate-pulse"}),s.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-[400px] h-[400px] bg-pink-600/10 rounded-full blur-[100px] animate-pulse",style:{animationDelay:"1s"}}),s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-indigo-600/5 rounded-full blur-[150px]"})]}),s.jsx("div",{className:"relative z-10 max-w-xl w-full",children:s.jsxs("div",{className:"bg-slate-900/40 backdrop-blur-xl border border-purple-500/20 rounded-3xl p-8 md:p-12 shadow-2xl shadow-purple-500/10",children:[s.jsx("div",{className:"flex justify-end mb-4",children:s.jsxs("button",{onClick:()=>r(t==="tr"?"en":"tr"),className:"flex items-center gap-2 px-3 py-1.5 bg-slate-800/50 hover:bg-slate-700/50 border border-slate-600/30 rounded-full text-slate-400 hover:text-white transition-all text-sm",children:[s.jsx(Va,{className:"w-4 h-4"}),s.jsx("span",{children:t==="tr"?"EN":"TR"})]})}),s.jsx("div",{className:"flex justify-center mb-8",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-pink-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg shadow-purple-500/30 rotate-12",children:s.jsx(Dv,{className:"w-10 h-10 text-white -rotate-12"})}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-yellow-400 rounded-full flex items-center justify-center animate-pulse",children:s.jsx(Ja,{className:"w-3 h-3 text-yellow-900 animate-spin",style:{animationDuration:"3s"}})})]})}),s.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-center mb-2",children:s.jsx("span",{className:"bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent",children:"Submirra"})}),s.jsx("p",{className:"text-slate-500 text-center text-sm mb-8",children:t==="tr"?"Rya Analiz Platformu":"Dream Analysis Platform"}),s.jsx("div",{className:"flex justify-center mb-6",children:s.jsxs("div",{className:"inline-flex items-center gap-3 px-5 py-2.5 bg-gradient-to-r from-amber-500/10 to-orange-500/10 border border-amber-500/30 rounded-full",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-3 h-3 bg-amber-400 rounded-full"}),s.jsx("div",{className:"absolute inset-0 w-3 h-3 bg-amber-400 rounded-full animate-ping"})]}),s.jsx("span",{className:"text-amber-300 font-semibold tracking-wide",children:t==="tr"?"BAKIM MODU":"MAINTENANCE MODE"})]})}),s.jsx("div",{className:"bg-slate-800/30 rounded-2xl p-6 mb-8 border border-slate-700/50",children:s.jsx("p",{className:"text-slate-300 text-center leading-relaxed",children:e||f})}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 mb-2",children:[s.jsx("span",{children:t==="tr"?"lem devam ediyor...":"Work in progress..."}),s.jsx(ut,{className:"w-4 h-4 text-purple-400"})]}),s.jsx("div",{className:"w-full h-2 bg-slate-800 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-500 rounded-full animate-maintenance-progress"})})]}),!c&&i&&s.jsxs("div",{className:"border-t border-slate-700/50 pt-6 mt-6",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[s.jsx(Xa,{className:"w-4 h-4 text-green-400"}),s.jsx("span",{className:"text-green-400 text-sm font-medium",children:t==="tr"?"Gelitirici Eriimi":"Developer Access"})]}),s.jsx("button",{onClick:m,disabled:l,className:"w-full py-4 rounded-xl bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold text-lg transition-all shadow-lg shadow-green-500/30 hover:shadow-green-500/50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:l?s.jsxs(s.Fragment,{children:[s.jsx(Ne,{className:"w-5 h-5 animate-spin"}),t==="tr"?"Bakm Sonlandrlyor...":"Ending Maintenance..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ja,{className:"w-5 h-5"}),t==="tr"?"Bakm Sonlandr":"End Maintenance"]})})]}),s.jsx("p",{className:"text-center text-slate-600 text-sm mt-8",children:t==="tr"?"Anlaynz iin teekkr ederiz.":"Thank you for your patience."})]})}),s.jsx("style",{children:`
        @keyframes maintenance-progress {
          0% { width: 0%; margin-left: 0%; }
          50% { width: 100%; margin-left: 0%; }
          100% { width: 0%; margin-left: 100%; }
        }
        .animate-maintenance-progress {
          animation: maintenance-progress 2.5s ease-in-out infinite;
        }
        @keyframes twinkle {
          0%, 100% { opacity: 0.3; transform: scale(1); }
          50% { opacity: 1; transform: scale(1.2); }
        }
        .animate-twinkle {
          animation: twinkle 3s ease-in-out infinite;
        }
      `})]})}function Kb(){const e=Ed(),{user:t}=gt(),[r,n]=x.useState(!1),[i,a]=x.useState(""),[l,o]=x.useState(!1),[c,d]=x.useState(!0);x.useEffect(()=>{u()},[t]);const u=async()=>{try{const{data:p}=await w.from("site_settings").select("maintenance_mode, maintenance_message").eq("id","global").single();if(p&&(n(p.maintenance_mode),a(p.maintenance_message||"")),t){const{data:b}=await w.from("profiles").select("is_developer").eq("id",t.id).single();b&&o(b.is_developer===!0)}}catch(p){console.error("Error checking maintenance mode:",p)}finally{d(!1)}},m=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1";if(!c&&r&&!l&&!m)return s.jsx(Vb,{message:i});const f=()=>{if(window.location.pathname.startsWith("/profile/"))return s.jsx(ym,{});switch(e){case"/":return s.jsx(gm,{});case"/about":return s.jsx(xb,{});case"/contact":return s.jsx(Pb,{});case"/analyze":return s.jsx(Ab,{});case"/library":return s.jsx(Db,{});case"/generator":return s.jsx(Rb,{});case"/pricing":return s.jsx(Lb,{});case"/profile":return s.jsx(ym,{});case"/dashboard":return s.jsx(Ob,{});case"/social":return s.jsx(Mb,{});case"/activate-trial":return s.jsx(Ub,{});case"/messages":return s.jsx(Bb,{});case"/settings":return s.jsx(qb,{});case"/terms":return s.jsx(Gb,{});case"/privacy":return s.jsx(Hb,{});case"/feedback":return s.jsx(Wb,{});case"/signin":case"/signup":return s.jsx($b,{});default:return s.jsx(gm,{})}};return s.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col",children:[s.jsx(gb,{}),s.jsx(fb,{}),s.jsx("div",{className:"flex-1",children:f()}),s.jsx(pb,{})]})}function Yb(){return s.jsx(bv,{children:s.jsx(yv,{children:s.jsx(eb,{children:s.jsx(Zv,{children:s.jsx(tb,{children:s.jsx(Kb,{})})})})})})}let ia=null,Za=!1;const _l=async()=>{if(!Za)try{const e=await fetch(`/version.json?t=${Date.now()}`,{cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});if(!e.ok)return;const t=await e.json(),r=`${t.version}-${t.buildTime}`;ia===null?(ia=r,console.log(`App version: ${t.version}`)):ia!==r&&(console.log("New version detected, reloading...",{old:ia,new:r}),Za=!0,setTimeout(()=>{window.location.reload()},100))}catch(e){console.debug("Version check failed:",e)}};_l();window.setInterval(_l,2*60*1e3);document.addEventListener("visibilitychange",()=>{!document.hidden&&!Za&&_l()});window.addEventListener("focus",()=>{Za||_l()});A0(document.getElementById("root")).render(s.jsx(x.StrictMode,{children:s.jsx(Yb,{})}));export{Cd as r};
